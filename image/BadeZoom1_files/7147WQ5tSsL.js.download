(function(t){var h=window.AmazonUIPageJS||window.P,r=h._namespace||h.attributeErrors,y=r?r("VSEComponentAssets",""):h;y.guardFatal?y.guardFatal(t)(y,window):y.execute(function(){t(y,window)})})(function(t,h,r){(function(){function y(d){h.URLSearchParams&&"1"===(new h.URLSearchParams(h.location.search)).get("iveDebug")&&(h.DistributionMetricsDebugInfo?h.DistributionMetricsDebugInfo.push(d):h.DistributionMetricsDebugInfo=[d])}function I(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(d){var b=16*Math.random()|0;return("x"==d?b:b&3|8).toString(16)})}h.vseFeatures=h.vseFeatures||{};var D=h.gatedP||{register:function(d,b,a,c,p){void 0===p&&(p=h.vseFeatures);t.now(d).execute(d+"-prereg",function(f){f||p[b]||(p[b]=!0,c.resolve(a(c)).then(function(){t.now(d).execute(d+"-reg",function(a){a||(t.log("Gated registration failed to register module!","ERROR",d),p[b]=!1)})}))})},declare:function(d,b,a,c){void 0===c&&(c=h.vseFeatures);t.now(d).execute(d+"-prereg",function(p){p||c[b]||
(c[b]=!0,t.declare(d,a))})}},l={count:function(d,b){var a=h.ue;a&&a.count("vse:csm:"+d,b)},emitNexusMetric:function(d,b,a,c){void 0===c&&(c=!1);h.ue&&h.ue.event&&d&&d.events&&d.events[0]&&d.events[0].data&&(h.ue.event(d.events[0].data,b,a),c&&y(d.events[0].data))},emitSushiMetric:function(d,b,a,c){var p=this;void 0===b&&(b=!1);a=a||"https://unagi-na.amazon.com/1/events/com.amazon.eel.vse.metricstest.nexus";c=c||0;if(!(3<=c)){var f=JSON.stringify(d).replace(/\\\\/g,""),k={params:f,paramsFormat:"json",
contentType:"application/json; charset\x3dutf-8",error:function(){p.emitSushiMetric(d,b,a,++c)}},g=navigator.userAgent.match(/iPhone/i),G=!1;t.now("mash").execute("vse-detect-mshop",function(){G=!0});var h=null!==g&&G;t.when("A").execute("Emit-VSE-Metrics",function(c){navigator&&navigator.sendBeacon&&!h?navigator.sendBeacon(a,f):c.post(a,k)});b&&y(d)}},logFatal:function(d,b,a){h.ueLogError&&h.ueLogError(a,{logLevel:"FATAL",attribution:d,message:b})},logError:function(d,b,a){h.ueLogError&&h.ueLogError(a,
{logLevel:"ERROR",attribution:d,message:b})}},C={makeApplicationSushiPayloadBuilder:function(d,b){return function(a){var c={eventSource:b.eventSource,requestId:b.requestId,sessionId:b.sessionId,placementContext:b.placementContext,creativeId:b.creativeId||"",marketplaceId:b.marketplaceId,weblabIds:b.weblabIds,clientId:b.clientId,isInternal:b.isInternal.toString(),isRobot:b.isRobot.toString(),pageAsin:b.pageAsin,customerId:b.customerId,sessionType:b.sessionType||1,refMarkers:b.refMarkers,eventId:I(),
timestamp:new Date,userAgentData:navigator.userAgent,titleSessionId:0,videoAsin:0,pageUrl:null!==h.location.href?h.location.href.substring(0,500):"",videoAsinList:b.videoAsinList||"",rankingStrategy:""};return{events:[{data:d.$.extend(c,a)}]}}},makeApplicationNexusPayloadBuilder:function(d,b){return function(a){var c={eventSource:b.eventSource,placementContext:b.placementContext,userAgentData:navigator.userAgent,videoAsin:b.videoAsin||"",pageAsin:b.pageAsin||"",videoAsinList:b.videoAsinList||"",titleSessionId:"0",
stringPayload:"",intPayload:1,rankingStrategy:"",creativeId:b.creativeId||"",clientId:b.clientId,pageUrl:null!==h.location.href?h.location.href.substring(0,500):""};return{events:[{data:d.$.extend(c,a)}]}}},makeClickstreamNexusPayloadBuilder:function(d,b){return function(a){return d.$.extend({timestamp:new Date,actionType:b.actionType,eventOwner:b.producerId,eventType:b.eventType,productId:b.productId},a)}},extendWithNewField:function(d,b,a){return d&&d.events&&d.events[0]&&d.events[0].data?(d=d.events[0].data,
d[b]=a,{events:[{data:d}]}):d}},z={fetchLatestPageState:function(d,b){d.state.replace(b,JSON.parse(d.$("script[type\x3d'a-state'][data-a-state*\x3d"+b+"]").html()));return d.state(b)},isDefined:function(d){return"undefined"!==typeof d&&null!==d}},u={updateReftagParam:function(d,b){return u.updateQueryStringParameter(d,"ref_?","ref",b)},updateQueryStringParameter:function(d,b,a,c){b=new RegExp("([?\x26/])"+b+"\x3d.*?(\x26|$)","i");var p=-1!==d.indexOf("?")?"\x26":"?";return d.match(b)?d.replace(b,
"$1"+a+"\x3d"+c+"$2"):d+p+a+"\x3d"+c},generateUUID:function(){for(var d="",b=0;13>b;b++)d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return d},decodeEntities:function(d){var b=document.createElement("textarea");b.innerHTML=d;return b.value},triggerShare:function(d,b,a,c){if(b){b=screen.width;var p=screen.height;a=a?a:.7*b;c=c?c:.7*p;h.open(d,"_blank","toolbar\x3d0,status\x3d0,width\x3d"+a+",height\x3d"+c+",top\x3d"+(p/2-c/2)+",left\x3d"+
(b/2-a/2))}else h.open(d,"_self")},getPageData:function(d){return"undefined"!==typeof d.pageLevelStateKey?A.state(d.pageLevelStateKey):d.pageLevelData},buildUrl:function(d,b){b=b||{};for(var a=h.navigator&&h.navigator.userAgent&&h.navigator.userAgent.match(/iPhone/i),c=Object.keys(b),p=0<c.length&&("sms:"!==d||!a)?"?":"",a=0;a<c.length;a++)"?"!==p&&(p+="\x26"),b[c[a]]&&(p+=c[a]+"\x3d"+encodeURIComponent(b[c[a]]));return d+p},generateReftags:function(d,b){var a,c;d=u.getPageData(d);"undefined"!==typeof d&&
(a=d.clientRef,c=d.deviceTypeRef);a=a?a:"un";c=c?c:"un";d=b?b:"un";b=u.generateUUID();d="cm_sw_"+d;a=a+"_"+c+"_"+b;return{returnReftag:d+"_r_"+a,clickReftag:d+"_c_"+a}}},fa={share:function(d,b){b={facebook:{shareEndpoint:"https://www.facebook.com/dialog/share",params:function(a){return{href:u.decodeEntities(a.url),display:"popup",quote:a.quote?u.decodeEntities(a.quote):"",app_id:"465632727431967"}},ref:"fb",height:450,width:700,isWebShare:!0},pinterest:{shareEndpoint:"https://www.pinterest.com/pin/create/button",
params:function(a){return{url:u.decodeEntities(a.url),media:u.decodeEntities(a.image),description:u.decodeEntities(a.description)}},ref:"pi",height:620,width:700,isWebShare:!0},twitter:{shareEndpoint:"https://twitter.com/intent/tweet",params:function(a){var b=u.decodeEntities(a.title);a=u.decodeEntities(a.url);if(b){var d=a?Math.min(a.length,20):-1;200<b.length+d+1&&(b=b.substring(0,200-(d+1+3))+"...")}return{text:b,url:a}},ref:"tw",height:470,width:670,isWebShare:!0},email:{shareEndpoint:"mailto:",
params:function(a){return{subject:u.decodeEntities(a.title),body:u.decodeEntities(a.description)+"\n"+u.decodeEntities(a.url)}},ref:"em",height:470,width:670,isWebShare:!1},sms:{shareEndpoint:"sms:",params:function(a){return{body:u.decodeEntities(a.title)+" "+u.decodeEntities(a.url)}},ref:"sm",height:470,width:670,isWebShare:!1},whatsapp:{shareEndpoint:"https://api.whatsapp.com/send",params:function(a){return{text:u.decodeEntities(a.description)+"\n"+u.decodeEntities(a.url)}},ref:"wa",height:470,
width:670,isWebShare:!1}}[b];var a=u.generateReftags(d,b.ref);d.url=u.updateReftagParam(d.url,a.returnReftag);d=u.buildUrl(b.shareEndpoint,b.params(d));u.triggerShare(d,b.isWebShare,b.width,b.height)}},F={sendRequest:function(d,b,a,c,p){d.ajax(b,{params:a,paramsFormat:"json",crossDomain:!0,method:"POST",withCredentials:!0,contentType:"application/json",success:c,error:p})}},ga={sendRequest:function(d,b,a,c,p){d.ajax(b,{params:a,paramsFormat:"json",crossDomain:!0,method:"POST",withCredentials:!0,contentType:"application/json",
success:c,error:p})}},ha={getClosedCaptions:function(d,b){var a=[];if(!d.objectIsEmpty(b))for(d=b.split(","),b=0;b<d.length;b+=2)d[b+1]!==r&&a.push({locale:d[b],url:d[b+1]});return a}},H=function(){return function(d){this.message=d}}(),J=function(){function d(b,a){void 0===a&&(a={refTagRecorderEndPoint:"/gp/mobile/tag/?",retryLimit:3});this.A=b;this.config=a}d.prototype.emitRefTag=function(b,a){void 0===a&&(a=0);if(!(a>=this.config.retryLimit)){var c=this;this.A.get(this.config.refTagRecorderEndPoint+
"ref\x3d"+b,{error:function(){c.emitRefTag(b,++a)}})}};return d}(),ia=r&&r.__assign||Object.assign||function(d){for(var b,a=1,c=arguments.length;a<c;a++){b=arguments[a];for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}return d},ja=function(){function d(b){var a=this;this.config=b;this.log=function(c){if(a.videoEvent){var b=a.$container.closest("[data-csa-c-id]");0<b.length?(a.basePayload.parentElementId=b.data("csa-c-id"),a.videoEvent("setEntity",{video:ia({},a.basePayload,c)}),
a.videoEvent("log",{schemaId:a.schemaId},{ent:"all"})):h.ue&&(h.ue.count(d.CANNOT_FIND_CSA_WIDGET,1),l.logError("ive-lucid-video-events","Cannot find CSA widget, container id: "+a.$container.attr("id")+", eventPayload: "+JSON.stringify(c),"Cannot find CSA widget, container id: "+a.$container.attr("id")+", eventPayload: "+JSON.stringify(c)))}else l.count("ive:csa:cannotCreateVideoEvent:noVideoEvent",1)};this.schemaId=b.schemaId;this.$container=b.$container;this.basePayload={player:"Brila",parentElementId:""};
h.csa?this.videoEvent=h.csa("Events",{producerId:b.producerId}):l.count("ive:csa:cannotCreateVideoEvent:noCsaAvailable",1)}d.CANNOT_FIND_CSA_WIDGET="ive-cannot-find-csa-widget";return d}(),O=function(){function d(b,a,c,p,f){var k=this;this.player=a;this.A=c;this.isIvx=p;this.clientPrefix=f;this.secondsFromLastEvent=this.lastLoggedEventInterval=this.loggingInterval=this.initialLoggingDelay=0;this.aciContentId="";this.emitCarouselClickEvent=function(){k.logCSAEvent(k.secondsFromLastEvent,"ENDED");k.isAutoplay=
!1};this.attachPlayerEventListeners=function(){k.player.on("playbackStart",k._playbackStartHandler);k.player.on("playbackComplete",k._playbackCompleteHandler);k.player.on("fullscreenchange",k._playerModeChangeHandler);k.player.on("pause",k._playbackPauseHandler);k.player.on("mute",k._playbackMuteHandler);k.player.on("unmute",k._playbackUnmuteHandler);k.player.on("enableClosedCaptions",k._playbackEnableClosedCaptionsHandler);k.player.on("disableClosedCaptions",k._playbackDisableClosedCaptionsHandler);
k.A.on("vse:"+k.clientPrefix+":player:continuous:play",function(){k.isAutoplay=!0});k.A.on("vse:"+k.clientPrefix+":page:lightBoxClosed",function(){k.isAutoplay=!1})};this._playbackStartHandler=function(){k.aciContentId=k.getCurrentACIContentId();k.logCSAEvent(k.secondsFromLastEvent,"PLAYING");l.count(k.clientPrefix+":csa:startPlaying",1);k.removeCSAEventHandler();k.addCSAEventHandler()};this._playbackCompleteHandler=function(){k.logCSAEvent(k.secondsFromLastEvent,"ENDED");k.removeCSAEventHandler()};
this._playerModeChangeHandler=function(){k.logCSAEvent(k.secondsFromLastEvent,"MODE_CHANGED",k.currentPlayerMode);k.removeCSAEventHandler();k.addCSAEventHandler()};this._playbackPauseHandler=function(){k.logCSAEvent(k.secondsFromLastEvent,"STOPPED");k.removeCSAEventHandler()};this._playbackMuteHandler=function(){k.logCSAEvent(k.secondsFromLastEvent,"MUTED");k.removeCSAEventHandler();k.addCSAEventHandler()};this._playbackUnmuteHandler=function(){k.logCSAEvent(k.secondsFromLastEvent,"UNMUTED");k.removeCSAEventHandler();
k.addCSAEventHandler()};this._playbackEnableClosedCaptionsHandler=function(){k.logCSAEvent(k.secondsFromLastEvent,"CAPTIONS_ON");k.removeCSAEventHandler();k.addCSAEventHandler()};this._playbackDisableClosedCaptionsHandler=function(){k.logCSAEvent(k.secondsFromLastEvent,"CAPTIONS_OFF");k.removeCSAEventHandler();k.addCSAEventHandler()};this.addCSAEventHandler=function(){k.lastLoggedEventInterval=k.A.interval(function(){k.secondsFromLastEvent++},d.TIMERS.TIME_FROM_LAST_EVENT_MS);k.initialLoggingDelay=
k.A.delay(function(){k.logCSAEvent(k.secondsFromLastEvent,"PLAYING");k.loggingInterval=k.A.interval(function(){k.logCSAEvent(k.secondsFromLastEvent,"NONE")},d.TIMERS.SUBSEQUENT_INTERVAL_MS)},d.TIMERS.INITIAL_DELAY_MS)};this.removeCSAEventHandler=function(){clearInterval(k.lastLoggedEventInterval);clearInterval(k.loggingInterval);clearTimeout(k.initialLoggingDelay);k.secondsFromLastEvent=0;k.loggingInterval=0;k.initialLoggingDelay=0};this.logCSAEvent=function(a,c,b){""!==k.aciContentId?(k.currentPlayerMode=
k.getCurrentPlayerMode(),a={contentId:k.aciContentId,viewDuration:a.toString(),playerMode:b||k.currentPlayerMode,isAutoPlayed:k.isAutoplay.toString(),isCaptionOn:k.player.isCaptionOn().toString(),isAudioOn:(!k.player.isMuted()).toString(),videoRequestId:k.player.getTitleSessionId().toString(),eventName:c},k.csa.log(a),k.secondsFromLastEvent=0):l.count(k.clientPrefix+":csa:noContentIdPresented",1)};this.csa=new ja(b);this.player=a;this.currentPlayerMode=this.getCurrentPlayerMode();this.isAutoplay=
this.player.isAutoplayed();this.attachPlayerEventListeners()}d.prototype.getCurrentPlayerMode=function(){return this.isIvx?"IMMERSIVE_VIEW":this.player.isFullscreen()?"FULL_SCREEN":"MODAL"};d.prototype.getCurrentACIContentId=function(){return this.player.getCurrent().aciContentId||""};d.TIMERS={INITIAL_DELAY_MS:2E3,SUBSEQUENT_INTERVAL_MS:3E4,TIME_FROM_LAST_EVENT_MS:1E3};return d}(),P=function(){return function(d){var b=this;this.A=d;this.buildTag=function(a){if(!a.href)return"";var c="tag\x3d"+a.vendorTrackingId,
d=a.asin;b.A.objectIsEmpty(d)||(d="\x26creativeASIN\x3d"+d);var f="linkCode\x3d",f=b.A.objectIsEmpty(a.linkCode)?f+"vse":f+a.linkCode,k=a.aciContentId,g="";b.A.objectIsEmpty(a.aciContentId)||(g="\x26asc_contentid\x3d"+k);c=c+"\x26"+f+d+g;c=0>a.href.indexOf("?")?"?"+c:"\x26"+c;return a.href+c}}}(),Q={queueComplete:!0},R=function(){function d(b,a,c){var d=this;this.player=b;this.frame=a;this.assets=[];this.currentIndex=0;this.eventEmitter=new c.EventEmitter;this.player.on("playbackComplete",function(){d.currentIndex++;
d.doPlay()})}d.prototype.play=function(b){b?this.player.play(b):this.player.play();return this};d.prototype.getCurrentTime=function(){return this.player.getCurrentTime()};d.prototype.setCurrentTime=function(b){this.player.setCurrentTime(b);return this};d.prototype.getMediaDuration=function(){return this.player.getMediaDuration()};d.prototype.mute=function(){this.player.mute();return this};d.prototype.unmute=function(){this.player.unmute();return this};d.prototype.isMuted=function(){return this.player.isMuted()};
d.prototype.resume=function(b){this.player.resume(b);return this};d.prototype.pause=function(b){this.player.pause(b);return this};d.prototype.next=function(){this.player.stop();this.currentIndex++;this.doPlay();return this};d.prototype.previous=function(){this.player.stop();this.currentIndex--;this.doPlay();return this};d.prototype.seek=function(b){this.player.seek(b);return this};d.prototype.enqueue=function(b,a){void 0===a&&(a=this.assets.length);b instanceof Array?(b=b.slice(),b.splice(0,0,this.assets),
Array.prototype.splice.apply(this.assets,b)):this.assets.splice(a,0,b);return this};d.prototype.dequeue=function(b){var a=this,c;if("number"===typeof b)c=[b];else if(b instanceof Array){var d=b.map(function(a){return a.contentId});c=this.assets.map(function(a){return d.indexOf(a.contentId)}).filter(function(a){-1!=a})}else c=[this.assets.map(function(a,c){return c}).filter(function(c){a.assets[c].contentId==b.contentId})[0]];for(var f=0,k=c.length;f<k;f++)this.assets.splice(c[f],1);return this};d.prototype.on=
function(b,a){if(Q.hasOwnProperty(b))this.eventEmitter.on(b,a);else this.player.on(b,a);return this};d.prototype.off=function(b,a){Q.hasOwnProperty(b)?this.eventEmitter.off(b,a):this.player.off(b,a);return this};d.prototype.ready=function(b){this.player.ready(b);return this};d.prototype.readyState=function(){return this.player.readyState()};d.prototype.load=function(){this.player.load();return this};d.prototype.getAssets=function(){return this.assets};d.prototype.getCurrentAssetIndex=function(){return this.currentIndex-
1};d.prototype.getPosition=function(){return this.player.getPosition()};d.prototype.isPlaying=function(){return this.player.isPlaying()};d.prototype.isPaused=function(){return this.player.isPaused()};d.prototype.getVersion=function(){return this.player.getVersion()};d.prototype.destroy=function(){this.player.destroy()};d.prototype.addChild=function(b,a){this.player.addChild(b,a);return this};d.prototype.removeChild=function(b){this.player.removeChild(b);return this};d.prototype.loadNextVideoPoster=
function(b){this.player.loadNextVideoPoster(b);return this};d.prototype.blur=function(){this.player.blur();return this};d.prototype.requestFullscreen=function(){this.player.requestFullscreen();return this};d.prototype.exitFullscreen=function(){this.player.exitFullscreen();return this};d.prototype.isFullscreen=function(){return this.player.isFullscreen()};d.prototype.fluid=function(b){this.player.fluid(b);return this};d.prototype.aspectRatio=function(b){this.player.aspectRatio(b);return this};d.prototype.enableCurrentTextTrack=
function(b){void 0===b&&(b="en");this.player.enableCurrentTextTrack(b);return this};d.prototype.disableCurrentTextTrack=function(b){void 0===b&&(b="en");this.player.disableCurrentTextTrack(b);return this};d.prototype.updateTextTrack=function(b){this.player.updateTextTrack(b);return this};d.prototype.removeCurrentTextTracks=function(){this.player.removeCurrentTextTracks();return this};d.prototype.setInitialData=function(b){this.player.setInitialData(b);return this};d.prototype.showPoster=function(b){this.player.showPoster(b);
return this};d.prototype.getCurrent=function(){return this.player.getCurrent()};d.prototype.isCaptionOn=function(){return this.player.isCaptionOn()};d.prototype.isAutoplayed=function(){return this.player.isAutoplayed()};d.prototype.getTitleSessionId=function(){return this.player.getTitleSessionId()};d.prototype.requestPictureInPicture=function(){this.player.requestPictureInPicture();return this};d.prototype.exitPictureInPicture=function(){this.player.exitPictureInPicture();return this};d.prototype.setPlayerMode=
function(b){this.player.setPlayerMode(b);return this};d.prototype.doPlay=function(){var b=this.player.getCurrent();b&&this.assets[this.currentIndex]?this.assets[this.currentIndex].contentId==b.contentId?this.player.play():this.player.play(this.assets[this.currentIndex]):this.assets[this.currentIndex]&&this.player.play(this.assets[this.currentIndex])};return d}(),ka=function(){function d(b,a){var c=this;this.isMshop=this.isReportWidgetClosed=this.mouseOverVideoPlayer=!1;this.DISCLOSURE_SELECTOR=".ive-video-disclosure-container-wrapper";
this.INFLUENCER_DISCLOSURE_SELECTOR=".ive-aip-link";this.PUBLISHER_DISCLOSURE_SELECTOR=".ive-osp-link";this.HIDDEN_CSS_CLASS="aok-hidden";this.REPORT_COPYRIGHT_SELECTOR=".vse-fb-copyright";this.REPORT_SHOWN_METRIC="ive:player:report:shown";this.REPORT_SUBMITTED_METRIC="ive:player:report:submit";this.REPORT_HIDDEN_METRIC="ive:player:report:hidden";this.update=function(a){c.report&&c.report.setActiveVideoAndSource(a.contentId,a.vendorCode,a.aciContentId);if(!0===c.config.includeEarnsComissionDisclosure&&
c.$disclosureContainer){var b=c.$disclosureContainer.find(c.INFLUENCER_DISCLOSURE_SELECTOR),d=c.$disclosureContainer.find(c.PUBLISHER_DISCLOSURE_SELECTOR),f="Influencer"===a.creatorType;a="3P"===a.creatorType;b.toggleClass(c.HIDDEN_CSS_CLASS,!f);d.toggleClass(c.HIDDEN_CSS_CLASS,f);c.$disclosureContainer.toggleClass(c.HIDDEN_CSS_CLASS,!(f||a))}};this.destroy=function(){c.report&&c.$reportContainer.remove();c.$disclosureContainer&&c.$disclosureContainer.remove()};this.deRegisterReport=function(){c.A.off("vse:"+
c.reportId+":feedback:shown");c.A.off("vse:"+c.reportId+":feedback:hidden");c.A.off("vse:"+c.reportId+":feedback:submitted:success")};this.addReportHandlers=function(){c.A.on("vse:"+c.reportId+":feedback:shown",function(){l.count(c.REPORT_SHOWN_METRIC,1);c.playerShim&&c.playerShim.isPlaying()&&c.playerShim.pause();c.isReportWidgetClosed=!1;c.$reportContainer.find(c.REPORT_COPYRIGHT_SELECTOR).click(function(a){c.isMshop&&(a.preventDefault(),c.report.showInfringementNotSupport())})});c.A.on("vse:"+
c.reportId+":feedback:hidden",function(){l.count(c.REPORT_HIDDEN_METRIC,1);c.isReportWidgetClosed=!0;c.mouseOverVideoPlayer||c.hideReportWidget();c.$reportContainer.find(c.REPORT_COPYRIGHT_SELECTOR).unbind("click")});c.A.on("vse:"+c.reportId+":feedback:submitted:success",function(){l.count(c.REPORT_SUBMITTED_METRIC,1)})};this.showReportWidget=function(){c.$reportContainer.css({display:"inline-block"});c.toggleDimVideoPlayer(!0)};this.hideReportWidget=function(){c.$reportContainer.css({display:"none"});
c.toggleDimVideoPlayer(!1)};this.toggleDimVideoPlayer=function(a){c.$playerContainer.find("video").toggleClass("dim-video-player",a)};this.mouseLeaveHandler=function(){c.isReportWidgetClosed&&c.hideReportWidget();c.mouseOverVideoPlayer=!1};this.config=b;this.playerShim=a}d.prototype.initialize=function(b){var a=this;t.when("A","a-button","ready").execute("IVECreateBasicComponentsForPlayer",function(c,d){a.A=c;a.isMshop=c.capabilities.mobile&&c.capabilities.isAmazonApp;a.$playerContainer=a.A.$("#"+
a.config.parentId);a.deRegisterReport();var f=c.state(a.config.reportPageStateName);a.reportId=f.id;c=new a.config.feedbackFactory({A:c,buttonApi:d});a.report=c.create(a.reportId,a.config.reportPageStateName,!1);a.addReportHandlers();a.$disclosureContainer=a.$playerContainer.parent().find(a.DISCLOSURE_SELECTOR);a.$playerContainer.append(a.$disclosureContainer);a.update(b);a.$reportContainer=a.$playerContainer.parent().find(".ive-"+a.config.clientPrefix+"-report-container");a.isReportWidgetClosed=
!0;a.$reportContainer.removeClass(a.HIDDEN_CSS_CLASS);a.$playerContainer.append(a.$reportContainer);c="report-overlays-player-"+a.reportId;a.A.declarative.create(a.$playerContainer,c,{});a.A.declarative(c,"mouseenter touchstart focus",function(){a.isReportWidgetClosed&&a.showReportWidget();a.mouseOverVideoPlayer=!0;a.A.capabilities.touch&&a.A.delay(a.mouseLeaveHandler,3E3)});a.A.declarative(c,"mouseleave",a.mouseLeaveHandler)})};return d}(),la=r&&r.__assign||Object.assign||function(d){for(var b,a=
1,c=arguments.length;a<c;a++){b=arguments[a];for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])}return d},S=function(){function d(b,a,c,d){var f=this;this.config=a;this.libs=d;this.VSE_CC_KEY="vse_brila_cc_status";this.eventEmitter=new d.EventEmitter;this.currentAsset=c;this.initHandlers();c=a.parentId+"-element";var k;a.isReactFactory||(k=document.getElementById(a.parentId),this.videoElement=document.createElement("video"),this.videoElement.id=c,this.videoElement.className=a.isVideoImmersivePlayer?
"video-js brila-vip-vjs":"video-js brila-video-js",this.currentAsset&&this.currentAsset.videoTitle&&this.videoElement.setAttribute("aria-label",this.currentAsset.videoTitle),this.videoElement.setAttribute("playsinline","true"),this.videoElement.setAttribute("disablepictureinpicture","true"),a.shouldDisableControls||a.isChromelessPlayer||this.videoElement.setAttribute("controls","true"),a.shouldAutoplay&&this.videoElement.setAttribute("autoplay","true"),(a.shouldStartMuted||a.isChromelessPlayer)&&
this.videoElement.setAttribute("muted","true"),a.shouldPreload||this.videoElement.setAttribute("preload","none"),k.appendChild(this.videoElement));d=this.getDefaultLanguageForPlayer();var g={player:{playsinline:!0,autoplay:a.shouldAutoplay,loop:a.shouldLoop,muted:a.shouldStartMuted||a.isChromelessPlayer,preload:a.shouldPreload?"auto":"none",techOrder:["html5"],textTrackSettings:!1,html5:{hls:{overrideNative:b.overrideNativePlayer()},nativeAudioTracks:!1,nativeVideoTracks:!1,nativeTextTracks:!1},controlBar:{pictureInPictureToggle:!1},
language:d},hotkeys:{skipInitialFocus:a.skipInitialFocus,enableInactiveFocus:a.enableInactiveFocus}};a.closedCaptionsConfig&&(g.languages=(h={},h[d]=la({"captions off":a.closedCaptionsConfig.captionsOffText,"subtitles off":a.closedCaptionsConfig.captionsOffText},a.closedCaptionsConfig.languageToLabelTexts),h));a.isChromelessPlayer&&(g.player.children=["MediaLoader"],g.player.controls=!1);a.isVideoImmersivePlayer&&(g.player.bigPlayButton=!1,g.player.posterImage=a.posterSource,g.player.controlBar={playToggle:!1,
volumePanel:!1,currentTimeDisplay:!0,remainingTimeDisplay:!0,fullscreenToggle:!1});this.videoJS=h=b.embed(c,a,g);document.getElementById(c).setAttribute("style","width:100%; height:100%;");!1!==a.showPosterImage&&this.videoJS.poster(a.posterSource);a.shouldPreload&&this.videoJS.src({src:a.videoUrl,type:a.mimeType});this.vseMetrics=b.metrics(this.videoJS);this.vseMetrics.updateMuteMetrics(this.eventEmitter);a.isVideoImmersivePlayer?(this.videoJS.on("click",function(){f.eventEmitter.emit("playerClick")}),
this.videoJS.on("touchstart",function(){f.eventEmitter.emit("playerClick")})):this.videoJS.aspectRatio("16:9");this.videoJS.on("ended",function(){f.eventHandlers.onPlaybackComplete()});this.videoJS.on("playing",function(){f.eventHandlers.onPlaybackStart();f.config.useAutoplayFallback&&(f.eventEmitter.emit("autoplaySucceeded"),f.config.useAutoplayFallback=!1)});this.videoJS.on("cancelContinuousPlay",function(){f.eventHandlers.onCancelContinuousPlay()});this.videoJS.on("playUpNext",function(){f.eventHandlers.onPlayUpNext()});
var G=this;h.ready(function(){G.eventEmitter.emit("playerLoaded");k&&k.children[0]&&(k.children[0].removeAttribute("role"),k.children[0].removeAttribute("aria-label"))});if(a.feedbackFactory!==r||a.includeEarnsComissionDisclosure)this.basicComponents=new ka(a,this),this.basicComponents.initialize(this.currentAsset);var h}d.prototype.play=function(b){var a=this;this.vseMetrics.setPlayCommandInvokeTimestamp(Date.now());if(this.isDPXDesktopFullScreenRequest(b))this.vseMetrics.setPageLoadStartTimestamp(Date.now()),
this.videoJS.play();else if(this.setInitialData(b),this.config.useAutoplayFallback)b=this.videoJS.play(),b!==r&&b.then(function(a){}).catch(function(c){a.eventEmitter.emit("autoplayFailed")});else return this.videoJS.play()};d.prototype.setInitialData=function(b){var a=this.getTextTrackMode("en");b&&b.rankingStrategy&&1===Object.keys(b).length?this.vseMetrics.setRankingStrategy(b.rankingStrategy):!b||1===Object.keys(b).length&&"rankingStrategy"in b||(this.currentAsset&&b.contentId===this.currentAsset.contentId?
this.config.shouldPreload||this.videoJS.src({src:b.videoUrl,type:b.mimeType}):(this.videoJS.poster(b.imageUrl),this.videoJS.posterImage.show(),this.vseMetrics.setContentId&&this.vseMetrics.setContentId(b.contentId),this.vseMetrics.setAciContentId(b.aciContentId),this.vseMetrics.setRefTag&&this.vseMetrics.setRefTag(b.refTag?b.refTag:""),this.vseMetrics.setOspAttribution&&this.vseMetrics.setOspAttribution({vendorTrackingId:b.vendorTrackingId?b.vendorTrackingId:"",videoReferenceId:b.videoReferenceId?
b.videoReferenceId:"",productAsin:b.productAsin?b.productAsin:""}),this.videoJS.src({src:b.videoUrl,type:b.mimeType}),this.currentAsset=b),this.setSeekTimeForInitialData(b),this.vseMetrics.setRankingStrategy(b.rankingStrategy),this.vseMetrics.setCreatorType&&this.vseMetrics.setCreatorType(b.creatorType),this.basicComponents!==r&&this.basicComponents.update(b),b.title&&this.videoElement.setAttribute("aria-label",b.title));this.removeCurrentTextTracks();var c=[];this.currentAsset&&this.currentAsset.closedCaptions&&
(c=this.currentAsset.closedCaptions);b&&b.closedCaptions&&(c=b.closedCaptions);this.updateTextTrack(c);this.vseMetrics.updateTextTrackMetrics(this.eventEmitter);"showing"===a&&this.enableCurrentTextTrack();b=b&&b.eventTimestamp?b.eventTimestamp:Date.now();this.vseMetrics.setPageLoadStartTimestamp(b)};d.prototype.setSeekTimeForInitialData=function(b){b&&b.seekTime&&this.videoJS.currentTime(b.seekTime);return this};d.prototype.showPoster=function(b){this.videoJS.poster(b);this.videoJS.posterImage.show();
return this};d.prototype.updateTextTrack=function(b){var a=this,c=this.videoJS.textTracks();b.forEach(function(b){var d=!1;if(c)for(var p=0;p<c.length;p++){var f=c[p];"subtitles"===f.kind&&f.language===b.locale&&(d=!0)}d||a.videoJS.addRemoteTextTrack({src:b.url,kind:"subtitles",srclang:b.locale,label:a.config.closedCaptionsConfig.captionsOnTexts[b.locale],"default":!1},!1)});var d;try{h.localStorage.setItem("foo","bar"),h.localStorage.removeItem("foo"),d=!0}catch(f){d=!1}if(d){b=localStorage.getItem(this.VSE_CC_KEY);
var w=this.videoJS.remoteTextTracks();if(null===b)localStorage.setItem(this.VSE_CC_KEY,"disabled");else if("disabled"!==b){if(c)for(b=0;b<c.length;++b)if("subtitles"===c[b].kind){c[b].mode="showing";this.eventEmitter.emit("texttrackenable",c[b]);break}if(w)for(b=0;b<w.length;++b)if("subtitles"===w[b].kind){w[b].mode="showing";this.eventEmitter.emit("texttrackenable",w[b]);break}}if(w)for(d=function(c){var b=w[c];b.on("modechange",function(){"showing"===b.mode?localStorage.setItem(a.VSE_CC_KEY,"showing"):
localStorage.setItem(a.VSE_CC_KEY,"disabled")})},b=0;b<w.length;++b)d(b);if(c)for(d=function(b){var d=c[b];d.on("modechange",function(){"showing"===d.mode?localStorage.setItem(a.VSE_CC_KEY,"showing"):localStorage.setItem(a.VSE_CC_KEY,"disabled")})},b=0;b<c.length;++b)d(b)}return this};d.prototype.enableCurrentTextTrack=function(b){void 0===b&&(b="en");this.changeTextTrackMode(b,"showing");return this};d.prototype.disableCurrentTextTrack=function(b){void 0===b&&(b="en");this.changeTextTrackMode(b,
"disabled");return this};d.prototype.muted=function(b){return this.videoJS.muted(b)};d.prototype.mute=function(){this.videoJS.muted(!0);return this};d.prototype.unmute=function(){this.videoJS.muted(!1);return this};d.prototype.isMuted=function(){return this.videoJS.muted()};d.prototype.getCurrentTime=function(){return this.videoJS.currentTime()};d.prototype.setCurrentTime=function(b){this.videoJS.currentTime(b);return this};d.prototype.getMediaDuration=function(){return isNaN(this.videoJS.duration())?
0:this.videoJS.duration()};d.prototype.pause=function(b){this.videoJS.pause(b);return this};d.prototype.resume=function(b){this.videoJS.play();return this};d.prototype.seek=function(b){this.videoJS.currentTime(b);return this};d.prototype.stop=function(){this.videoJS.pause();this.currentAsset=r;return this};d.prototype.on=function(b,a){this.eventEmitter.on(b,a);this.videoJS.on(b,a);return this};d.prototype.off=function(b,a){return this};d.prototype.ready=function(b){this.videoJS.ready(b);return this};
d.prototype.readyState=function(){return this.videoJS.readyState()};d.prototype.load=function(){this.videoJS.load();return this};d.prototype.getCurrent=function(){return this.currentAsset};d.prototype.getPosition=function(){return this.videoJS.currentTime()};d.prototype.isPlaying=function(){return!this.videoJS.paused()};d.prototype.isPaused=function(){return this.videoJS.paused()};d.prototype.getVersion=function(){return"VJS"};d.prototype.destroy=function(){this.vseMetrics.publishBeforeDispose();
this.videoJS.off("ended",this.eventHandlers.onPlaybackComplete);this.videoJS.dispose();this.videoJS=null;this.basicComponents!==r&&this.basicComponents.destroy()};d.prototype.addChild=function(b,a){this.videoJS.addChild(b,a);return this};d.prototype.removeChild=function(b){this.videoJS.removeChild(b);return this};d.prototype.loadNextVideoPoster=function(b){this.videoJS.poster(b);this.videoJS.posterImage.show();return this};d.prototype.aspectRatio=function(b){this.videoJS.aspectRatio(b);return this};
d.prototype.requestFullscreen=function(){this.videoJS.requestFullscreen();return this};d.prototype.exitFullscreen=function(){this.videoJS.exitFullscreen();return this};d.prototype.isFullscreen=function(){return this.videoJS.isFullscreen()};d.prototype.fluid=function(b){this.videoJS.fluid(b);return this};d.prototype.blur=function(){this.videoJS.blur();return this};d.prototype.isCaptionOn=function(){var b=!1,a=this.videoJS.remoteTextTracks();if(a)for(var c=0;c<a.length;++c)if("showing"===a[c].mode){b=
!0;break}if(a=this.videoJS.textTracks())for(c=0;c<a.length;++c)if("showing"===a[c].mode){b=!0;break}return b};d.prototype.isAutoplayed=function(){return this.videoJS.options()&&this.videoJS.options().autoplay?this.videoJS.options().autoplay:!1};d.prototype.getTitleSessionId=function(){return this.vseMetrics.getTitleSessionId()};d.prototype.requestPictureInPicture=function(){this.videoJS.requestPictureInPicture();return this};d.prototype.exitPictureInPicture=function(){this.videoJS.exitPictureInPicture();
return this};d.prototype.setPlayerMode=function(b){this.vseMetrics.updatePlacementContext(b);return this};d.prototype.initHandlers=function(){var b=this;this.eventHandlers={onPlaybackComplete:function(){return b.player_onPlaybackComplete()},onPlaybackStart:function(){return b.player_onPlaybackStart()},onCancelContinuousPlay:function(){return b.player_onCancelContinuousPlay()},onPlayUpNext:function(){return b.player_onPlayUpNext()}}};d.prototype.player_onPlaybackComplete=function(){var b=this.currentAsset;
if(this.previousAsset=this.currentAsset)this.previousAsset.eventTimestamp=Date.now();this.eventEmitter.emit("playbackComplete",b)};d.prototype.player_onCancelContinuousPlay=function(){this.currentAsset=this.previousAsset;this.eventEmitter.emit("cancelContinuousPlay",this.previousAsset)};d.prototype.player_onPlayUpNext=function(){this.eventEmitter.emit("playUpNext",this.previousAsset)};d.prototype.player_onPlaybackStart=function(){this.currentAsset&&(this.currentAsset.eventTimestamp=Date.now());this.eventEmitter.emit("playbackStart",
this.currentAsset)};d.prototype.isDPXDesktopFullScreenRequest=function(b){return this.config.sushiMetricsConfig&&this.config.sushiMetricsConfig.placementContext&&-1!==this.config.sushiMetricsConfig.placementContext.indexOf("desktop_web.ImageBlock")&&b&&!b.hasOwnProperty("refTag")&&this.currentAsset&&b.contentId!==this.currentAsset.contentId};d.prototype.changeTextTrackMode=function(b,a){var c=this.videoJS.remoteTextTracks();if(c)for(var d=0;d<c.length;d++){var f=c[d];"subtitles"===f.kind&&f.language===
b&&(f.mode=a)}if(c=this.videoJS.textTracks())for(d=0;d<c.length;d++)f=c[d],"subtitles"===f.kind&&f.language===b&&(f.mode=a)};d.prototype.getTextTrackMode=function(b){var a=this.videoJS.remoteTextTracks();if(a)for(var c=0;c<a.length;c++){var d=a[c];if("subtitles"===d.kind&&d.language===b)return d.mode}if(a=this.videoJS.textTracks())for(c=0;c<a.length;c++)if(d=a[c],"subtitles"===d.kind&&d.language===b)return d.mode;return"disabled"};d.prototype.removeCurrentTextTracks=function(){var b=this.videoJS.remoteTextTracks();
if(b)for(var a=0;a<b.length;a++)this.videoJS.removeRemoteTextTrack(b[a])};d.prototype.getDefaultLanguageForPlayer=function(){return this.config.languageCode?this.config.languageCode.toString():"en"};return d}(),T=function(){function d(b,a){var c=this;this.libs=a;this.commands=[];b.then(function(a){c.playerInstance=a;c.executeCommands()})}d.prototype.executeCommands=function(){for(var b=0;b<this.commands.length;b++)if(this.playerInstance)this.commands[b](this.playerInstance)};d.prototype.play=function(b){var a=
this;this.playerInstance?this._play(b,this.playerInstance):this.commands.push(function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a._play(b,c[0])});return this};d.prototype.mute=function(){var b=this;this.playerInstance?this._mute(this.playerInstance):this.commands.push(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return b._mute(a[0])});return this};d.prototype.unmute=function(){var b=this;this.playerInstance?this._unmute(this.playerInstance):this.commands.push(function(){for(var a=
[],c=0;c<arguments.length;c++)a[c]=arguments[c];return b._unmute(a[0])});return this};d.prototype.isMuted=function(){var b=this;if(this.playerInstance)return this._isMuted(this.playerInstance);this.commands.push(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return b._isMuted(a[0])});return!0};d.prototype.getCurrentTime=function(){var b=this;if(this.playerInstance)return this._getCurrentTime(this.playerInstance);this.commands.push(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=
arguments[c];return b._getCurrentTime(a[0])});return 0};d.prototype.setCurrentTime=function(b){var a=this;this.playerInstance?this._setCurrentTime(b,this.playerInstance):this.commands.push(function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a._setCurrentTime(b,c[0])})};d.prototype.getMediaDuration=function(){var b=this;if(this.playerInstance)return this._getMediaDuration(this.playerInstance);this.commands.push(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];
return b._getMediaDuration(a[0])});return 0};d.prototype.pause=function(b){var a=this;this.playerInstance?this._pause(b,this.playerInstance):this.commands.push(function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a._pause(b,c[0])});return this};d.prototype.resume=function(b){var a=this;this.playerInstance?this._resume(b,this.playerInstance):this.commands.push(function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a._resume(b,c[0])});return this};d.prototype.stop=
function(){var b=this;this.playerInstance?this._stop(this.playerInstance):this.commands.push(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return b._stop(a[0])});return this};d.prototype.seek=function(b){var a=this;this.playerInstance?this._seek(b,this.playerInstance):this.commands.push(function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a._seek(b,c[0])});return this};d.prototype.on=function(b,a){var c=this;this.playerInstance?this._on(b,a,this.playerInstance):
this.commands.push(function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];return c._on(b,a,d[0])});return this};d.prototype.off=function(b,a){var c=this;this.playerInstance?this._off(b,a,this.playerInstance):this.commands.push(function(){for(var d=[],f=0;f<arguments.length;f++)d[f]=arguments[f];return c._off(b,a,d[0])});return this};d.prototype.ready=function(b){var a=this;this.playerInstance?this._ready(b,this.playerInstance):this.commands.push(function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=
arguments[d];return a._ready(b,c[0])});return this};d.prototype.load=function(){var b=this;this.playerInstance?this._load(this.playerInstance):this.commands.push(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return b._load(a[0])});return this};d.prototype.readyState=function(){return this.playerInstance?this.playerInstance.readyState():0};d.prototype.aspectRatio=function(b){var a=this;this.playerInstance?this._aspectRatio(b,this.playerInstance):this.commands.push(function(){for(var c=
[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a._aspectRatio(b,c[0])});return this};d.prototype.getCurrent=function(){if(this.playerInstance)return this.playerInstance.getCurrent()};d.prototype.getPosition=function(){return this.playerInstance?this.playerInstance.getPosition():0};d.prototype.isPlaying=function(){return this.playerInstance?this.playerInstance.isPlaying():!1};d.prototype.isPaused=function(){return this.playerInstance?this.playerInstance.isPaused():!1};d.prototype.getVersion=
function(){return this.playerInstance?this.playerInstance.getVersion():""};d.prototype.destroy=function(){var b=this;this.playerInstance?this._destroy(this.playerInstance):this.commands.push(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return b._destroy(a[0])})};d.prototype.addChild=function(b,a){this.playerInstance&&this.playerInstance.addChild(b,a);return this};d.prototype.removeChild=function(b){this.playerInstance&&this.playerInstance.removeChild(b);return this};d.prototype.loadNextVideoPoster=
function(b){this.playerInstance&&this.playerInstance.loadNextVideoPoster(b);return this};d.prototype.setInitialData=function(b){this.playerInstance&&this.playerInstance.setInitialData(b);return this};d.prototype.updateTextTrack=function(b){this.playerInstance&&this.playerInstance.updateTextTrack(b);return this};d.prototype.removeCurrentTextTracks=function(){this.playerInstance&&this.playerInstance.removeCurrentTextTracks();return this};d.prototype.showPoster=function(b){this.playerInstance&&this.playerInstance.showPoster(b);
return this};d.prototype.blur=function(){this.playerInstance&&this.playerInstance.blur();return this};d.prototype.requestFullscreen=function(){var b=this;this.playerInstance?this._requestFullscreen(this.playerInstance):this.commands.push(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return b._requestFullscreen(a[0])});return this};d.prototype.exitFullscreen=function(){this.playerInstance&&this.playerInstance.exitFullscreen();return this};d.prototype.isFullscreen=function(){return this.playerInstance?
this.playerInstance.isFullscreen():!1};d.prototype.fluid=function(b){this.playerInstance&&this.playerInstance.fluid(b);return this};d.prototype.enableCurrentTextTrack=function(b){void 0===b&&(b="en");this.playerInstance&&this.playerInstance.enableCurrentTextTrack(b)};d.prototype.disableCurrentTextTrack=function(b){void 0===b&&(b="en");this.playerInstance&&this.playerInstance.disableCurrentTextTrack(b)};d.prototype.isCaptionOn=function(){return this.playerInstance?this.playerInstance.isCaptionOn():
!1};d.prototype.isAutoplayed=function(){return this.playerInstance?this.playerInstance.isAutoplayed():!1};d.prototype.getTitleSessionId=function(){return this.playerInstance?this.playerInstance.getTitleSessionId():""};d.prototype.requestPictureInPicture=function(){var b=this;this.playerInstance?this._requestPictureInPicture(this.playerInstance):this.commands.push(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];b._requestPictureInPicture(a[0])});return this};d.prototype.exitPictureInPicture=
function(){var b=this;this.playerInstance?this._exitPictureInPicture(this.playerInstance):this.commands.push(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];b._exitPictureInPicture(a[0])});return this};d.prototype.setPlayerMode=function(b){var a=this;this.playerInstance?this._setPlayerMode(b,this.playerInstance):this.commands.push(function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a._setPlayerMode(b,c[0])});return this};d.prototype._setPlayerMode=function(b,
a){a.setPlayerMode(b)};d.prototype._play=function(b,a){b?a.play(b):a.play()};d.prototype._mute=function(b){b.mute()};d.prototype._unmute=function(b){b.unmute()};d.prototype._isMuted=function(b){return b.isMuted()};d.prototype._getCurrentTime=function(b){return b.getCurrentTime()};d.prototype._setCurrentTime=function(b,a){a.setCurrentTime(b)};d.prototype._getMediaDuration=function(b){return b.getMediaDuration()};d.prototype._pause=function(b,a){a.pause(b)};d.prototype._stop=function(b){b.stop()};d.prototype._requestFullscreen=
function(b){b.requestFullscreen()};d.prototype._resume=function(b,a){a.resume(b)};d.prototype._seek=function(b,a){a.seek(b)};d.prototype._on=function(b,a,c){c.on(b,a)};d.prototype._off=function(b,a,c){c.off(b,a)};d.prototype._ready=function(b,a){a.ready(b)};d.prototype._load=function(b){b.load()};d.prototype._destroy=function(b){b.destroy();this.playerInstance=null};d.prototype._aspectRatio=function(b,a){a.aspectRatio(b)};d.prototype._requestPictureInPicture=function(b){b.requestPictureInPicture()};
d.prototype._exitPictureInPicture=function(b){b.exitPictureInPicture()};return d}(),ma=function(){function d(){}d.prototype.create=function(b,a,c){c=c?c:b.initialVideo;a={contentId:""+c.contentId,customerId:b.customerId,isForesterTrackingDisabled:b.sushiMetricsConfig.isRobot,foresterMetadataParams:{client:b.requestMetadata.clientId,marketplaceId:b.requestMetadata.marketplaceId,method:b.requestMetadata.method,requestId:b.requestMetadata.requestId,session:b.requestMetadata.sessionId},videoUrl:c.videoUrl,
posterSource:c.imageUrl,pageAsin:b.requestMetadata.pageAsin,parentId:a,vendorCode:c.vendorCode,videoTitle:c.videoTitle,shouldStartMuted:b.shouldStartMuted||!1,shouldAutoplay:b.shouldAutoplay||!1,shouldPreload:"undefined"===typeof b.shouldPreload?!0:b.shouldPreload,shouldOverrideBackground:b.shouldOverrideBackground||!1,useAutoplayFallback:b.useAutoplayFallback,shouldDisableControls:b.shouldDisableControls||!1,useCarousel:b.useCarousel,useBuyBox:b.useBuyBox,languagePreferenceStrings:b.languagePreferenceStrings,
metricsEmissionMethod:b.metricsEmissionMethod,enableClickBasedAttribution:b.enableClickBasedAttribution,sushiMetricsConfig:{eventSource:b.sushiMetricsConfig.eventSource,endpoint:b.sushiMetricsConfig.endpoint,requestId:b.sushiMetricsConfig.requestId,sessionId:b.sushiMetricsConfig.sessionId,customerId:b.sushiMetricsConfig.customerId,refMarkers:b.sushiMetricsConfig.refMarkers,sessionType:b.sushiMetricsConfig.sessionType,placementContext:b.sushiMetricsConfig.placementContext,marketplaceId:b.sushiMetricsConfig.marketplaceId,
weblabIds:b.sushiMetricsConfig.weblabIds,pageAsin:b.sushiMetricsConfig.pageAsin,isInternal:b.sushiMetricsConfig.isInternal,isRobot:b.sushiMetricsConfig.isRobot,clientId:b.sushiMetricsConfig.clientId,creativeId:b.sushiMetricsConfig.creativeId||""},refTag:b.refTag,ospData:{vendorTrackingId:c.vendorTrackingId,videoReferenceId:c.videoReferenceId,productAsin:c.productAsin},useUpNextComponent:b.useUpNextComponent,isVideoImmersivePlayer:b.isVideoImmersivePlayer,ospLinkCode:b.ospLinkCode,clientPrefix:b.clientPrefix,
languageCode:b.languageCode,isChromelessPlayer:b.isChromelessPlayer,enableDelphiAttribution:b.enableDelphiAttribution,aciContentId:c.aciContentId,mimeType:c.mimeType,isReactFactory:b.isReactFactory,version:b.version,shouldLoop:b.shouldLoop||!1,skipInitialFocus:b.skipInitialFocus||!1,enableInactiveFocus:!1!==b.enableInactiveFocus,closedCaptionsConfig:b.closedCaptionsConfig,alwaysSetInitialVideo:b.alwaysSetInitialVideo,showPosterImage:b.showPosterImage};b.eventTimestamp&&(a.eventTimestamp=b.eventTimestamp);
b.nexusMetricsConfig&&(a.nexusMetricsConfig={eventSource:b.nexusMetricsConfig.eventSource,isInternal:b.nexusMetricsConfig.isInternal,playerTSMMetricsSchemaId:b.nexusMetricsConfig.playerTSMMetricsSchemaId,widgetMetricsSchemaId:b.nexusMetricsConfig.widgetMetricsSchemaId,producerId:b.nexusMetricsConfig.producerId,refMarkers:b.nexusMetricsConfig.refMarkers,placementContext:b.nexusMetricsConfig.placementContext,weblabIds:b.nexusMetricsConfig.weblabIds,pageAsin:b.nexusMetricsConfig.pageAsin,clientId:b.nexusMetricsConfig.clientId,
creativeId:b.nexusMetricsConfig.creativeId,videoAsin:b.nexusMetricsConfig.videoAsin,videoAsinList:b.nexusMetricsConfig.videoAsinList});b.clickstreamNexusMetricsConfig&&(a.clickstreamNexusMetricsConfig={actionType:b.clickstreamNexusMetricsConfig.actionType,eventOwner:b.clickstreamNexusMetricsConfig.eventOwner,eventType:b.clickstreamNexusMetricsConfig.eventType,productId:b.clickstreamNexusMetricsConfig.productId,producerId:b.clickstreamNexusMetricsConfig.producerId,schemaId:b.clickstreamNexusMetricsConfig.schemaId});
b.feedbackFactory&&(a.feedbackFactory=b.feedbackFactory,a.reportPageStateName=b.reportPageStateName);b.includeEarnsComissionDisclosure&&(a.includeEarnsComissionDisclosure=b.includeEarnsComissionDisclosure);return a};return d}(),U=function(){function d(b){this.deps=b}d.prototype.create=function(b){var a=this,c=I(),d=new this.deps.promise(function(a,b){h[c]={resolve:a,reject:b}});t.when("brila").execute("construct-player",function(a){h[c].resolve(a)});var f=document.getElementById(b.containerId),k=
b.containerId+"-container";f.innerHTML='\x3cdiv id\x3d"'+k+'" style\x3d"width:100%; height:100%"\x3e\x3c/div\x3e';f=(new this.deps.promise(function(c,f){d.then(function(d){var e=new S(d,(new ma).create(b,k),b.initialVideo,a.deps);e.on("playerLoaded",function(){c(e)})})})).then(function(a){return a});return new R(new T(f,this.deps),document.getElementById(k),this.deps)};return d}(),K=function(d,b){return b={exports:{}},d(b,b.exports),b.exports}(function(d){function b(){}function a(a,c,b){this.fn=a;
this.context=c;this.once=b||!1}function c(){this._events=new b;this._eventsCount=0}var p=Object.prototype.hasOwnProperty,f="~";Object.create&&(b.prototype=Object.create(null),(new b).__proto__||(f=!1));c.prototype.eventNames=function(){var a=[],c,b;if(0===this._eventsCount)return a;for(b in c=this._events)p.call(c,b)&&a.push(f?b.slice(1):b);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(c)):a};c.prototype.listeners=function(a,c){a=this._events[f?f+a:a];if(c)return!!a;if(!a)return[];
if(a.fn)return[a.fn];c=0;for(var b=a.length,d=Array(b);c<b;c++)d[c]=a[c].fn;return d};c.prototype.emit=function(a,c,b,d,e,p){var q=f?f+a:a;if(!this._events[q])return!1;var q=this._events[q],x=arguments.length,h,l;if(q.fn){q.once&&this.removeListener(a,q.fn,r,!0);switch(x){case 1:return q.fn.call(q.context),!0;case 2:return q.fn.call(q.context,c),!0;case 3:return q.fn.call(q.context,c,b),!0;case 4:return q.fn.call(q.context,c,b,d),!0;case 5:return q.fn.call(q.context,c,b,d,e),!0;case 6:return q.fn.call(q.context,
c,b,d,e,p),!0}l=1;for(h=Array(x-1);l<x;l++)h[l-1]=arguments[l];q.fn.apply(q.context,h)}else{var m=q.length,n;for(l=0;l<m;l++)switch(q[l].once&&this.removeListener(a,q[l].fn,r,!0),x){case 1:q[l].fn.call(q[l].context);break;case 2:q[l].fn.call(q[l].context,c);break;case 3:q[l].fn.call(q[l].context,c,b);break;case 4:q[l].fn.call(q[l].context,c,b,d);break;default:if(!h)for(n=1,h=Array(x-1);n<x;n++)h[n-1]=arguments[n];q[l].fn.apply(q[l].context,h)}}return!0};c.prototype.on=function(c,b,d){b=new a(b,d||
this);c=f?f+c:c;this._events[c]?this._events[c].fn?this._events[c]=[this._events[c],b]:this._events[c].push(b):(this._events[c]=b,this._eventsCount++);return this};c.prototype.once=function(c,b,d){b=new a(b,d||this,!0);c=f?f+c:c;this._events[c]?this._events[c].fn?this._events[c]=[this._events[c],b]:this._events[c].push(b):(this._events[c]=b,this._eventsCount++);return this};c.prototype.removeListener=function(a,c,d,p){a=f?f+a:a;if(!this._events[a])return this;if(!c)return 0===--this._eventsCount?
this._events=new b:delete this._events[a],this;var e=this._events[a];if(e.fn)e.fn!==c||p&&!e.once||d&&e.context!==d||(0===--this._eventsCount?this._events=new b:delete this._events[a]);else{for(var B=0,q=[],x=e.length;B<x;B++)(e[B].fn!==c||p&&!e[B].once||d&&e[B].context!==d)&&q.push(e[B]);q.length?this._events[a]=1===q.length?q[0]:q:0===--this._eventsCount?this._events=new b:delete this._events[a]}return this};c.prototype.removeAllListeners=function(a){a?(a=f?f+a:a,this._events[a]&&(0===--this._eventsCount?
this._events=new b:delete this._events[a])):(this._events=new b,this._eventsCount=0);return this};c.prototype.off=c.prototype.removeListener;c.prototype.addListener=c.prototype.on;c.prototype.setMaxListeners=function(){return this};c.prefixed=f;c.EventEmitter=c;"undefined"!==typeof d&&(d.exports=c)}).EventEmitter,V=r,W=r;t.when("a-sheet").execute(function(d){V=d});t.when("a-popover").execute(function(d){W=d});var X={getBottomSheet:function(){return V},getPopoverFactory:function(){return W}},na=function(){function d(b,
a){var c=this;this.config=b;this._showMoreMenuExperience=a;this.activeVideoACI=this.activeVideoSource=this.activeVideo="VIDEO_NOT_SELECTED";this.ivxReportCloseIconClass="ivx-report-close";this.ivxAmazonAppClass="ivx-amazon-app";this.reportCloseIconSelector=".a-sheet-close";this.showMoreMenuExperience=this.registered=!1;this._submitErrorCallback=function(a){c.A.trigger("vse:"+c.id+":feedback:submitted:error")};this._submitSuccessCallback=function(a){c.A.trigger("vse:"+c.id+":feedback:submitted:success")};
this.A=b.A;this.pageStateName=b.pageStateName;this.buttonApi=b.buttonApi;this.id=this.config.id;this.showMoreMenuExperience=this._showMoreMenuExperience;b=z.fetchLatestPageState(this.A,this.pageStateName);this.moreMenuSheet=this.A.$("#"+this.id+"-more-menu");this.feedbackForm=this.A.$("#"+this.id+"-form");this.thankYouSection=this.A.$("#"+this.id+"-ty-container");this.InfringementNotSupportSection=this.A.$("#"+this.id+"-infringement-container");this.submitButton=this.buttonApi("#"+this.id+"-btn-submit");
this.reportIllegalContentLinkSelector=this.A.$(".vse-fb-report-illegal-content");this.feedbackContainerSelector=this.A.$(".vse-fb-container");b&&this.validateFormElements()&&(this.isMobile=b.isMobile,this.endpoint=b.feedbackEndpoint,this.marketplaceId=b.marketplaceId,this.pageAsin=b.pageAsin,this.customerId=b.customerId,this.slateToken=b.slateToken,this.bottomSheetFactory=X.getBottomSheet(),this.popoverFactory=X.getPopoverFactory(),this.registered||(this.A.declarative(this.id+"-btn-close","click",
function(){return c.closeFeedbackForm()}),this.A.declarative(this.id+"-btn-submit","click",function(){return c.submitFeedback()}),this.showMoreMenuExperience&&this.A.declarative(this.id+"-report-btn","click",function(){return c.moreMenuToFeedbackForm()}),this.A.on("a:sheet:afterShow:"+this.id+"-sheet",function(a){c.showFeedbackForm?(c.A.trigger("vse:"+c.id+":feedback:shown"),c.updateBottomSheetHeight(),c.A.capabilities.isAmazonApp&&c.isMobile&&a.sheet.$container.addClass(c.ivxAmazonAppClass),a.sheet.$contentContainer.siblings(c.reportCloseIconSelector).addClass(c.ivxReportCloseIconClass)):
(c.showFeedbackForm(),c.updateBottomSheetHeight())}),this.A.on("a:sheet:afterHide:"+this.id+"-sheet",function(a){c.showMoreMenuExperience?(c.feedbackForm.addClass("aok-hidden").fadeIn(10),c.hideThankYou(),c.hideInfringementNotSupport(),c.resetMoreMenuSheet(),c.showMoreMenuSheet()):(c.hideThankYou(),c.hideInfringementNotSupport());c.A.capabilities.isAmazonApp&&c.isMobile&&a.sheet.$container.removeClass(c.ivxAmazonAppClass);a.sheet.$contentContainer.siblings(c.reportCloseIconSelector).removeClass(c.ivxReportCloseIconClass);
c.A.trigger("vse:"+c.id+":feedback:hidden")}),this.A.on("a:popover:afterShow:"+this.id+"-popover",function(a){c.showFeedbackForm()}),this.A.on("a:popover:afterHide:"+this.id+"-popover",function(a){c.hideFeedbackForm()}),this.registered=!0))}d.prototype.resetMoreMenuSheet=function(){this.showMoreMenuExperience&&this.updateBottomSheetHeight(1)};d.prototype.moreMenuToFeedbackForm=function(){this.moreMenuSheet.addClass("aok-hidden").fadeOut(10);this.showFeedbackForm();this.updateBottomSheetHeight();return this};
d.prototype.showMoreMenuSheet=function(){this.moreMenuSheet.removeClass("aok-hidden").fadeIn(400)};d.prototype.showFeedbackForm=function(b){this.hideThankYou();this.showMoreMenuExperience&&this.feedbackForm.removeClass("aok-hidden").fadeIn(400);this.A.trigger("vse:"+this.id+":feedback:shown");return this};d.prototype.hideFeedbackForm=function(){this.isMobile?this.getAndSetBottomSheetInstance()&&(this.bottomSheetInstance.hide(),this.resetMoreMenuSheet()):this.getAndSetPopoverInstance()&&this.popoverInstance.hide();
this.A.trigger("vse:"+this.id+":feedback:hidden");return this};d.prototype.setActiveVideoAndSource=function(b,a,c){this.activeVideo=b;this.activeVideoSource=a;this.activeVideoACI=c};d.prototype.submitFeedback=function(){var b=this.createLwisRequest();this.A.$.ajax(b);this.A.trigger("vse:"+this.id+":feedback:submitted");this.showThankYou();this.updateBottomSheetHeight(this.thankYouSection.height()+this.getFeedbackFormVerticalPadding())};d.prototype.getFeedbackFormVerticalPadding=function(){var b=parseInt(this.feedbackContainerSelector.css("padding-top"),
10),a=parseInt(this.feedbackContainerSelector.css("padding-bottom"),10);return b+a};d.prototype.createLwisPayload=function(){return{videoId:this.activeVideo,customerId:this.customerId,marketplaceId:this.marketplaceId}};d.prototype.createLwisRequest=function(){return{url:this.endpoint,data:JSON.stringify(this.createLwisPayload()),type:"POST",contentType:"application/json; charset\x3dutf-8",crossDomain:!0,headers:{Authorization:"allow","X-Amzn-Slate-Token":this.slateToken},error:this._submitErrorCallback,
success:this._submitSuccessCallback}};d.prototype.closeFeedbackForm=function(){this.hideFeedbackForm();this.A.trigger("vse:"+this.id+":feedback:closed")};d.prototype.updateReportIllegalContentLink=function(){var b=encodeURIComponent(""+h.location.origin+h.location.pathname);this.reportIllegalContentLinkSelector.attr("href",h.location.origin+"/manage-content/report/illegal?mediaAci\x3d"+this.activeVideoACI+"\x26referer\x3d"+b)};d.prototype.showInfringementNotSupport=function(){this.feedbackForm.fadeOut(200);
this.InfringementNotSupportSection.removeClass("aok-hidden").fadeIn(400);this.updateBottomSheetHeight(this.InfringementNotSupportSection.height()+this.getFeedbackFormVerticalPadding());return this};d.prototype.hideInfringementNotSupport=function(){this.feedbackForm.fadeIn(10);this.InfringementNotSupportSection.addClass("aok-hidden").fadeOut(10);return this};d.prototype.showThankYou=function(){this.feedbackForm.fadeOut(200);this.thankYouSection.removeClass("aok-hidden").fadeIn(400);this.A.trigger("vse:"+
this.id+":thank-you:shown");return this};d.prototype.hideThankYou=function(){this.feedbackForm.fadeIn(10);this.thankYouSection.addClass("aok-hidden").fadeOut(10);this.A.trigger("vse:"+this.id+":thank-you:hidden");return this};d.prototype.validateFormElements=function(){return this.thankYouSection.length&&this.submitButton.size()&&this.feedbackForm.length};d.prototype.getAndSetBottomSheetInstance=function(){return this.bottomSheetFactory?this.bottomSheetInstance?this.bottomSheetInstance:this.bottomSheetInstance=
this.bottomSheetFactory.get(this.id+"-sheet"):r};d.prototype.getAndSetPopoverInstance=function(){return this.popoverFactory?this.popoverInstance?this.popoverInstance:this.popoverInstance=this.popoverFactory.get(this.id+"-popover"):r};d.prototype.updateBottomSheetHeight=function(b){b=b||this.feedbackContainerSelector.outerHeight();this.isMobile&&this.getAndSetBottomSheetInstance()&&this.bottomSheetInstance.changeHeight({height:b,duration:.1})};return d}(),oa=function(){function d(b){this.config=b;
this.feedbackWidgets={}}d.prototype.create=function(b,a,c){void 0===c&&(c=!1);a=this.feedbackWidgets[b]||new na({id:b,pageStateName:a,A:this.config.A,buttonApi:this.config.buttonApi},c);return this.feedbackWidgets[b]=a};d.prototype.get=function(b){return this.feedbackWidgets[b]};return d}(),m=function(){function d(){}d.POSITIVE_VOTE="positive";d.NEGATIVE_VOTE="negative";d.NONE_VOTE="none";d.VOTE_STATUS="status";d.EMPTY_STRING="";d.DEFAULT_MIN_GUTTER=24;d.DEFAULT_HEIGHT_ANIMATION_SPEED=200;d.CAROUSEL_PREV_BUTTON_CLASS=
".a-carousel-goto-prevpage";d.CAROUSEL_NEXT_BUTTON_CLASS=".a-carousel-goto-nextpage";d.VSE_CAROUSEL_PAGINATION_DEACTIVATE_CLASSHIDDEN_CLASS="aok-hidden";d.VSE_CAROUSEL_PAGINATION_DEACTIVATE_CLASS="vse-carousel-goto-deactive-btn";d.ANIMATION_SPEED_400=400;d.ANIMATION_SPEED_100=100;d.BOUNCE_CAROUSEL_FACTOR=30;d.BOUNCE_SCROLL_BAR_FACTOR=6;d.SWING="swing";d.FIRST_PAGE="first-page";d.LAST_PAGE="last-page";d.$GROUP_1=".segment-title-G1";d.$GROUP_2=".segment-title-G2";d.$GROUP_3=".segment-title-G3";d.$GROUP_EXPVERNAC=
".segment-title-EXPVERNAC";d.NO_GUTTER=0;d.TOLERANT=-.5;d.CURRENT_GUTTER="currentGutter";d.NUMBER_OF_CARDS_TO_LOAD_ADDITIONALLY=1;d.VIP_CAROUSEL_CSS_CLASS="vse-vip-lb-carousel";return d}(),L=function(){function d(b,a){this.element=b;this.videoVoteConfig=a;this.countsFetched=!1;this.positiveVoteCount=0;this.showPositiveVotes=!1;this.negativeVoteCount=0;this.showNegativeVotes=!1;this.prompt=b.find(".vse-vote-helpful-text");this.positiveVoteText=b.find(".vse-vote-positive");this.positiveVoteIcon=b.find(".vse-vote-positive-icon");
this.negativeVoteText=b.find(".vse-vote-negative");this.negativeVoteIcon=b.find(".vse-vote-negative-icon");this.previousVote=m.EMPTY_STRING}d.prototype.getVoteCount=function(b){return b===m.POSITIVE_VOTE?this.positiveVoteCount:b===m.NEGATIVE_VOTE?this.negativeVoteCount:0};d.prototype.setVoteCount=function(b,a){0>a&&(a=0);b===m.POSITIVE_VOTE?(this.positiveVoteCount=a,this.positiveVoteText.html(String(a))):b===m.NEGATIVE_VOTE&&(this.negativeVoteCount=a,this.negativeVoteText.html(String(a)));this.element.addClass("updated")};
d.prototype.getPreviousVote=function(){return this.previousVote};d.prototype.setPreviousVote=function(b){if(b===m.POSITIVE_VOTE)this.positiveVoteIcon.addClass("hasvoted"),this.negativeVoteIcon.removeClass("hasvoted"),0>=this.getVoteCount(m.POSITIVE_VOTE)&&this.setVoteCount(m.POSITIVE_VOTE,1);else if(b===m.NEGATIVE_VOTE)this.negativeVoteIcon.addClass("hasvoted"),this.positiveVoteIcon.removeClass("hasvoted"),0>=this.getVoteCount(m.NEGATIVE_VOTE)&&this.setVoteCount(m.NEGATIVE_VOTE,1);else if(b===m.NONE_VOTE)this.negativeVoteIcon.removeClass("hasvoted"),
this.positiveVoteIcon.removeClass("hasvoted");else return;this.previousVote=b};d.prototype.setContentId=function(b){this.contentId=b};d.prototype.getContentId=function(){return this.contentId};d.prototype.showOrHide=function(b,a,c,d){this.showPositiveVotes=b;this.showNegativeVotes=a;this.showPrompt=c;b?(this.positiveVoteText.addClass("vse-show"),this.positiveVoteIcon.addClass("vse-show")):(this.positiveVoteText.removeClass("vse-show"),this.positiveVoteIcon.removeClass("vse-show"));a?(this.negativeVoteText.addClass("vse-show"),
this.negativeVoteIcon.addClass("vse-show")):(this.negativeVoteText.removeClass("vse-show"),this.negativeVoteIcon.removeClass("vse-show"));c?this.prompt.addClass("vse-show"):this.prompt.removeClass("vse-show");d?this.element.addClass("vse-show"):this.element.removeClass("vse-show")};d.prototype.updateWithNewVote=function(b){if(b===m.POSITIVE_VOTE||b===m.NEGATIVE_VOTE){var a=b==m.POSITIVE_VOTE?m.NEGATIVE_VOTE:m.POSITIVE_VOTE,c=this.getVoteCount(b),d=this.getVoteCount(a);b===this.getPreviousVote()?(this.setPreviousVote(m.NONE_VOTE),
this.setVoteCount(b,c-1)):this.getPreviousVote()!==m.EMPTY_STRING&&this.getPreviousVote()!==m.NONE_VOTE?(this.setVoteCount(a,d-1),this.setVoteCount(b,c+1),this.setPreviousVote(b)):(this.setPreviousVote(b),this.setVoteCount(b,c+1))}};return d}(),pa=function(){return function(d,b,a){this.contentId=d;this.positiveVoteCount=b;this.negativeVoteCount=a}}(),qa=function(){return function(d,b,a){this.contentId=d;this.positiveVoteCount=b;this.voteStatus=a}}(),M=function(){function d(b,a){this.A=b;this.videoVoteConfig=
a}d.prototype.createFromContent=function(b,a){b=this.A.$("#"+b).find('[.vse-video-votes][data-contentid\x3d"'+a+'"]');return new L(b,this.videoVoteConfig)};d.prototype.createFromSelector=function(b){var a=this.A.$(""+b);if(!a)throw new H("VideoVoteContainerFactory can not find selector by the name of "+b+".");return new L(a,this.videoVoteConfig)};d.prototype.sendVoteToRemote=function(b,a,c){var d=this,f=this.getBasicPayload(this.videoVoteConfig),k=this.A.$.extend(f,{contentId:c,positive:b,negative:a});
return new this.videoVoteConfig.dependencies.promise(function(a,c){ga.sendRequest(d.A,"/vap/ew/subcomponent/votes/writing",k,function(c,b,d){null!==d.http.responseURL&&d.http.responseURL!==r&&d.http.responseURL.includes("signin")&&(b=d.http.responseURL,d=encodeURIComponent(h.location.href),b=b.replace(/return_to=.*?&/,"return_to\x3d"+d+"\x26"),h.location.href=b);a(c)},function(a){l.count("vse:votecast:failed",1);c(a)})})};d.prototype.fetchVoteCountAndStatus=function(b){var a=this,c=this.getVoteCountAndStatusBasicPayload(this.videoVoteConfig),
d=this.A.$.extend(c,{contentId:b});return new this.videoVoteConfig.dependencies.promise(function(c,b){F.sendRequest(a.A,"/vap/ew/subcomponent/votes/countandstatus",d,function(d){d=a.convertPayloadToVoteCountAndStatusData(d);null!=d&&c(d);b(d)},function(a){l.count("vse:votegetcountsandstatus:failed",1);b(a)})})};d.prototype.fetchVoteHistory=function(b){var a=this,c=this.getBasicPayload(this.videoVoteConfig),d=this.A.$.extend(c,{contentId:b});return new this.videoVoteConfig.dependencies.promise(function(c,
b){F.sendRequest(a.A,"/vap/ew/subcomponent/votes/status",d,function(a){c(a)},function(a){l.count("vse:votehistory:failed",1);b(a)})})};d.prototype.convertPayloadToVoteData=function(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(new pa(c,b[c].positive,b[c].negative));return a};d.prototype.convertPayloadToVoteCountAndStatusData=function(b){var a=null;if(null===b||0===Object.keys(b).length)return null;var c=Object.keys(b)[0];b.hasOwnProperty(c)&&(a=new qa(c,b[c].positive,b[c].status));return a};
d.prototype.fetchVoteCounts=function(b){var a=this,c=this.getBasicPayload(this.videoVoteConfig),d=this.A.$.extend(c,{contentIds:b});return new this.videoVoteConfig.dependencies.promise(function(c,b){F.sendRequest(a.A,"/vap/ew/subcomponent/votes",d,function(d){d=a.convertPayloadToVoteData(d);0<d.length&&c(d);b(d)},function(a){l.count("vse:votegetcounts:failed",1);b(a)})})};d.prototype.getBasicPayload=function(b){return{placement:b.placementContext,requestId:b.requestId,sessionId:b.sessionId,page:b.page,
bypassLogin:b.forceTreatment||!1}};d.prototype.getVoteCountAndStatusBasicPayload=function(b){return{placement:b.placementContext,page:b.page}};return d}(),Y=function(){function d(b){this.config=b;this.additionalPaddingTop=0;this.$stickies=null;this.$container=this.config.A.$(this.config.stickyHeaderContainer);this.$lbContainer=this.config.A.$(this.config.stickyHeaderLBContainer);this.lbModalContainer=this.config.lbModalContainer;this.gutter=this.$container.offset().top;this.topPosition=this.$container.offset().top-
this.$lbContainer.closest(this.lbModalContainer).offset().top}d.prototype.load=function(b){if("object"===typeof b&&0<b.length){var a=this;this.$stickies=b.each(function(c){c=a.config.A.$(this).parents(".vse-follow-wrap").length?a.config.A.$(this):a.config.A.$(this).wrap('\x3cdiv class\x3d"vse-follow-wrap" /\x3e');if(!a.config.A.objectIsEmpty(a.$lbContainer.data("css-class"))){var b=-1!==a.$lbContainer.data("css-class").indexOf("vse-lb-v2");a.additionalPaddingTop=b?parseInt(c.css("padding-top")):0}c.data("originalPosition",
c.offset().top+a.$container.scrollTop()-a.gutter-a.additionalPaddingTop).data("originalHeight",c.outerHeight()).parent().height(c.outerHeight(!0))});this.$container.unbind("scroll");this.$container.bind("scroll",function(){a._whenScrolling()});this.$container.scroll()}};d.prototype._whenScrolling=function(){var b=this;this.$stickies.each(function(a){a=b.config.A.$(this);var c=a.data("originalPosition"),d=b.$container.scrollTop();c<=d?a.addClass("vse-absolute").css({top:d}):a.removeClass("vse-absolute").removeAttr("style")})};
return d}(),ra=function(){return function(d){var b=this;this.config=d;this.getTabs=function(){return b.tabs};this.updateSegmentTabForVideo=function(a){b.config.A.$(""+b.segmentTabCssClassSelectorName).removeClass("vse-tab-active vse-tab-no-border");for(var c=0;c<b.tabs.length&&a>=b.tabs[c].startIndex;++c);b.config.A.$(b.segmentTabCssClassSelectorName+".tab-"+(0<c?c-1:0)).addClass("vse-tab-active vse-tab-with-border")};this.updateSegmentTabOnClick=function(a){b.config.A.$(""+b.segmentTabCssClassSelectorName).removeClass("vse-tab-with-border").addClass("vse-tab-no-border");
b.config.A.$(b.segmentTabCssClassSelectorName+"."+a.cssClassName).addClass("vse-tab-with-border")};this.tabs=d.segmentTabs||[];this.segmentTabCssClassSelectorName=this.config.segmentTabCssClassSelectorName}}(),sa=function(){function d(b,a,c,d,f,k){var g=this;this.carouselFramework=a;this.carouselConstants=c;this.A=d;this.contentCarouselConfig=f;this.deps=k;this.vseAssets=[];this.vseAssetIndex={};this.voteContainerIndex={};this.carouselPageSize=this.carouselTotalPages=0;this.carouselPageNumber=1;this.loadImagesManually=
function(a,c){for(var b=a.getAttr(g.carouselConstants.PAGE_SIZE),d=c=(c-1)*b+1;d<c+b+m.NUMBER_OF_CARDS_TO_LOAD_ADDITIONALLY;d++){var e=g.A.$(a.dom.$container.find(".vse-video-card:nth-child("+d+")"));e.addClass("vse-img-manually-loaded");g.A.loadDescendantImagesManually(e)}};this.getplaylist=function(){return g.vseAssets.slice()};this.getActiveAsset=function(){return g.activeAsset};this.scrollTo=function(){if(g.contentCarouselConfig.hasStickyHeaders){var a=g.A.$("#"+g.contentCarouselConfig.carouselName).closest(".vse-lb-right"),
c=0;0===g.activeCard.find(".vse-vc-header.first-item").length&&(c=g.A.$(".vse-follow-wrap").first().height()-2);a&&a.animate({scrollTop:g.activeCard.offset().top-a.offset().top+a.scrollTop()-c})}else g.A.$("#"+g.contentCarouselConfig.carouselName).animate({scrollTop:g.activeCard.offset().top-g.A.$("#"+g.contentCarouselConfig.carouselName).offset().top+g.A.$("#"+g.contentCarouselConfig.carouselName).scrollTop()})};this.rotateTo=function(a){g.useMultiCarousel?g.rotateToMultiCarousel(a):(g.markPlaying(a),
g.contentCarouselConfig.isVerticalScroll&&g.scrollTo(),0!==g.carouselPageSize&&(a=g.findIndex(a),-1!==a&&(a=Math.floor(a/g.carouselPageSize)+1,g.carouselPageNumber!=a&&("none"==g.auiCarousel.getAttr("transitionStrategy")?g.animateCarousel(a-1):g.auiCarousel.gotoPage(a)))))};this.rotateToMultiCarousel=function(a){g.markPlaying(a);0===g.carouselPageSize&&(g.carouselPageSize=1);a=g.findIndex(a);-1!==a&&(a=(a+1<g.vseAssets.length?a+1:a)+1,g.carouselPageNumber!=a&&("none"==g.auiCarousel.getAttr("transitionStrategy")?
g.animateCarousel(a-1):g.auiCarousel.gotoPage(a)))};this.markPlaying=function(a){g.activeAsset=a;g.activeCard.removeClass("active");g.vseAssetIndex[a.contentId]&&(g.activeCard=g.vseAssetIndex[a.contentId].$el.closest("li").addClass("active"))};this.findIndex=function(a){return g.vseAssets.indexOf(g.vseAssetIndex[a.contentId])};this.emitRefTag=function(a,c,b){0<g.listOffset&&(a=(a-g.listOffset+g.vseAssets.length)%g.vseAssets.length);g.refTagRecorder.emitRefTag(c+a+b)};this.destroy=function(){g.A.$("#"+
g.contentCarouselConfig.carouselName+" .a-carousel-card.active").removeClass("active")};this.updateVotingElements=function(a,c){g.A.each(a,function(a){var b=g.vseAssetIndex[a.contentId].videoVoteContainer;b.setVoteCount(m.POSITIVE_VOTE,a.positiveVoteCount);b.setVoteCount(m.NEGATIVE_VOTE,a.negativeVoteCount);b.countsFetched=!0;b.showOrHide(c,c,!1,c)})};this.updateVotingElementsForCountAndStatus=function(a,c){var b=g.vseAssetIndex[a.contentId].videoVoteContainer;b.setVoteCount(m.POSITIVE_VOTE,a.positiveVoteCount);
b.countsFetched=!0;b.setPreviousVote(1===a.voteStatus?m.POSITIVE_VOTE:m.NONE_VOTE);b.showOrHide(c,c,!1,c)};this.attachStickyHeader=function(a){g.stickyHeaders=new Y(a);g.stickyHeaders.load(g.A.$(a.stickyHeaderContainer+" .vse-vc-header.first-item"))};this.initializeSegmentTabs=function(a){g.segmentTabsModule=new ra(a);g.segmentTabs=g.segmentTabsModule.getTabs();g.attachTabClickHandlers();g.attachTabChangeHandlerOnCarouselScroll();g.showCreatorProfiles(".vse-video-customer-profile",".vse-video-labels")};
this.showCreatorProfiles=function(a,c){var b="#"+g.contentCarouselConfig.carouselName+"."+m.VIP_CAROUSEL_CSS_CLASS+" .vse-video-card";g.A.$(b).each(function(b,d){b=g.A.$(d).find(a);var e=g.A.$(d).find(c);0<b.length&&0<e.length&&(e.html(b.removeClass("vse-hidden aok-hidden").detach().get(0).outerHTML),g.A.$(d).addClass("vse-video-card-has-profile"))});g.A.$(b+" .vse-profile").click(function(a){g.disableCreatorClicksOnMshop&&a.preventDefault();a.stopPropagation();a.stopImmediatePropagation()})};this.attachTabClickHandlers=
function(){g.segmentTabs.forEach(function(a){var c=g.A.$(g.segmentTabsModule.segmentTabCssClassSelectorName+"."+a.cssClassName);c.click(function(){g.animateCarousel(a.startIndex);c.hasClass("vse-tab-active")||g.segmentTabsModule.updateSegmentTabOnClick(a)})})};this.attachTabChangeHandlerOnCarouselScroll=function(){g.A.$("#"+g.contentCarouselConfig.carouselName+"."+m.VIP_CAROUSEL_CSS_CLASS+" .a-carousel-viewport").scroll(function(){g.A.$("#"+g.contentCarouselConfig.carouselName+"."+m.VIP_CAROUSEL_CSS_CLASS+
" .vse-video-card").each(function(a,c){g.orientationConfig.getCardInViewOffset(g.A.$(c))<=g.orientationConfig.getOffsetPointForTabUpdate()&&g.segmentTabsModule.updateSegmentTabForVideo(a)})})};this.animateCarousel=function(a){g.A.objectIsEmpty(g.orientationConfig)||(a*=g.orientationConfig.animatedCarouselDimensionValue(),g.useMultiCarousel&&g.resizeCarousel(a),g.auiCarousel.dom.$viewport.animate(g.orientationConfig.getCarouselPropertyToAnimate(a),500))};this.resizeCarousel=function(a){var c=g.auiCarousel.dom.$viewport[0].scrollWidth-
g.auiCarousel.dom.$viewport[0].clientWidth;if(c<a){var b=g.auiCarousel.dom.$carousel.css("width").slice(0,-2);g.auiCarousel.dom.$carousel.css("width",parseInt(b)+(a-c)+"px")}};this.scrollToActiveVideo=function(a){a=g.findIndex(a);g.animateCarousel(a)};this.updateSegmentTabForActiveVideo=function(a){a=g.findIndex(a);g.segmentTabsModule.updateSegmentTabForVideo(a)};this.setOrientationConfig=function(a){g.orientationConfig=a};this.getAssetSpec=function(a,c,b,d){var e=a.data(),f=a.find(".vse-video-image").data("img"),
f=f.replace("SR160,90_BG0,0,0_PKvse-overlay-play2","").replace("SR320,180_BG0,0,0_PKvse-overlay-play2",""),p=[];if(e.closedCaptions)for(var w=e.closedCaptions.split(","),k=0;k<w.length-1;k+=2)p.push({locale:w[k],url:w[k+1]});a={index:c,contentId:a.attr("data-asin"),title:e.title,vendorName:e.vendorName,vendorCode:e.vendorCode,entityId:e.entityId,entityType:e.entityType,referenceUrl:e.referenceUrl,referenceLinkTitle:e.referenceTitle,videoUrl:e.videoUrl,$el:a,duration:e.duration,imageUrl:f,sponsored:e.sponsored,
videoVoteContainer:g.voteContainerIndex[e.asin],productAsin:e.productAsin,refTag:b+c+d,continuousPlayRefTag:b+c+d+"_auto_play",relatedProducts:e.relatedProducts,vendorTrackingId:e.vendorTrackingId,videoReferenceId:e.videoRefId,groupType:e.groupType,impressionRecorded:!1,closedCaptions:p,creatorType:e.creatorType,videoAge:e.videoAge,rankingStrategy:e.rankingStrategy,aciContentId:e.aciContentId,mimeType:e.mimeType,isSponsoredBrandVideo:!1,sponsoredBrandVideoMetadata:{}};g.isUndefinedOrEmpty(e.adFeedbackUrl)||
g.isUndefinedOrEmpty(e.clickTrackerUrl)||g.isUndefinedOrEmpty(e.instrumentationPixelUrl)||g.isUndefinedOrEmpty(e.trackingPixelUrl)||(a.sponsoredBrandVideoMetadata={adFeedbackUrl:e.adFeedbackUrl,clickTrackerUrl:e.clickTrackerUrl,instrumentationPixelUrl:e.instrumentationPixelUrl,trackingPixelUrl:e.trackingPixelUrl,linkUrl:e.linkUrl},a.isSponsoredBrandVideo=!0);return a};this.isUndefinedOrEmpty=function(a){return g.A.objectIsEmpty(a)||""===a};this.displayOrHideCarouselButtons=function(a){var c=a.getAttr(g.carouselConstants.PAGE_NUMBER),
b=a.getAttr(g.carouselConstants.TOTAL_PAGES),d=a.dom.$container.find(m.CAROUSEL_PREV_BUTTON_CLASS);a=a.dom.$container.find(m.CAROUSEL_NEXT_BUTTON_CLASS);d.toggleClass(m.VSE_CAROUSEL_PAGINATION_DEACTIVATE_CLASS,1===c||1===b);a.toggleClass(m.VSE_CAROUSEL_PAGINATION_DEACTIVATE_CLASS,c===b||1===b)};this.removeActive=function(){g.activeAsset=r;g.activeCard.removeClass("active")};var h=d.$;this.activeCard=h([]);var l=this;this.auiCarousel=b;this.refTagRecorder=new J(d);this.useMultiCarousel=f.useMultiCarousel;
this.disableCreatorClicksOnMshop=f.disableCreatorClicksOnMshop;h("#"+f.carouselName).find(".a-carousel-heading").after(h("#"+f.carouselName).find(".vse-upload-link").removeClass("aok-hidden"));h("#"+f.carouselName+" .vse-video-item").each(function(a){a=l.getAssetSpec(h(this),a,l.contentCarouselConfig.refTagPrefix,l.contentCarouselConfig.celQueryStringParam);l.vseAssets.push(a);l.vseAssetIndex[a.contentId]=a});f.showVideoVotes&&f.videoVoteConfig&&(this.videoVoteContainerFactory=new M(d,f.videoVoteConfig),
d.each(this.vseAssetIndex,function(a){g.voteContainerIndex[a.contentId]=g.videoVoteContainerFactory.createFromContent(g.contentCarouselConfig.carouselName,a.contentId);a.videoVoteContainer=g.voteContainerIndex[a.contentId]}));h("#"+f.carouselName+" .vse-video-card").find(m.$GROUP_1).first().addClass("first-item");h("#"+f.carouselName+" .vse-video-card").find(m.$GROUP_2).first().addClass("first-item");h("#"+f.carouselName+" .vse-video-card").find(m.$GROUP_3).first().addClass("first-item");h("#"+f.carouselName+
" .vse-video-card").find(m.$GROUP_EXPVERNAC).first().addClass("first-item");(b=f.useMShopVDPFallback&&d.capabilities.isAmazonApp&&d.capabilities.android&&0===d.capabilities.androidVersion.indexOf("8"))||h("#"+f.carouselName).delegate(".a-carousel-card a","click",function(a){if(h(this).closest("li").hasClass("active"))a.preventDefault();else{var c=l.vseAssetIndex[h(this).closest("li").find(".vse-video-item").data("asin")];l.markPlaying(c);c.eventTimestamp=Date.now();d.trigger("vse:contentCarousel:"+
f.carouselName+":click",c);c=l.findIndex(c);l.emitRefTag(c,l.contentCarouselConfig.refTagPrefix,l.contentCarouselConfig.celQueryStringParam);f.isPreventDefault&&a.preventDefault()}});var e=b?l.contentCarouselConfig.refTagPrefix+"_mshop_fallback":l.contentCarouselConfig.refTagPrefix;h("#"+f.carouselName+" .vse-carousel-item").each(function(a){var c=h(this);c.attr("href",c.data("redirect-url")+"?ref\x3d"+e+a+l.contentCarouselConfig.celQueryStringParam)});d.off("a:carousel:"+f.carouselName+":change:pageSize");
d.off("a:carousel:"+f.carouselName+":change:pageNumber");d.on("a:carousel:"+f.carouselName+":change:pageSize",function(){g.carouselPageSize=g.auiCarousel.getAttr("pageSize");g.activeAsset&&g.rotateTo(g.activeAsset)});d.trigger("a:carousel:"+f.carouselName+":change:pageSize");d.on("a:carousel:"+f.carouselName+":change:pageNumber",function(a){a.carousel.getAttr("totalPages");g.carouselPageNumber=g.auiCarousel.getAttr("pageNumber");d.trigger("a:carousel:"+f.carouselName+":scrollCarousel",g.carouselPageNumber,
g.carouselPageSize)});d.trigger("a:carousel:"+f.carouselName+":updatePageIndex",this.carouselPageNumber,this.carouselPageSize);d.declarative(f.carouselName+"-sm-link","click touch",function(a){h("#"+f.carouselName+" .vse-video-item .vse-carousel-item").first().click()});f.showCreatorProfiles&&this.showCreatorProfiles(".vse-creator-profile",".vse-thumbn-cp-placeholder");this.carouselFramework.onInit(""+this.contentCarouselConfig.carouselName,function(a){g.contentCarouselConfig.useCustomButtons&&(d.declarative.create(d.$("#"+
f.carouselName),g.contentCarouselConfig.carouselName+"-declarative",{}),d.declarative(g.contentCarouselConfig.carouselName+"-declarative","mouseenter touchstart focus",function(){1!==a.getAttr(g.carouselConstants.TOTAL_PAGES)&&(d.$("#"+f.carouselName).addClass("vse-carousel-show-btn"),d.$("#"+f.carouselName+" .vse-carousel-button").stop(!0,!0).fadeIn({duration:300,queue:!1}))}),d.declarative(g.contentCarouselConfig.carouselName+"-declarative","mouseleave",function(){1!==a.getAttr(g.carouselConstants.TOTAL_PAGES)&&
(d.$("#"+f.carouselName).removeClass("vse-carousel-show-btn"),d.$("#"+f.carouselName+" .vse-carousel-button").stop(!0,!0).fadeOut({duration:300,queue:!1}))}),g.displayOrHideCarouselButtons(a));g.contentCarouselConfig.loadImagesManually&&g.loadImagesManually(a,1);d.on("a:carousel:"+g.contentCarouselConfig.carouselName+":change:pageNumber",function(a){g.contentCarouselConfig.loadImagesManually&&(g.displayOrHideCarouselButtons(a.carousel),g.loadImagesManually(a.carousel,a.newValue))});d.on("a:carousel:"+
g.contentCarouselConfig.carouselName+":change:pageSize",function(a){g.contentCarouselConfig.loadImagesManually&&(g.displayOrHideCarouselButtons(a.carousel),g.loadImagesManually(a.carousel,a.newValue))});g.useMultiCarousel&&g.activeAsset&&g.rotateToMultiCarousel(g.activeAsset)})}d.prototype.changeStartingCardTo=function(b){var a=this;this.listOffset=this.findIndex(b);var c=this;this.A.$("#"+this.contentCarouselConfig.carouselName+" .vse-carousel-item").each(function(a){var b=c.A.$(this);a=(a-c.listOffset+
c.vseAssets.length)%c.vseAssets.length;b.attr("href",b.data("redirect-url")+"?ref\x3d"+c.contentCarouselConfig.refTagPrefix+a)});this.contentCarouselConfig.isVerticalScroll||(this.carouselFramework.initializeAll(),this.carouselFramework.onInit(""+this.contentCarouselConfig.carouselName,function(){a.rotateTo(b)}))};return d}(),N=function(){function d(b,a,c,d){this.carouselFramework=b;this.carouselConstants=a;this.A=c;this.deps=d}d.prototype.create=function(b){var a=this.carouselFramework.getCarousel(this.A.$("#"+
b.carouselName));if(!a)throw new H("Carousel framework can not find carousel by the name of "+b.carouselName+".");return new sa(a,this.carouselFramework,this.carouselConstants,this.A,b,this.deps)};return d}(),Z=function(){function d(b,a){var c=this;this.A=b;this.constants=a;this.repaint=function(a){var b=a.getDimensions().viewport.width,d=a.dom.$carousel.children("li").get(0).getBoundingClientRect(),d=d.width?d.width:d.right-d.left,f=c.updateVisibleItems(a,b,d);c.updateCarouselDimensions(a,b,d);a.gotoIndex(f,
{animationDuration:0,ignorePause:!0});a.triggerEvent("repaint")};this.resize=function(a,b){b.viewport&&b.viewport.width!==r&&c.repaint(a)};this.init=function(a){var b=a.getAttr(c.constants.FIRST_VISIBLE_ITEM);a.setAttr(c.constants.MIN_GUTTER,m.NO_GUTTER);a.setAttr(m.CURRENT_GUTTER,m.NO_GUTTER);c.repaint(a);1<b&&(b=Math.ceil(b/a.getAttr(c.constants.PAGE_SIZE)),a.gotoPage(b));c.bindAttrChangeHandlers(a)}}d.prototype.determinePageSize=function(b,a,c){b=0;if(0<c)for(;a>m.TOLERANT;)b++,a-=c;0>a&&b--;return this.A.isFiniteNumber(b)&&
0<b?b:1};d.prototype.bindAttrChangeHandlers=function(b){var a=this;b.onChange(this.constants.PAGE_NUMBER,function(){b.getAttr(a.constants.HIDE_OFF_SCREEN)&&b.dom.$carousel.children("li").css("visibility","")});b.onChange(this.constants.ANIMATING,function(c){if(!c&&b.getAttr(a.constants.HIDE_OFF_SCREEN)){var d=b.getAttr(a.constants.FIRST_VISIBLE_ITEM)-1,f=d+b.getAttr(a.constants.PAGE_SIZE)-1;b.dom.$carousel.children("li").each(function(c,b){c=c>=d&&c<=f;a.A.$(b).css("visibility",c?"":"hidden")})}})};
d.prototype.updateCarouselDimensions=function(b,a,c){var d;d=b.dom.$carousel;var f=d.children("li");a=f.length;var k=f.first().outerWidth(!0),f=f.eq(1).outerWidth(!0),k=(a-1)*f+k;d.css("width",k+"px");k={carousel:{width:k,outerWidth:d.outerWidth()},items:[]};for(d=0;d<a;d++)k.items.push({width:c,outerWidth:f});b.updateDimensionsCache(k)};d.prototype.updateVisibleItems=function(b,a,c){var d=b.getAttr(this.constants.TOTAL_PAGES),f=b.getAttr(this.constants.PAGE_NUMBER),k=b.getAttr(this.constants.HIDE_OFF_SCREEN),
g=b.dom.$carousel.children("li"),h=b.getAttr(this.constants.FIRST_VISIBLE_ITEM);a=this.determinePageSize(b,a,c);var l=(f-1)*a+1;b.setAttr(this.constants.PAGE_SIZE,a);f>d?(h=(d-1)*a+1,b.setAttr(this.constants.PAGE_NUMBER,d),b.setAttr(this.constants.FIRST_VISIBLE_ITEM,h)):h!==l&&(d=Math.ceil(h/a),h=(d-1)*a+1,b.setAttr(this.constants.PAGE_NUMBER,d),b.setAttr(this.constants.FIRST_VISIBLE_ITEM,h));var e=h-1,B=e+a-1;g.each(function(a,b){b.style.visibility=!k||a>=e&&a<=B+m.NUMBER_OF_CARDS_TO_LOAD_ADDITIONALLY?
"":"hidden";b.style.width=c+"px"});return h};return d}(),aa=function(){function d(b,a,c){var d=this;this.A=b;this.constants=a;this.slideTransition=c;this.carouselLeft=0;this.token=!1;this.init=function(a){d.$scrollBar=a.dom.$container.find(".vse-carousel-scrollbar-thumb");d.carouselLeft=-1*parseInt(a.dom.$carousel.css("left"),10);d.slideTransition.init(a)};this.gotoNextPage=function(a,c){return d.slideTransition.gotoNextPage(a,c)};this.gotoPrevPage=function(a,c){return d.slideTransition.gotoPrevPage(a,
c)};this.gotoPage=function(a,c,b){if(!d.locked()){d.lock();var f=c,h=a.getAttr(d.constants.TOTAL_PAGES),e=a.getAttr(d.constants.PAGE_SIZE),l=a.getAttr(d.constants.SET_SIZE);0<c&&c<=h&&a.setAttr(d.constants.PAGE_NUMBER,c);1>c?c=1:c>h&&(c=h);var q=e*(c-1)+1;c===h&&(q=Math.min(q,l-e+1));1>f||f>h?(d.bounce(a.dom.$carousel,m.BOUNCE_CAROUSEL_FACTOR*(1>f?1:-1)),d.bounce(d.$scrollBar,1*m.BOUNCE_SCROLL_BAR_FACTOR)):d.gotoIndex(a,q,b)}};this.gotoIndex=function(a,c,b){var f=a.getDimensions();b=f.carousel.outerWidth;
var f=f.viewport.outerWidth,h=b-f;c=Math.max(Math.min(a.getItemOffset(c),h),0);b=f/b;f=Math.min(b*f,f);d.$scrollBar=a.dom.$container.find(".vse-carousel-scrollbar-thumb");d.$scrollBar.width(f);d.$scrollBar.animate({left:b*c},m.ANIMATION_SPEED_400,m.SWING);a.dom.$carousel.animate({left:-c},m.ANIMATION_SPEED_400,m.SWING,function(){d.carouselLeft=a.dom.$carousel.css("left");d.unlock()})};this.lock=function(){d.token=!0};this.unlock=function(){d.token=!1};this.locked=function(){return d.token};this.vseTransitionStrategy=
b.copy(c);this.vseTransitionStrategy.init=function(a){return d.init(a)};this.vseTransitionStrategy.gotoPage=function(a,c,b){return d.gotoPage(a,c,b)};this.vseTransitionStrategy.gotoIndex=function(a,c,b){return d.gotoIndex(a,c,b)}}d.prototype.get=function(){return this.vseTransitionStrategy};d.prototype.bounce=function(b,a){var c=this;b.each(function(b,d){var f=c.A.$(d);f.animate({marginLeft:a},m.ANIMATION_SPEED_400,m.SWING,function(){f.animate({marginLeft:0},m.ANIMATION_SPEED_100,m.SWING,c.unlock)})})};
return d}(),n=function(){function d(){}d.IVE_CSS_CLASS_PREFIX="ive-";d.ATTRIBUTION_NAME="ive-inline-player";d.PLAYER_WRAPPER_SELECTOR=".ive-video-player-wrapper";d.LB_PLAYER_PLACEHOLDER_SELECTOR=".ive-inline-lb-player-placeholder";d.CLOSE_BUTTON_SELECTOR=".ive-inline-player-close-button";d.AUDIO_TOGGLE_BUTTON_SELECTOR=".ive-inline-player-audio-toggle";d.EXPAND_BUTTON_SELECTOR=".ive-inline-player-expand";d.OSP_LINK_SELECTOR=".ive-inline-player-osp-link";d.REMAINING_TIME_SELECTOR=".ive-inline-player-remaining-time";
d.PLAYER_CONTAINER_SELECTOR=".vse-player-container";d.MUTE_CSS_CLASS="ive-inline-player-mute";d.UNMUTE_CSS_CLASS="ive-inline-player-unmute";d.INLINE_PLAYER_MODE="inline";d.IVX_PLAYER_MODE="ivx";d.LB_PLAYER_MODE="lb";d.INLINE_PLAYER_EXPAND_BUTTON_CLICK="inline:expand:click";d.INLINE_PLAYER_CLOSE_BUTTON_CLICK="inline:close:click";d.MUTED_AUDIO_PREF="muted";d.UNMUTED_AUDIO_PREF="unmuted";return d}(),ba=function(){return function(d,b,a){var c=this;this.openLightbox=function(a,b,d){var f=c.vars.sharedUtils.getModalFactory();
(f=f&&f.get(c.vars.A.$("#"+c.vars.popoverTriggerId)))?(c.vars.$ingressPlaceholder=a,c.movePlayerToLightbox(a,b),c.vars.clickedVideo&&(c.vars.previouslyClickedVideo=b),c.vars.clickedVideo=b,f.show(),d.preventDefault(),d.stopPropagation()):c.handleError("cannotOpenLightbox","Cannot find Lightbox popover for popoverTriggerId: "+c.vars.popoverTriggerId)};this.movePlayerToLightbox=function(a,b){c.vars.ingressAssetSpec=b;b=c.vars.A.$("#"+c.vars.sharedUtils.vars.templateId).find(n.LB_PLAYER_PLACEHOLDER_SELECTOR);
0<a.length&&0<b.length&&(a.find(n.PLAYER_WRAPPER_SELECTOR).detach().appendTo(b),c.changePlayerMode(c.vars.isMobile?n.IVX_PLAYER_MODE:n.LB_PLAYER_MODE))};this.movePlayerToIngress=function(a){c.setCurrentIngressPlaceholder(a);var b=c.vars.sharedUtils.dom.$wrapper.find(n.LB_PLAYER_PLACEHOLDER_SELECTOR);0<a.length&&0<b.length&&(b.find(n.PLAYER_WRAPPER_SELECTOR).detach().appendTo(a),c.changePlayerMode(n.INLINE_PLAYER_MODE),a.find(n.AUDIO_TOGGLE_BUTTON_SELECTOR).toggleClass(n.UNMUTE_CSS_CLASS,c.player.isMuted()).toggleClass(n.MUTE_CSS_CLASS,
!c.player.isMuted()),c.setAudioPreferences())};this.addPlayerLoadedHandler=function(){c.player.on("loadeddata",function(){c.vars.sharedUtils.inlinePlayerInitialized||(c.player.on("timeupdate",c.updateTimeDisplay),c.vars.sharedUtils.inlinePlayerInitialized=!0)})};this.addLightboxAfterShowAndBeforeHideEvents=function(){c.vars.A.off("a:popover:afterShow:"+c.vars.popoverId);c.vars.A.on("a:popover:afterShow:"+c.vars.popoverId,function(a){try{var b=void 0;if(c.vars.lightboxOpenedFirstTime){var d=c.vars.A.$(a.popover.$popover).find("[data-css-class]");
d.length&&c.vars.A.$(a.popover.$popover).addClass(d.attr("data-css-class"));c.vars.lightboxOpenedFirstTime=!1;b=c.vars.clickedVideo.productAsin}else b=c.vars.clickedVideo.contentId!==c.vars.previouslyClickedVideo.contentId?c.vars.clickedVideo.productAsin:r;c.triggerLightboxOpenEvent(c.vars.clickedVideo,b)}catch(f){c.handleError("cannotOpenLightbox",f)}});c.vars.A.off("a:popover:beforeHide:"+c.vars.popoverId);c.vars.A.on("a:popover:beforeHide:"+c.vars.popoverId,function(){c.closeLightbox()})};this.initializePlayerOverlayComponents=
function(a){a.closest(n.PLAYER_CONTAINER_SELECTOR).delegate(n.CLOSE_BUTTON_SELECTOR,"click touch",function(a){a.preventDefault();a.stopPropagation();c.player.pause();c.vars.sharedUtils.emitMetric(c.vars.clientPrefix+":"+n.INLINE_PLAYER_CLOSE_BUTTON_CLICK);c.vars.A.trigger("vse:ns:inlinePlayer:"+c.vars.clientPrefix+":closeButton:click");l.count("vse:ns:inlinePlayer:closeButton:click",1)});a.closest(n.PLAYER_CONTAINER_SELECTOR).delegate(n.AUDIO_TOGGLE_BUTTON_SELECTOR,"click touch",function(a){a.preventDefault();
a.stopPropagation();c.player.isMuted()?c.player.unmute():c.player.mute();c.setAudioPreferences();c.vars.A.$(a.currentTarget).toggleClass(n.UNMUTE_CSS_CLASS+" "+n.MUTE_CSS_CLASS);c.vars.A.trigger("vse:ns:inlinePlayer:"+c.vars.clientPrefix+":audioToggle:click");l.count("vse:ns:inlinePlayer:audioToggle:click",1)});a.closest(n.PLAYER_CONTAINER_SELECTOR).delegate(n.EXPAND_BUTTON_SELECTOR,"click touch",function(a){c.vars.sharedUtils.emitMetric(c.vars.clientPrefix+":"+n.INLINE_PLAYER_EXPAND_BUTTON_CLICK);
c.vars.A.trigger("vse:ns:inlinePlayer:"+c.vars.clientPrefix+":expandButton:click");l.count("vse:ns:inlinePlayer:expandButton:click",1)})};this.startPlaying=function(a,b){c.setCurrentIngressPlaceholder(b);c.changePlayerMode(n.INLINE_PLAYER_MODE);c.vars.$ingressPlaceholder.find(n.OSP_LINK_SELECTOR).toggleClass("aok-hidden",!a||c.vars.A.objectIsEmpty(a.vendorTrackingId));c.vars.$ingressPlaceholder.find(n.REMAINING_TIME_SELECTOR).addClass("aok-hidden");c.player.play(a);setTimeout(function(){c.vars.$ingressPlaceholder.find(n.REMAINING_TIME_SELECTOR).removeClass("aok-hidden")},
600);c.updateAudioToggle(b)};this.changePlayerMode=function(a){c.player.setPlayerMode(a);c.vars.currentPlayerMode!==a&&c.vars.$ingressPlaceholder.find(n.PLAYER_WRAPPER_SELECTOR).removeClass(n.IVE_CSS_CLASS_PREFIX+c.vars.currentPlayerMode).addClass(n.IVE_CSS_CLASS_PREFIX+a);c.vars.isMobile&&(c.vars.sharedUtils.vars.isVideoImmersivePlayer=a===n.IVX_PLAYER_MODE);c.vars.sharedUtils.vars.currentPlayerMode=a;c.vars.currentPlayerMode=a};this.updateAudioToggle=function(a){var b=h.iveAudioPref;(b===n.MUTED_AUDIO_PREF&&
!c.player.isMuted()||b===n.UNMUTED_AUDIO_PREF&&c.player.isMuted())&&a.find(n.AUDIO_TOGGLE_BUTTON_SELECTOR).click()};this.setAudioPreferences=function(){h.iveAudioPref=c.player.isMuted()?n.MUTED_AUDIO_PREF:n.UNMUTED_AUDIO_PREF};this.setCurrentIngressPlaceholder=function(a){c.vars.$ingressPlaceholder=a};this.triggerLightboxOpenEvent=function(a,b){c.vars.A.trigger("vse:"+c.vars.clientPrefix+":page:lightBoxOpened",{lightBoxId:c.vars.popoverId,lazyLoadProductAsin:b,assetSpec:a})};this.closeLightbox=function(){c.vars.A.trigger("vse:"+
c.vars.clientPrefix+":page:lightBoxClosed");setTimeout(function(){c.movePlayerToIngress(c.vars.$ingressPlaceholder);c.player.play()},50)};this.updateTimeDisplay=function(){var a=c.vars.$ingressPlaceholder.find(n.REMAINING_TIME_SELECTOR);if(a.length){var b=c.player.getMediaDuration();if(!isNaN(b)){var d=Math.min(c.player.getCurrentTime(),b),f=b-d,b=Math.floor(f/3600),d=Math.floor(f/60%60),f=Math.floor(f%60);a.text((0<b?b+":":"")+(0<b&&10>d?"0"+d+":":d+":")+(10>f?"0"+f:f))}}};this.handleError=function(a,
b){l.count("vse:ns:inlinePlayer:"+c.vars.clientPrefix+":"+a,1);l.logError(n.ATTRIBUTION_NAME,"Fallback for inline player "+c.vars.clientPrefix,b);c.vars.A.trigger("vse:ns:inlinePlayer:"+c.vars.clientPrefix+":"+a)};this.vars={A:d,sharedUtils:b,clientPrefix:b.vars.clientPrefix,popoverTriggerId:a.popoverTriggerId,popoverId:a.popoverId,isMobile:b.vars.isMobile,lightboxOpenedFirstTime:!0,clickedVideo:null,previouslyClickedVideo:null,ingressAssetSpec:null,$ingressPlaceholder:null};this.player=b.vars.player}}(),
ta={BrilaFactory:U,VSEPlayer:R,BrilaShim:S,PlayerPromiseShim:T,GatedP:D,PostMetric:l,AuiUtils:z,EventEmitter:K,VideoVoteContainer:L,VideoVoteContainerFactory:M,ContentCarouselFactory:N,InvalidArgumentsException:H,guid:I,StickyHeaders:Y,RefTagRecorder:J,VSEDisplayStrategy:Z,VSETransitionStrategy:aa,OnSiteAttributionMetrics:O,DelphiAttribution:P,MetricUtils:C,InlinePlayerComponent:ba},f=function(){function d(){}d.PLAYER_INITIALIZED="vse-player-initialized";d.LB_OPENED="vse-lb-opened";d.PLAYER_PAGE_STATE_NOT_FOUND_ERROR_KEY=
"vse-player-failed-to-render-no-pagestate";d.LAZY_LOAD_PAGE_STATE_NOT_FOUND_ERROR_KEY="vse-lazyload-failed-to-render-no-pagestate";d.RV_PAGE_STATE_NOT_FOUND_ERROR_KEY="vse-rv-failed-to-render-no-pagestate";d.INGRESS_RV_PAGE_STATE_NOT_FOUND_ERROR_KEY="vse-ingress-failed-to-render-no-pagestate";d.FEEDBACK_PAGE_STATE_NOT_FOUND_ERROR_KEY="vse-feedback-failed-to-render-no-pagestate";d.METADATA_PAGE_STATE_NOT_FOUND_ERROR_KEY="vse-metadata-failed-to-render-no-pagestate";d.SOCIAL_SHARE_STATE_NOT_FOUND_ERROR_KEY=
"vse-social-share-failed-to-render-no-pagestate";d.RELATED_PRODUCT_PAGE_STATE_NOT_FOUND_ERROR_KEY="vse-related-product-failed-to-render-no-pagestate";d.LB_POPOVER_NOT_FOUND_ERROR_KEY="vse-lb-failed-to-render-no-popover";d.VISIBLE_DIV_NARROW_PREFIX="vse-pc-visible-narrow-";d.PC_HIDDEN_CACHE_DIV_PREFIX="vse-pc-hidden-cache-";d.AJAX_MAX_RETRY_COUNT=3;d.CLICK_ATTRIBUTION_INITIAL_DELAY=2;d.VAP_EW="/vap/ew/";d.RELATED_PRODUCTS_ENDPOINT="subcomponent/relatedproducts/";d.EMPTY_STRING="";d.PORTRAIT="portrait";
d.LANDSCAPE="landscape";d.SQUARE="square";d.PORTRAIT_ASPECT_RATIO="9:16";d.LANDSCAPE_ASPECT_RATIO="16:9";d.SQUARE_ASPECT_RATIO="1:1";d.IS_VIDEO_IMMERSIVE_PLAYER_KEY="isVideoImmersivePlayer";d.SHOW_CONTENT_CAROUSEL="showContentCarousel";d.COMMA=",";d.SEMICOLON=";";d.INGRESS_CAROUSEL_SUFFIX="-vse-related-videos";d.ENGLISH="english";d.HINDI="hindi";d.videoInformationContainer=".vse-lb-video-metadata";d.videoTitle=d.videoInformationContainer+" .vse-content-title";d.vendorName=d.videoInformationContainer+
" .vse-video-author";d.videoAge=d.videoInformationContainer+" .ive-video-age";d.followButton=".vse-follow-button .amazon-follow";d.vseFollowClass=".vse-follow-button";d.sbvLabel=".vse-sbv-label";d.hasSBVideoCssClass="vse-has-sb-video";d.creatorAndDisclosure=".vse-creator-name-and-disclosure";d.ibVideoOspDisclosure=d.videoInformationContainer+" .vse-oap-disclosure-container";d.ibVideoAiDisclosure=d.videoInformationContainer+" .vse-aip-disclosure-container";d.socialShareClickMetricName="vseSocialShareClickImageBlock";
d.relatedEnglishVideosContainer="vse-related-english-videos-carousel-container";d.relatedHindiVideosContainer="vse-related-hindi-videos-carousel-container";d.vernacLanguageRadioBlockSelector=".vse-carousel-vernac-language-radio-button-container";d.RELATED_PRODUCTS_INNER_CONTAINER=".vse-rp-container";d.RELATED_PRODUCTS_INNER_CLASS_NAME="vse-rp-container";d.CACHE_RP_PAYLOAD_HIDDEN_DIV_CONTAINER=".vse-related-products-cache-hidden";d.RELATED_PRODUCTS_CONTAINER_SELECTOR=".vse-related-products-narrow";
d.RELATED_PRODUCTS_ITEM_SELECTOR=".vse-product-item";d.ATTRIBUTION_NAME="vse-component-assets";d.LB_CAROUSEL_CONFIG='div[class^\x3d"div-"][class$\x3d"-vip-relatedvideos"]';d.LB_CLOSE_BUTTON_ON_PLAYER_CLASS_NAME="vse-close-button-on-player";d.TABLET_LIGHTBOX_CLASS_NAME="vse-tablet-popover";d.ATTR_ORIGINAL_HREF="data-og-href";d.AUI_POPOVER_INNER=".a-popover-inner";d.VIPLightboxSelector=".vse-vip-lightbox";d.LightboxWrapperSelector=".vse-lightbox-wrapper";d.VIPOverlaySelector=".vse-vip-overlay";d.VIPActionOverlaySelector=
".vse-vip-actions-overlay";d.VIPLbTabsAndCarouselOverlaySelector=".vse-vip-lb-tabs-carousel-container-overlay";d.VIPLbCarouselSelector=".vse-vip-lb-carousel-container";d.VIPProductCarouselOverlaySelector=".vse-pc-container-overlay";d.VIPLbTabsAndCarouselContainerSelector=".vse-vip-lb-tabs-carousel-container";d.VIPProductCarouselOverlayContainerSelector=".vse-pc-container";d.VIPShopIconBlockSelector=".vse-vip-shop";d.VIPShopIconSelector=".vse-vip-shop-icon";d.VIPWatchIconSelector=".vse-vip-watch-icon";
d.VIPWatchIconBlockSelector=".vse-vip-watch";d.VIPShareIconBlockSelector=".vse-vip-share";d.VIPShareIconSelector=".vse-vip-share-icon";d.VIPActionIconSelector=".vse-vip-action-icon";d.VIPEmptyRelatedProductsContainerSelector=".vse-related-products-mobile-empty";d.VIPLbTabsContainerSelector=".vse-vip-lb-tabs";d.VIPLbCarouselViewportSelector=".vse-vip-lb-carousel .a-carousel-viewport";d.VerticalCarouselScrollableElement=".vse-lb-right";d.VIPSkipBackButtonSelector=".vse-vip-skip-backward-button";d.VIPSkipForwardButtonSelector=
".vse-vip-skip-forward-button";d.VIPPlayPauseToggleSelector=".vse-vip-play-pause-toggle";d.VIPProgressBarSelector=".vse-vip-scrubber-bar";d.VIPProgressBarFillSelector=".vse-vip-scrubber-bar-fill";d.VIPTimeRemainingSelector=".vse-vip-time-remaining-display";d.VIPProductCarouselViewportSelector=".vse-pc-container .a-carousel-viewport";d.VIPSeeMoreBlockSelector=".vse-vip-see-more";d.VIPSeeMoreLinkSelector=".vse-vip-see-more-link";d.VIPSeeMoreTextSelector=".vse-vip-see-more-text";d.VIPCCButtonSelector=
".vse-vip-custom-cc-button";d.VIPCCTooltipSelector=".vse-vip-cc-tooltip";d.VIPCCTooltipTextSelector=".vse-vip-cc-tooltip-text";d.defaultPlayerCCButtonTitleSelector=".vjs-subs-caps-button.vjs-menu-button \x3e button";d.VIPMuteUnmuteSelector=".ive-vip-custom-mute_unmute-button";d.VIPVideoTitleSelector=".vse-video-title-ellipsis-wrapper";d.VIPReviewsAuthorProfileImageSelector=".vse-reviews-author-profile-image";d.VIPReviewsAuthorStarBadgesSelector=".vse-reviews-author-star-badges";d.VIPReviewsExpandableContentSelector=
".vse-reviews-content-expand-container";d.VIPReviewsMetadataSelectors=[d.VIPVideoTitleSelector,d.VIPReviewsAuthorProfileImageSelector,d.VIPReviewsAuthorStarBadgesSelector,d.VIPReviewsExpandableContentSelector];d.VIPFeedbackContainer=".vse-fb-trigger-container";d.VIPMultiCarouselWrapper=".vse-vip-lb-multi-carousel-container-wrapper";d.VIPMultiCarouselOverlay=".vse-vip-lb-multi-carousel-container-overlay";d.VIPMultiCarouselOneContainer=".vse-vip-lb-first-carousel-container";d.VIPMultiCarouselTwoContainer=
".vse-vip-lb-second-carousel-container";d.VIPMultiCarouselOneCarousel=".vse-vip-lb-first-carousel-container .a-carousel-viewport";d.VIPMultiCarouselTwoCarousel=".vse-vip-lb-second-carousel-container .a-carousel-viewport";d.VIPMultiCarouselExpandedClass="vse-vip-multi-carousel-expanded";d.G1="G1";d.G2="G2";d.VIPPlayIconClassName="vse-vip-play-icon";d.VIPPauseIconClassName="vse-vip-pause-icon";d.VIPLbOverlayShowCssClassName="vse-lb-tabs-overlay-show";d.VIPOverlayShowClassName="vse-overlay-show";d.VIPActionOverlayShowClassName=
"vse-vip-ao-show";d.VIPActionOverlayBgShadowClassName="vse-carousel-bg-animation";d.VIPMetadataClassName="vse-lb-video-metadata";d.VIPVideoInfoClassName="vse-video-info";d.VIPVideoAgeClassName="ive-video-age";d.VIPVideoHelpfulVotesClassName="vse-helpful-votes";d.VIPVideoTitleWrapperClassName="video-title-ellipsis-wrapper";d.VIPPlayPauseClassName="vse-vip-play-pause-forward-previous-btns-container";d.VIPScrubberClassName="vse-vip-controls";d.UpNextClassName="vse-up-next";d.UpNextVideoTitleClassName=
"vse-up-next-video-title";d.UpNextAuthorClassName="vse-up-next-author";d.UpNextCancelClassName="vse-up-next-cancel";d.UpNextElementClassName="vse-upn-element";d.UpNextElementShownClassName="vse-upn-element-shown";d.CarouselHeader=".vse-vc-header";d.VIPMuteIconClassName="ive-mute";d.VIPUnmuteIconClassName="ive-unmute";d.VIPCCButtonUnpressedClassName="vse-cc-unpressed";d.VIPCCButtonPressedClassName="vse-cc-pressed";d.VIPVideoCarouselOpenedClassName="vse-vip-video-carousel-opened";d.VIPProductCarouselOpenedClassName=
"vse-vip-product-carousel-opened";d.VIPReviewsOverlayVisibleClassName="vse-vip-reviews-overlay-visible";d.VIPLandscapeVideoClassName="vse-vip-landscape-video";d.METRIC_WIDGET_CLICK=":widget:click";d.METRIC_VIP_OPEN="vip:open";d.METRIC_LIGHTBOX_OPEN="lightbox:open";d.METRIC_VIP_CLOSE="vip:close";d.METRIC_VIP_CLOSE_WITHOUT_PLAY="vip:close:without:play";d.METRIC_PLAY="vip:play:icon:click";d.METRIC_PAUSE="vip:pause:icon:click";d.METRIC_SKIP_FORWARD="vip:skip:forward:icon:click";d.METRIC_SKIP_BACK="vip:skip:back:icon:click";
d.METRIC_SHOP_ICON="vip:shop:icon:click";d.METRIC_PFO_CLICK="shop:pfo:click";d.METRIC_PFO_RENDER="shop:pfo:render";d.METRIC_PFO_IMPRESSION="shop:pfo:impression";d.METRIC_WATCH_ICON="vip:watch:icon:click";d.METRIC_WATCH_THUMBNAIL_CLICK="vip:watch:thumbnail:click";d.METRIC_WATCH_THUMBNAIL_RENDER="vip:watch:thumbnail:render";d.METRIC_WATCH_THUMBNAIL_IMPRESSION="vip:watch:thumbnail:impression";d.METRIC_SHARE_ICON="share:icon:click";d.METRIC_SHARE_SELECTION_CLICK="share:selection:click";d.AUTOPLAY_FALLBACK_EXECUTED=
"vse:autoplay:fallback";d.METRIC_REPORT_CLICK="report:icon:click";d.METRIC_REPORT_SUBMIT="report:icon:submit";d.METRIC_OPEN_LIGHTBOX_EVENT_EXECUTION="vse:lightbox:open:duration";d.METRIC_LB_THUMBNAIL_CLICK="ive:lb:thumbnail:click";d.METRIC_LB_THUMBNAIL_IMPRESSION="ive:lb:thumbnail:impression";d.SINGLE_VIDEO_LB_CSS_CLASS="vse-single-video-lb";return d}(),ua=function(){return function(d){var b=this;this.config=d;this.setOrientationConfig=function(a){b.orientationConfig=a};this.updateActiveVideoContentId=
function(a){b.activeVideoContentId=a};this.triggerWatchIconInteractionOpen=function(){b.config.A.$("#"+b.templateId+" "+f.VIPWatchIconSelector+".vse-unpressed").click()};this.triggerShopIconInteractionOpen=function(){b.config.A.$("#"+b.templateId+" "+f.VIPShopIconSelector+".vse-unpressed").click()};this.handleWatchIconInteractions=function(){b.config.A.$("#"+b.templateId+" "+f.VIPWatchIconSelector+".vse-unpressed").click(function(a){a.stopPropagation();a.stopImmediatePropagation();b.config.A.trigger("vse:"+
b.templateId+":vip:vat:component:open");a=function(){b.config.A.$("#"+b.templateId+" "+f.VIPProductCarouselOverlaySelector).hide();b.config.A.$("#"+b.templateId+" "+f.VIPProductCarouselOverlayContainerSelector).addClass(f.VIPActionOverlayBgShadowClassName);b.toggleIconsState(!0,f.VIPWatchIconSelector);b.toggleIconsState(!1,f.VIPShopIconSelector);h.innerWidth>h.innerHeight&&b.config.A.$("#"+b.templateId+" "+f.VIPLbCarouselViewportSelector).height(h.innerHeight-b.config.A.$("#"+b.templateId+" "+f.VIPLbTabsContainerSelector).outerHeight(!0));
b.config.A.$("#"+b.templateId+" "+f.VIPLbTabsAndCarouselOverlaySelector).addClass(f.VIPLbOverlayShowCssClassName);b.config.A.$("#"+b.templateId+" "+f.VIPLbTabsAndCarouselContainerSelector).removeClass(f.VIPActionOverlayBgShadowClassName);b.config.A.fadeIn(b.config.A.$("#"+b.templateId+" "+f.VIPLbTabsContainerSelector),300,"linear");b.config.A.$("#"+b.templateId+" "+f.VIPLbCarouselSelector).animate(b.orientationConfig.carouselAnimationType,300,function(){b.lightboxCarousel.scrollToActiveVideo(b.lightboxCarousel.getActiveAsset())});
b.config.A.$("#"+b.templateId+" .vjs-text-track-display").addClass(f.VIPVideoCarouselOpenedClassName)};b.isDisplayed(f.RELATED_PRODUCTS_CONTAINER_SELECTOR)?b.closeProductCarousel(a):a()})};this.handleMoreVideosIconInteractions=function(){b.config.A.$("#"+b.templateId+" "+f.VIPWatchIconSelector+".vse-unpressed").click(function(a){a.stopPropagation();a.stopImmediatePropagation();b.config.A.trigger("vse:"+b.templateId+":vip:vat:component:open");a=function(){b.config.A.$("#"+b.templateId+" "+f.VIPProductCarouselOverlaySelector).hide();
b.config.A.$("#"+b.templateId+" "+f.VIPProductCarouselOverlayContainerSelector).addClass(f.VIPActionOverlayBgShadowClassName);b.toggleIconsState(!0,f.VIPWatchIconSelector);b.toggleIconsState(!1,f.VIPShopIconSelector);b.config.A.$("#"+b.templateId+" "+f.VIPOverlaySelector).addClass(f.VIPOverlayShowClassName);b.config.A.trigger("vse:ns:partialcomponents:"+b.config.clientPrefix+":ivx:overlay:show")};b.isDisplayed(f.RELATED_PRODUCTS_CONTAINER_SELECTOR)?b.closeProductCarousel(a):a()})};this.handleShopIconInteractions=
function(a){void 0===a&&(a=function(){});b.config.A.$("#"+b.templateId+" "+f.VIPShopIconSelector+".vse-unpressed").unbind("click");b.config.A.$("#"+b.templateId+" "+f.VIPShopIconSelector+".vse-unpressed").click(function(c){c.stopPropagation();c.stopImmediatePropagation();b.config.A.trigger("vse:"+b.templateId+":vip:vat:component:open");c=function(){b.config.A.$("#"+b.templateId+" "+f.VIPLbTabsAndCarouselOverlaySelector).removeClass(f.VIPLbOverlayShowCssClassName);b.config.A.$("#"+b.templateId+" "+
f.VIPLbTabsAndCarouselContainerSelector).addClass(f.VIPActionOverlayBgShadowClassName);b.toggleIconsState(!0,f.VIPShopIconSelector);b.toggleIconsState(!1,f.VIPWatchIconSelector);b.config.A.$("#"+b.templateId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR).removeClass("aok-hidden");b.config.A.$("#"+b.templateId+" "+f.VIPProductCarouselOverlaySelector).show();b.config.A.$("#"+b.templateId+" "+f.VIPProductCarouselOverlayContainerSelector).removeClass(f.VIPActionOverlayBgShadowClassName);b.isDisplayed(f.RELATED_PRODUCTS_CONTAINER_SELECTOR)||
b.config.A.$("#"+b.templateId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR).animate(b.orientationConfig.carouselAnimationType,300,a);b.config.A.$("#"+b.templateId+" .vjs-text-track-display").addClass(f.VIPProductCarouselOpenedClassName)};b.isDisplayed(f.VIPLbCarouselSelector)?b.closeVideoCarousel(c):b.throttleActionIcon||(b.throttleActionIcon=!0,c(),setTimeout(function(){return b.throttleActionIcon=!1},600))})};this.toggleIconsState=function(a,c){a?(b.config.A.$("#"+b.templateId+" "+c+".vse-unpressed").addClass("aok-hidden"),
b.config.A.$("#"+b.templateId+" "+c+".vse-pressed").removeClass("aok-hidden")):(b.config.A.$("#"+b.templateId+" "+c+".vse-unpressed").removeClass("aok-hidden"),b.config.A.$("#"+b.templateId+" "+c+".vse-pressed").addClass("aok-hidden"))};this.handleVIPCarouselClose=function(){[f.VIPLbCarouselSelector,f.VIPLbTabsContainerSelector,f.RELATED_PRODUCTS_CONTAINER_SELECTOR].forEach(function(a){b.config.A.$(b.config.A.$("#"+b.templateId+" "+a)).click(function(a){b.config.A.$(a.target).closest(f.RELATED_PRODUCTS_ITEM_SELECTOR).length||
(a.stopPropagation(),a.stopImmediatePropagation())})});b.config.A.$("#"+b.templateId+" "+f.VIPActionOverlaySelector).unbind("click");b.config.A.$("#"+b.templateId+" "+f.VIPActionOverlaySelector).click(function(){b.reset();b.config.A.trigger("vse:"+b.templateId+":vip:vat:component:close")})};this.handleShareIconInteractions=function(){b.config.A.off("a:sheet:beforeShow:"+b.socialShareId+"-sheet");b.config.A.off("a:sheet:afterHide:"+b.socialShareId+"-sheet");b.config.A.on("a:sheet:beforeShow:"+b.socialShareId+
"-sheet",function(){b.config.A.trigger("vse:"+b.templateId+":vip:vat:component:open");b.toggleIconsState(!0,f.VIPShareIconSelector)});b.config.A.on("a:sheet:afterHide:"+b.socialShareId+"-sheet",function(){b.config.A.trigger("vse:"+b.templateId+":vip:vat:component:close");b.toggleIconsState(!1,f.VIPShareIconSelector)})};this.reset=function(){b.throttleActionIcon||(b.throttleActionIcon=!0,setTimeout(function(){return b.throttleActionIcon=!1},600),b.unpressAllActionIcons(),b.isDisplayed(f.VIPLbCarouselSelector)&&
b.closeVideoCarousel(function(){b.config.A.$("#"+b.templateId+" "+f.VIPLbTabsAndCarouselContainerSelector).addClass(f.VIPActionOverlayBgShadowClassName);b.config.A.delay(function(){b.config.A.$("#"+b.templateId+" "+f.VIPLbTabsAndCarouselOverlaySelector).removeClass(f.VIPLbOverlayShowCssClassName)},310)}),b.isDisplayed(f.RELATED_PRODUCTS_CONTAINER_SELECTOR)&&b.closeProductCarousel(function(){b.config.A.$("#"+b.templateId+" "+f.VIPProductCarouselOverlayContainerSelector).addClass(f.VIPActionOverlayBgShadowClassName);
b.config.A.delay(function(){b.config.A.$("#"+b.templateId+" "+f.VIPProductCarouselOverlaySelector).hide()},310)}))};this.unpressAllActionIcons=function(){b.config.A.$("#"+b.templateId+" "+f.VIPActionIconSelector+" .vse-pressed").addClass("aok-hidden");b.config.A.$("#"+b.templateId+" "+f.VIPActionIconSelector+" .vse-unpressed").removeClass("aok-hidden")};this.closeProductCarousel=function(a){b.config.A.$("#"+b.templateId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR).animate(b.orientationConfig.carouselAnimationType,
300,a);b.config.A.$("#"+b.templateId+" .vjs-text-track-display").removeClass(f.VIPProductCarouselOpenedClassName)};this.closeVideoCarousel=function(a){b.config.A.fadeOut(b.config.A.$("#"+b.templateId+" "+f.VIPLbTabsContainerSelector),300,"linear");b.config.A.$("#"+b.templateId+" "+f.VIPLbCarouselSelector).animate(b.orientationConfig.carouselAnimationType,300,a);b.config.A.$("#"+b.templateId+" .vjs-text-track-display").removeClass(f.VIPVideoCarouselOpenedClassName)};this.isDisplayed=function(a){return"block"==
b.config.A.$("#"+b.templateId+" "+a).css("display")};this.lightboxCarousel=d.contentCarousel;this.socialShareId=d.socialShareId;this.templateId=d.templateId}}(),ca=function(){return function(d,b,a){var c=this;this.onIntersectionObserved=function(a){a.forEach(function(a){a.isIntersecting&&(a=c.childElems.indexOf(a.target),c.callback(a,c.videoItems[a]))})};d===r&&(d=null);this.callback=a;this.parentEle=d;if(this.videoItems=b)this.childElems=Array.prototype.slice.call(b),this.options={root:this.parentEle,
rootMargin:"0px",threshold:.5},this.intersectionObserver=new IntersectionObserver(this.onIntersectionObserved,this.options),this.childElems.forEach(function(a){c.intersectionObserver.observe(a)})}}(),da=function(){function d(b){var a=this;this.A=b;this.makeApplicationNexusPayloadBuilder=function(a,b){return C.makeApplicationNexusPayloadBuilder(a,b)};this.getCurrentlyPlayingVideoInCarousel=function(c){return-1===c?a.vars.currentAssetSpec:a.getCombinedPlaylist()[c]};this.getCurrentlyPlayingVideoInCarouselMarkAsPlaying=
function(c){c=a.getCurrentlyPlayingVideoInCarousel(c);a.markPlaying(c);return c};this.startPlaying=function(c){a.vars.isContinuousPlayFinished=!1;c?a.vars.player.play(c):a.vars.player.play()};this.updateMediaInfo=function(c){var b=a.dom.$lbVideoCarousel&&a.dom.$lbVideoCarousel.find('[data-asin\x3d"'+c.contentId+'"]').find(".vse-lb-crv-metadata");if(b){if(0<b.length){a.dom.$lbLeftColumn.find(".vse-active-metadata").hide();a.dom.$activeCrvMetadataContainer.html(b.clone().removeClass("aok-hidden").html());
a.dom.$activeCrvMetadataContainer.removeClass("aok-hidden");a.dom.$activeCrvMetadataContainer.find(".vse-crv-link").removeClass("aok-hidden");a.vars.showVotes&&a.relatedVideosCarouselNotEmpty()&&(a.updateActiveVideoVoteContainer(c),a.vars.activeVideoVoteContainer.showOrHide(!0,!0,!0,!0));a.vars.showUploadDate&&a.dom.$wrapper.find(f.videoAge).html(c.videoAge);return}a.dom.$activeCrvMetadataContainer.addClass("aok-hidden").html("");a.dom.$lbLeftColumn.find(".vse-active-metadata").show()}a.updateBasicMediaInfo(c);
a.isCustomerReviewVideo(c)?(a.dom.$activeVideoTitlePrefix.removeClass("aok-hidden"),a.dom.$activeVideoCRLink.removeClass("aok-hidden"),a.dom.$activeVideoCRLinkWrapper.removeClass("aok-hidden")):(a.dom.$activeVideoTitlePrefix.addClass("aok-hidden"),a.dom.$activeVideoCRLink.addClass("aok-hidden"),a.dom.$activeVideoCRLinkWrapper.addClass("aok-hidden"));a.dom.$activeVideoCRLink.attr("href",c.referenceUrl||"");a.relatedVideosCarouselNotEmpty()&&(a.vars.showVotes=a.shouldShowVotes(c),a.vars.showVotes?(a.updateActiveVideoVoteContainer(c),
a.vars.activeVideoVoteContainer.showOrHide(!0,!0,!0,!0)):a.vars.activeVideoVoteContainer&&a.vars.activeVideoVoteContainer.showOrHide(!1,!1,!1,!1));a.isInfluencerVideo(c)?a.isOspEnabled(c)&&(a.dom.$wrapper.find(f.ibVideoOspDisclosure).addClass("aok-hidden"),a.dom.$wrapper.find(f.ibVideoAiDisclosure).removeClass("aok-hidden")):(a.isOspEnabled(c)?a.dom.$wrapper.find(f.ibVideoOspDisclosure).removeClass("aok-hidden"):a.dom.$wrapper.find(f.ibVideoOspDisclosure).addClass("aok-hidden"),a.dom.$wrapper.find(f.ibVideoAiDisclosure).addClass("aok-hidden"));
a.vars.shouldShowProfiles&&(a.isInfluencerVideo(c)?a.updateInfluencerProfile(c):a.updateCustomerProfile(c));a.dom.$wrapper.find(f.sbvLabel).toggleClass("aok-hidden",!c.isSponsoredBrandVideo);a.dom.$wrapper.toggleClass(f.hasSBVideoCssClass,c.isSponsoredBrandVideo)};this.updateCustomerProfile=function(c){var b=-1==a.vars.currentIndex?a.vars.$(".vse-vdp-video-profile"):a.dom.$lbVideoCarousel.find('[data-asin\x3d"'+c.contentId+'"]').find(".vse-video-customer-profile");0<b.length?(a.dom.$activeVideoCustomerProfile.html(b.clone().removeClass("vse-hidden").html()),
a.dom.$videoAuthorBlock.addClass("vse-hidden"),a.dom.$customerProfileContainer.removeClass("vse-no-cp"),c.entityId?(a.dom.$vseOapDivider.addClass("vse-hidden"),a.dom.$creatorNameAndDisclosure.removeClass("vse-hidden")):(a.dom.$vseOapDivider.removeClass("vse-hidden"),a.dom.$creatorNameAndDisclosure.addClass("vse-hidden"))):(a.dom.$activeVideoCustomerProfile.html(""),a.dom.$customerProfileContainer.addClass("vse-no-cp"),a.dom.$wrapper.find(f.ibVideoOspDisclosure).find(f.creatorAndDisclosure).html(c.vendorName),
c.entityId?(a.dom.$videoAuthorBlock.addClass("vse-hidden"),a.dom.$vseOapDivider.addClass("vse-hidden"),a.dom.$creatorNameAndDisclosure.removeClass("vse-hidden")):(a.dom.$videoAuthorBlock.removeClass("vse-hidden"),a.dom.$vseOapDivider.removeClass("vse-hidden"),a.dom.$creatorNameAndDisclosure.addClass("vse-hidden")))};this.updateInfluencerProfile=function(c){var b=-1==a.vars.currentIndex?a.vars.$(".vse-vdp-video-profile"):a.dom.$lbVideoCarousel.find('[data-asin\x3d"'+c.contentId+'"]').find(".vse-video-influencer-profile");
0<b.length&&(b=b.clone(),a.dom.$activeVideoCustomerProfile.html(b.removeClass("vse-hidden").html()),a.dom.$activeVideoCustomerProfile.addClass("vse-active-profile-container"),a.dom.$videoAuthorBlock.addClass("vse-hidden"),a.dom.$wrapper.find(f.ibVideoOspDisclosure).addClass("aok-hidden"),a.dom.$wrapper.find(f.ibVideoAiDisclosure).removeClass("aok-hidden"),c.entityId?(a.dom.$customerProfileContainer.append(a.dom.$vseFollowClassSelector),b=a.dom.$wrapper.find(f.ibVideoAiDisclosure),b.find(f.creatorAndDisclosure).html(c.vendorName),
c=a.dom.$activeVideoCustomerProfile.find(".vse-profile").attr("href"),b.find(f.creatorAndDisclosure).attr("href",c),a.dom.$vseOapDivider.addClass("vse-hidden"),a.dom.$creatorNameAndDisclosure.removeClass("vse-hidden")):(a.dom.$vseOapDivider.removeClass("vse-hidden"),a.dom.$creatorNameAndDisclosure.addClass("vse-hidden")),a.dom.$customerProfileContainer.removeClass("vse-no-cp"),a.handleInfluencerProfileNameClick(),a.handleInfluencerAvatarClick())};this.needToUpdateVideoInfoLater=function(){return a.isImageBlockVIP()&&
!a.vars.A.objectIsEmpty(a.vars.currentAssetSpec)&&a.vars.A.objectIsEmpty(a.vars.currentAssetSpec.title)};this.updateVideoMetadataIfNeeded=function(c){a.needToUpdateVideoInfoLater()&&(a.updateBasicMediaInfo(c),a.resetUserActivityTimer(),a.showVideoImmersivePlayerOverlay(),!a.vars.A.objectIsEmpty(c.closedCaptions)&&0<c.closedCaptions.length&&(a.vars.player.removeCurrentTextTracks(),a.vars.player.updateTextTrack(c.closedCaptions)))};this.clearCurrentVideoInfo=function(){a.updateBasicMediaInfo({title:"",
vendorName:"",entityId:"",entityType:""})};this.updateBasicMediaInfo=function(c){a.dom.$wrapper.find(f.videoTitle).html(c.title);a.dom.$wrapper.find(f.vendorName).html(c.vendorName);a.vars.showUploadDate&&a.dom.$wrapper.find(f.videoAge).html(c.videoAge);a.updateFollowCreatorButton(c)};this.updateFollowCreatorButton=function(c){try{if(a.dom.$followButtonSelector.length){var b=a.dom.$followButtonSelector.attr("data-entity-id"),d=a.dom.$followButtonSelector.attr("data-initialize");a.vars.A.objectIsEmpty(c.entityId)||
a.vars.A.objectIsEmpty(c.entityType)||c.entityId===a.vars.defaultEntityId?(a.dom.$followEligibleCreator.length&&a.dom.$followEligibleCreator.addClass("vse-hidden"),a.dom.$vseFollowClassSelector.addClass("vse-hidden")):(a.dom.$followButtonSelector.attr("data-type",c.entityType),a.dom.$followButtonSelector.attr("data-entity-id",c.entityId),"false"==d?(a.dom.$vseFollowClassSelector.removeClass("vse-hidden"),a.dom.$followButtonSelector.attr("data-initialize","true"),h.amznFollow.initialize()):(a.dom.$vseFollowClassSelector.removeClass("vse-hidden"),
h.amznFollow.reInitializeButton(c.entityType,b,a.dom.$followButtonSelector[0])))}else a.dom.$followEligibleCreator.length&&a.dom.$followEligibleCreator.addClass("vse-hidden")}catch(k){l.logError(f.ATTRIBUTION_NAME,"Cannot update follow button. Video: "+c.contentId+", entityId: "+c.entityId,k)}};this.isImageBlockVIP=function(){return a.vars.isVideoImmersivePlayer&&-1!==a.vars.clientPrefix.indexOf("imageblock")};this.createContinuousPlayPlaylist=function(c){a.vars.playlist=a.getCombinedPlaylist();for(var b=
0;b<a.vars.playlist.length&&a.vars.playlist[0].contentId!==c.contentId;b++)a.vars.playlist.push(a.vars.playlist.shift())};this.updateFeedback=function(c){a.vars.A.objectIsEmpty(a.vars.feedback)||a.vars.A.objectIsEmpty(c)||(a.toggleDisableFeedback(c.isSponsoredBrandVideo),a.vars.feedback.setActiveVideoAndSource(c.contentId,c.vendorCode,c.aciContentId),0<a.dom.$wrapper.find(".vse-fb-report-illegal-content").length&&a.vars.feedback.updateReportIllegalContentLink())};this.initializeHelpfulVotes=function(){if(a.vars.showVotes){var c=
a.getActiveAsset();a.updateActiveVideoVoteContainer(c);a.vars.A.on(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-hide-votes",function(){a.vars.activeVideoVoteContainer.showOrHide(!1,!1,!1,!1);a.vars.videoVoteFailure=!0});a.vars.A.off("a:declarative:"+(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-positive")+":click");a.vars.A.declarative(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-positive","click",function(){a.castVote(m.POSITIVE_VOTE)});
a.vars.A.off(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-cast");a.vars.A.on(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-cast",function(c){var b=c===m.POSITIVE_VOTE?m.NEGATIVE_VOTE:m.POSITIVE_VOTE,d=a.getActiveAsset(),g=m.EMPTY_STRING;d&&d.videoVoteContainer&&(g=d.videoVoteContainer.getPreviousVote()===c?"cancel:"+c:d.videoVoteContainer.getPreviousVote()===m.POSITIVE_VOTE||d.videoVoteContainer.getPreviousVote()===m.NEGATIVE_VOTE?"switch-"+b+"-to-"+
c:c,d.videoVoteContainer.updateWithNewVote(c));a.emitMetricToNexus({eventName:a.vars.clientPrefix+"ibiv.videovote.castvote:"+g,stringPayload:f.EMPTY_STRING,intPayload:1,videoAsin:d.contentId})})}};this.emitMetricToNexus=function(c){a.vars.emitMetricsToNexus&&(c=a.vars.buildNexusPayload(c),l.emitNexusMetric(c,a.vars.nexusMetricsConfig.producerId,a.vars.nexusMetricsConfig.widgetMetricsSchemaId,a.vars.nexusMetricsConfig.isInternal))};this.shouldShowVotes=function(c){return a.vars.videoVoteContainerFactory&&
a.vars.videoVoteContainerFactory.videoVoteConfig&&c&&c.videoVoteContainer&&!a.vars.A.objectIsEmpty(c.videoVoteContainer)&&!a.vars.videoVoteFailure&&!c.isSponsoredBrandVideo};this.show=function(c){a.updateMediaInfo(c);a.updateFeedback(c);a.showRelatedProducts(c);a.refreshSocialSharePageState(c);a.rotateTo(c);a.vars.isVideoImmersivePlayer&&a.updateClosedCaptions(c)};this.getDefaultLangFromClosedCaptions=function(a){return a&&0<a.length?a[0].locale:null};this.updateClosedCaptions=function(c){a.vars.currentClosedCaptionsLang=
a.getDefaultLangFromClosedCaptions(c.closedCaptions);a.showOrHideClosedCaptions(c);a.vars.shouldHandleCCForLandscapeVideo=c.videoWidth!==r&&c.videoHeight!==r?c.videoWidth>c.videoHeight:!1};this.showOrHideClosedCaptions=function(c){c.closedCaptions&&0<c.closedCaptions.length?a.vars.A.$("#"+a.vars.templateId+" "+f.VIPCCButtonSelector).show():a.vars.A.$("#"+a.vars.templateId+" "+f.VIPCCButtonSelector).hide()};this.updateActiveVideoVoteContainer=function(c){a.vars.activeVideoVoteContainer.setPreviousVote(m.NONE_VOTE);
a.vars.activeVideoVoteContainer.setContentId(c.contentId);c.videoVoteContainer&&(a.vars.activeVideoVoteContainer.setVoteCount(m.POSITIVE_VOTE,c.videoVoteContainer.getVoteCount(m.POSITIVE_VOTE)),a.vars.activeVideoVoteContainer.setVoteCount(m.NEGATIVE_VOTE,c.videoVoteContainer.getVoteCount(m.NEGATIVE_VOTE)));a.fetchAndUpdateVoteCountAndStatus(c)};this.castVote=function(c){if(a.vars.videoVoteContainerFactory&&a.vars.videoVoteContainerFactory.videoVoteConfig){var b=a.vars.activeVideoVoteContainer.getPreviousVote(),
d=c===m.POSITIVE_VOTE&&b!=m.POSITIVE_VOTE,b=c===m.NEGATIVE_VOTE&&b!=m.NEGATIVE_VOTE;a.vars.activeVideoVoteContainer.updateWithNewVote(c);a.vars.videoVoteContainerFactory.sendVoteToRemote(d,b,a.vars.activeVideoVoteContainer.getContentId()).then(function(b){a.vars.videoVoteContainerFactory&&a.vars.videoVoteContainerFactory.videoVoteConfig&&a.vars.A.trigger(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-vote-cast",c)},function(b){l.count(a.vars.clientPrefix+".videovote.votecastfailure",
1);a.vars.activeVideoVoteContainer.updateWithNewVote(c)})}};this.fetchAndUpdateVoteCountAndStatus=function(c){c.videoVoteContainer&&c.videoVoteContainer.getPreviousVote()!==m.EMPTY_STRING&&a.vars.activeVideoVoteContainer.setPreviousVote(c.videoVoteContainer.getPreviousVote());c.videoVoteContainer&&!c.videoVoteContainer.countsFetched&&a.vars.videoVoteContainerFactory.fetchVoteCountAndStatus(c.contentId).then(function(b){a.relatedVideosCarouselNotEmpty()&&-1!=a.vars.currentIndex&&a.updateVotingElementsForCountAndStatus(c,
b,!1);c.videoVoteContainer.setVoteCount(m.POSITIVE_VOTE,b.positiveVoteCount);c.videoVoteContainer.countsFetched=!0;a.vars.activeVideoVoteContainer.setVoteCount(m.POSITIVE_VOTE,b.positiveVoteCount);a.vars.activeVideoVoteContainer.countsFetched=!0;b=1===b.voteStatus?m.POSITIVE_VOTE:m.NONE_VOTE;a.vars.activeVideoVoteContainer.setPreviousVote(b);c.videoVoteContainer.setPreviousVote(b);a.vars.activeVideoVoteContainer.showOrHide(!0,!0,!0,!0)},function(c){l.count(a.vars.clientPrefix+".videovote.votecountandstatusfailure",
1);a.vars.A.trigger(a.vars.videoVoteContainerFactory.videoVoteConfig.actionPrefix+"-hide-votes")})};this.showRelatedProducts=function(c){a.fadeOutRelatedProductsContainer();var b=a.setRelatedProducts(c),d=c.productAsin;if(b!==r||c.relatedProductsWithSubstitute)a.retrieveRelatedProductsCarouselFromCache(c.contentId,d)!==r?a.getRelatedProductsFromCache(c.contentId,d):a.getRelatedProducts(1,b,c)};this.setRelatedProducts=function(c){return a.vars.A.objectIsEmpty(a.vars.firstRelatedProductOverride)?c.relatedProducts:
a.vars.A.objectIsEmpty(c.relatedProducts)?a.vars.firstRelatedProductOverride:a.vars.firstRelatedProductOverride+","+c.relatedProducts};this.getRelatedProducts=function(c,b,d){if(c>f.AJAX_MAX_RETRY_COUNT)a.handleGetRelatedProductsFailure();else{var k=!0;0<a.vars.relatedProductsNilgiriRequestCount&&(k=!1);var g=z.fetchLatestPageState(a.vars.A,a.vars.clientPrefix+"-related-products-request-ps");if(g){var m=g.componentConfiguration,n=g.pageContext;a.vars.showPFOOnOverlay=g.showPFOOnOverlay;a.vars.showPFOOnOverlay&&
(a.A.$("#"+a.vars.templateId+" "+f.VIPProductCarouselOverlaySelector).hide(),a.A.$("#"+a.vars.templateId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR).hide());a.vars.cacheOnProductAsin=g.cacheOnProductAsin;m&&n&&m.features&&m.features.features&&(n.metadata?n.metadata.relatedProductsAsins=b:n.metadata={relatedProductsAsins:b},g=a.vars.A.objectIsEmpty(a.vars.productAsin)?"":a.vars.productAsin,d.isSponsoredBrandVideo&&(m.features.features.hideSponsoredProducts="true",n.metadata.clickTrackerUrl=d.sponsoredBrandVideoMetadata?
d.sponsoredBrandVideoMetadata.clickTrackerUrl:""),d.relatedProductsWithSubstitute&&(n.metadata.relatedProductsWithSubstitute=d.relatedProductsWithSubstitute),d.refTag&&(n.metadata.refTag=d.refTag),k={pageContext:{page:n.page,placement:n.placement,marketplaceID:n.marketplaceID,locale:n.locale,customerId:n.customerId,requestId:n.requestId,product:{contentID:g,contentIDType:"ASIN"},metadata:n.metadata},configuration:{id:m.id,type:m.type,binder:m.binder,assets:k?["ProductCarousel"]:[],features:{features:m.features.features}}},
a.vars.relatedProductsRequest=k,a.vars.relatedProductsCarouselName=m.features.features.carouselName,a.vars.keepProductCarouselOpenOnClick=null!=m.features.features.keepProductCarouselOpenOnClick?m.features.features.keepProductCarouselOpenOnClick:!1,F.sendRequest(a.vars.A,""+f.VAP_EW+f.RELATED_PRODUCTS_ENDPOINT,k,function(c){-1!==c.indexOf(f.RELATED_PRODUCTS_INNER_CLASS_NAME)?(a.cacheRelatedProductsPayload(d.contentId,d.productAsin,c),a.handleGetRelatedProductsSuccess(d.contentId,d.productAsin),a.vars.$(a.dom.$wrapper).delegate(f.RELATED_PRODUCTS_ITEM_SELECTOR+
" a","click",function(c){a.vars.isMobile&&a.vars.isMshop&&c.preventDefault();c.stopPropagation();c.stopImmediatePropagation();var b=a.vars.$(c.target).closest("li").find(f.RELATED_PRODUCTS_ITEM_SELECTOR),d=b.attr("data-asin"),b=b.hasClass("vse-sponsor-product").toString();a.emitPFOClickMetric(f.METRIC_PFO_CLICK,d,b);d=a.vars.$(c.target).closest("li").find(".vse-carousel-item").attr("href");a.vars.enableClickBasedAttribution&&a.vars.player.getCurrentTime()<=f.CLICK_ATTRIBUTION_INITIAL_DELAY&&a.isOspEnabled(a.vars.currentAssetSpec)&&
(c.preventDefault(),c=a.vars.$(c.target).closest("li").find(f.RELATED_PRODUCTS_ITEM_SELECTOR+" a").attr(f.ATTR_ORIGINAL_HREF),a.vars.isMshop||a.vars.isVideoImmersivePlayer||h.open(c,"_blank"),d=c);a.openExternalLinkFromLightBox(d)}),a.vars.enableClickBasedAttribution&&(c=a.vars.$(a.dom.$wrapper).find(""+f.RELATED_PRODUCTS_ITEM_SELECTOR),a.disableRightClickOnPFOUntilRefParamsAreBound(c)),a.vars.isVideoImmersivePlayer?(a.vars.enableMultiplePFOImpressions||(a.A.$("#"+a.vars.templateId+" "+f.VIPProductCarouselViewportSelector).unbind("scroll"),
a.A.$("#"+a.vars.templateId+" "+f.VIPProductCarouselViewportSelector).bind("scroll",a.emitPFOImpressionMetricVIPHandler)),a.vars.showPFOOnOverlay&&(a.A.$("#"+a.vars.templateId+" "+f.VIPProductCarouselOverlaySelector).fadeIn(1E3),a.A.$("#"+a.vars.templateId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR).fadeIn(1E3),a.handleCCStylesOnCarouselVisibility(!0))):a.vars.enableMultiplePFOImpressions||(a.vars.A.off("a:carousel:"+a.vars.relatedProductsCarouselName+":init",a.emitPFOImpressionMetricInitHandler),
a.vars.A.on("a:carousel:"+a.vars.relatedProductsCarouselName+":init",a.emitPFOImpressionMetricInitHandler)),a.vars.A.objectIsEmpty(a.vars.A.$(f.LB_CAROUSEL_CONFIG).attr("data-configuration"))&&a.emitPFORenderMetric(f.METRIC_PFO_RENDER),l.count(a.vars.clientPrefix+":relatedproducts:load:success",1),a.vars.A.trigger(a.vars.clientPrefix+":relatedproducts:load:success"),a.vars.relatedProductsNilgiriRequestCount+=1):a.handleGetRelatedProductsFailure()},function(e){c+=1;a.getRelatedProducts(c,b,d)}))}else l.count(f.RELATED_PRODUCT_PAGE_STATE_NOT_FOUND_ERROR_KEY,
1)}};this.disableRightClickOnPFOUntilRefParamsAreBound=function(c){if(!c)return!1;a.vars.$(c).bind("contextmenu",function(c){return a.vars.player.getCurrentTime()<f.CLICK_ATTRIBUTION_INITIAL_DELAY?(c.preventDefault(),!1):!0})};this.bindClickAttributionToPFOs=function(c){return a.isOspEnabled(a.vars.currentAssetSpec)?c&&0<c.length?(c.each(function(b){b=a.A.$(c[b]);var d=b.attr("href");b.attr(f.ATTR_ORIGINAL_HREF,d);d={href:d,asin:a.vars.currentAssetSpec.productAsin||a.vars.productAsin,linkCode:a.vars.linkCode,
aciContentId:a.vars.currentAssetSpec.aciContentId||a.vars.aciContentId||a.getAciContentIdFromPlayerInstance(),vendorTrackingId:a.vars.currentAssetSpec.vendorTrackingId};d=(new P(a.vars.A)).buildTag(d);b.attr("href",d)}),!0):!1:!1};this.getVideoToRelatedProductsDivId=function(c,b,d){c=a.vars.popoverId+"-"+d+a.sanitizeForCssSelector(c);a.vars.cacheOnProductAsin&&!a.vars.A.objectIsEmpty(b)&&(c+="-"+b);return c};this.sanitizeForCssSelector=function(a){return a.split(".").join("")};this.cacheRelatedProductsPayload=
function(c,b,d){c=a.getVideoToRelatedProductsDivId(c,b,f.PC_HIDDEN_CACHE_DIV_PREFIX);a.vars.$("#"+a.vars.popoverId+" "+f.CACHE_RP_PAYLOAD_HIDDEN_DIV_CONTAINER).append("\x3cdiv id\x3d'"+c+"'\x3e"+d+" \x3c/div\x3e")};this.retrieveRelatedProductsCarouselFromCache=function(c,b){c=a.getVideoToRelatedProductsDivId(c,b,f.PC_HIDDEN_CACHE_DIV_PREFIX);c=a.vars.$("#"+c+" "+f.RELATED_PRODUCTS_INNER_CONTAINER);if(c!==r&&c[0]!==r)return c[0].outerHTML};this.handleGetRelatedProductsSuccess=function(c,b){var d=a.retrieveRelatedProductsCarouselFromCache(c,
b);a.hideCurrentlyVisibleProductContainer();var k=a.getVideoToRelatedProductsDivId(c,b,f.VISIBLE_DIV_NARROW_PREFIX);a.vars.$("#"+a.vars.popoverId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR).append('\x3cdiv class\x3d"vse-pc-visible aok-hidden" id\x3d\''+k+"'\x3e"+d+"\x3c/div\x3e");a.vars.$("#"+a.vars.popoverId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR+" #"+k+" .a-carousel-left").attr("data-element-id",a.vars.clientPrefix+"-pc-left-button");a.vars.$("#"+a.vars.popoverId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR+
" #"+k+" .a-carousel-right").attr("data-element-id",a.vars.clientPrefix+"-pc-right-button");a.resizeLB();a.showRelatedProductCarousel(c,b);a.fadeInRelatedProductsContainer(c,b);a.vars.enableClickBasedAttribution&&(c=a.vars.$("#"+k).find(f.RELATED_PRODUCTS_ITEM_SELECTOR+" a"),a.bindClickAttributionToPFOs(c));a.vars.enableMultiplePFOImpressions&&(k=document.querySelectorAll("#"+a.vars.popoverId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR+" #"+k+" "+f.RELATED_PRODUCTS_ITEM_SELECTOR))&&h.IntersectionObserver&&
new ca(null,k,a.onProductItemIntersectionObserved)};this.getRelatedProductsFromCache=function(c,b){a.hideCurrentlyVisibleProductContainer();a.showRelatedProductCarousel(c,b);a.fadeInRelatedProductsContainer(c,b)};this.hideCurrentlyVisibleProductContainer=function(){a.dom.$relatedProductContainer.find(".vse-pc-visible").addClass("aok-hidden");a.hideVIPProductCarouselEmptyViewContainer()};this.hideVIPProductCarouselEmptyViewContainer=function(){a.vars.isVideoImmersivePlayer&&a.vars.A.$(f.VIPEmptyRelatedProductsContainerSelector).addClass("aok-hidden")};
this.showVIPProductCarouselEmptyViewContainer=function(){a.vars.isVideoImmersivePlayer&&a.vars.A.$(f.VIPEmptyRelatedProductsContainerSelector).removeClass("aok-hidden")};this.showRelatedProductCarousel=function(c,b){a.vars.A.show(a.vars.$("#"+a.vars.popoverId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR));c=a.getVideoToRelatedProductsDivId(c,b,f.VISIBLE_DIV_NARROW_PREFIX);a.vars.$("#"+c).removeClass("aok-hidden")};this.handleGetRelatedProductsFailure=function(){l.count(a.vars.clientPrefix+":relatedproducts:load:failed",
1);a.vars.showLightboxV2Experience?a.vars.$(f.RELATED_PRODUCTS_CONTAINER_SELECTOR).css({visibility:"hidden"}):a.vars.A.hide(a.vars.$(f.RELATED_PRODUCTS_CONTAINER_SELECTOR));a.vars.isVideoImmersivePlayer&&(a.hideCurrentlyVisibleProductContainer(),a.showVIPProductCarouselEmptyViewContainer())};this.fadeOutRelatedProductsContainer=function(){a.vars.$(f.RELATED_PRODUCTS_CONTAINER_SELECTOR+" "+f.RELATED_PRODUCTS_INNER_CONTAINER).fadeOut(0)};this.fadeInRelatedProductsContainer=function(c,b){c=a.getVideoToRelatedProductsDivId(c,
b,f.VISIBLE_DIV_NARROW_PREFIX);a.vars.$("#"+c+" "+f.RELATED_PRODUCTS_INNER_CONTAINER).animate({opacity:1},0);a.vars.$(f.RELATED_PRODUCTS_CONTAINER_SELECTOR+" "+f.RELATED_PRODUCTS_INNER_CONTAINER).fadeIn(200)};this.toggleDisableFeedback=function(c){a.dom&&a.dom.$lbContainer&&a.dom.$lbContainer.toggleClass("disable-report",!!c)};this.showFeedbackLink=function(c,b){a.vars.$(c).css({display:"inline-block"});a.toggleDimVideoPlayer(b,!0)};this.hideFeedbackLink=function(c,b){a.vars.$(c).css({display:"none"});
a.toggleDimVideoPlayer(b,!1)};this.toggleDimVideoPlayer=function(c,b){a.vars.$(c+" video").toggleClass("dim-video-player",b)};this.deRegisterFeedback=function(c){a.vars.A.off("vse:"+c+":feedback:shown");a.vars.A.off("vse:"+c+":feedback:hidden");a.vars.A.off("vse:ns:feedback:"+c+":init:client")};this.setVideoDetails=function(c,b){a.vars.initialVideo={index:0,title:b.videoTitle,vendorName:b.vendorName,contentId:c,vendorCode:b.vendorCode,videoUrl:b.videoUrl,imageUrl:b.imageUrl,productAsin:b.productAsin,
videoReferenceId:b.videoReferenceId,videoWidth:b.videoWidth,videoHeight:b.videoHeight,seekTime:b.seekTime,aciContentId:b.aciContentId}};this.setFollowEntities=function(c,b){a.vars.A.objectIsEmpty(a.vars.initialVideo)||(a.vars.initialVideo.entityId=c,a.vars.initialVideo.entityType=b)};this.attachPlayerEventListeners=function(){a.vars.player&&(a.vars.player.on("playbackComplete",a._playbackCompleteHandler),a.vars.player.on("playbackStart",a._firstFrameHandler))};this.attachReviewsPlayerEventListeners=
function(){if(a.vars.player)a.vars.player.on("playbackComplete",a._reviewsPlaybackCompleteHandler)};this.removeUpNextComponent=function(){a.vars.upNextTimeoutHandle&&clearTimeout(a.vars.upNextTimeoutHandle);a.vars.intervalUserActivityHandlerId=a.userActivityCountDown();a.vars.A.show(a.vars.$("#"+a.vars.templateId+" "+f.videoInformationContainer));a.dom.$wrapper.find("."+f.UpNextElementClassName).addClass("vse-hidden");a.dom.$wrapper.find("."+f.UpNextClassName).removeClass(""+f.UpNextElementShownClassName);
a.dom.$wrapper.find(f.VIPSkipBackButtonSelector).removeClass("aok-hidden");a.dom.$wrapper.find(f.VIPSkipForwardButtonSelector).removeClass("aok-hidden");a.vars.$("#"+a.vars.templateId+" ."+f.UpNextCancelClassName).unbind("click");a.vars.vipPlayPauseToggle.toggleClass(f.VIPPlayIconClassName,a.vars.vipControlsShouldPause);a.vars.vipPlayPauseToggle.toggleClass(f.VIPPauseIconClassName,!a.vars.vipControlsShouldPause);a.vars.isUpNextComponentActive=!1};this._playUpNextHandler=function(){if(a.relatedVideosCarouselNotEmpty()){var c=
a.getActiveAsset(),b=a._getNextAsset(c);b&&(a.vars.vipControlsShouldPause=!1,a.vars.lightBoxPausedVideo=!1,a.removeUpNextComponent(),c.eventTimestamp&&(b.eventTimestamp=c.eventTimestamp),a.vars.player.play(b),a.show(b),a.vars.currentAssetSpec=b,-1===a.vars.currentIndex&&(a.vars.currentIndex=0))}};this._cancelContinuousPlayHandler=function(){if(a.relatedVideosCarouselNotEmpty()){var c=a.getActiveAsset();a.vars.player.loadNextVideoPoster(c.imageUrl);a.vars.vipControlsShouldPause=!0;a.removeUpNextComponent();
a.vars.vipControlsShouldPause=!1;a.vars.lightBoxPausedVideo=!0}};this.continuousPlay=function(c,b){c.eventTimestamp&&(b.eventTimestamp=c.eventTimestamp);a.refTagRecorder.emitRefTag(b.continuousPlayRefTag);null!=a.vars.onSiteAttributionMetrics&&a.vars.A.trigger("vse:"+a.vars.clientPrefix+":player:continuous:play");a.vars.currentIndex=a.findIndex(b);a.vars.player.play(b);a.show(b)};this._playbackCompleteHandler=function(){if(a.relatedVideosCarouselNotEmpty()){var c=a.getActiveAsset(),b=a._getNextAsset(c);
b?a.vars.useUpNextComponent?(a.vars.isUpNextComponentActive=!0,a.vars.vipControlsShouldPause=!0,a.vars.lightBoxPausedVideo=!0,a.clearIntervalUserActivityHandler(),a.dom.$wrapper.find(f.VIPSkipBackButtonSelector).addClass("aok-hidden"),a.dom.$wrapper.find(f.VIPSkipForwardButtonSelector).addClass("aok-hidden"),a.vars.vipPlayPauseToggle.toggleClass(f.VIPPlayIconClassName,a.vars.vipControlsShouldPause),a.vars.vipPlayPauseToggle.toggleClass(f.VIPPauseIconClassName,!a.vars.vipControlsShouldPause),a.vars.A.hide(a.vars.$("#"+
a.vars.templateId+" "+f.videoInformationContainer)),a.vars.vipControlsShouldPause=!1,a.vars.lightBoxPausedVideo=!1,a.vars.player.loadNextVideoPoster(b.imageUrl),a.dom.$wrapper.find("."+f.UpNextVideoTitleClassName).html(b.title),a.dom.$wrapper.find("."+f.UpNextAuthorClassName).html(b.vendorName),a.dom.$wrapper.find("."+f.UpNextElementClassName).removeClass("vse-hidden"),a.dom.$wrapper.find("."+f.UpNextClassName).addClass(""+f.UpNextElementShownClassName),a.vars.$("#"+a.vars.templateId+" ."+f.UpNextCancelClassName).click(a._cancelContinuousPlayHandler),
a.showVideoImmersivePlayerOverlay(),a.resetUserActivityTimer(-2),a.vars.upNextTimeoutHandle=a.vars.A.delay(function(){a.removeUpNextComponent();a.continuousPlay(c,b);a.vars.currentAssetSpec=b;-1===a.vars.currentIndex&&(a.vars.currentIndex=0)},5E3)):a.continuousPlay(c,b):a.noNextVideoHandler()}else a.noNextVideoHandler()};this._reviewsPlaybackCompleteHandler=function(){a.dom.$wrapper.find(f.VIPTimeRemainingSelector).text("-0:00")};this._firstFrameHandler=function(){!a.vars.showMoreMenuExperience&&
a.vars.isMobile&&a.hideFeedbackLink("#vse-"+a.vars.clientPrefix+"-feedback-container","#"+a.vars.containerId+"-container");a.vars.isVideoImmersivePlayer&&(a.vars.player.getMediaDuration()!==a.vars.vipVideoDuration&&(a.vars.vipVideoDuration=a.vars.player.getMediaDuration()),a.vars.vipControlsShouldPause=!0,a.vars.vipPlayPauseToggle.toggleClass(f.VIPPauseIconClassName,a.vars.vipControlsShouldPause),a.vars.vipPlayPauseToggle.toggleClass(f.VIPPlayIconClassName,!a.vars.vipControlsShouldPause))};this._getNextAsset=
function(c){for(var b=0;b<a.vars.playlist.length&&a.vars.playlist[b].contentId!=c.contentId;b++);if(b!=a.vars.playlist.length)return a.vars.playlist[b+1];if(-1===a.vars.currentIndex)return a.vars.playlist[0]};this._playerFailedAutoplayHandler=function(){a.vars.vipControlsShouldPause=!1;a.toggleVipPlayPauseClass();a.vars.vipVideoDuration=a.vars.player.getMediaDuration();a.updateProgressBarAndTimeDisplay();a.vars.customerReviewsConfig&&a.vars.customerReviewsConfig.showCustomerReviewMetadata&&(a.handleUserActivity(),
a.handleCCStylesOnReviewsOverlayVisibility(!0));l.count(f.AUTOPLAY_FALLBACK_EXECUTED,1)};this._playerSucceededAutoplayHandler=function(){a.clearIntervalUserActivityHandler();a.vars.intervalUserActivityHandlerId=a.userActivityCountDown();a.vars.vipPlayIconClicked=!0;a.vars.useAutoplayFallback=!1;a.vars.customerReviewsConfig&&a.vars.customerReviewsConfig.showCustomerReviewMetadata&&a.handleCCStylesOnReviewsOverlayVisibility(!0)};this.handleCCStylesOnCarouselVisibility=function(c){a.A.$("#"+a.vars.templateId+
" .vjs-text-track-display").toggleClass(f.VIPProductCarouselOpenedClassName,c)};this.handleCCStylesOnReviewsOverlayVisibility=function(c){a.A.$("#"+a.vars.templateId+" .vjs-text-track-display").toggleClass(f.VIPReviewsOverlayVisibleClassName,c)};this.onPlayerTapHandler=function(){"inline"!==a.vars.currentPlayerMode&&(a.vars.showPFOOnOverlay&&a.handleCCStylesOnCarouselVisibility(!0),a.showVideoImmersivePlayerOverlay(),a.resetUserActivityTimer())};this.pauseVideoIfNeeded=function(){a.vars.player&&a.vars.player.isPlaying()&&
(a.vars.player.pause(a.vars.isVideoImmersivePlayer?"ivx-pause":r),a.vars.lightBoxPausedVideo=!0,a.vars.isVideoImmersivePlayer&&a.vars.isVIPOverlayTimerSet&&a.clearIntervalUserActivityHandler())};this.muteUnMuteVideo=function(){a.vars.player&&!a.vars.player.isMuted()?a.vars.player.mute():a.vars.player.unmute();a.updateAudioToggleStatus()};this.updateAudioToggleStatus=function(){a.vars.player&&a.vars.vipMuteUnmuteToggle&&(a.vars.vipMuteUnmuteToggle.toggleClass(f.VIPMuteIconClassName,a.vars.player.isMuted()),
a.vars.vipMuteUnmuteToggle.toggleClass(f.VIPUnmuteIconClassName,!a.vars.player.isMuted()))};this.resumeVideoIfNeeded=function(){a.vars.lightboxOpened&&(a.vars.player&&a.vars.player.isPlaying()&&(a.vars.player.pause(a.vars.isVideoImmersivePlayer?"ivx-pause":r),a.vars.lightBoxPausedVideo=!0),a.vars.player&&!a.vars.player.isPlaying()&&!a.vars.isContinuousPlayFinished&&a.vars.lightBoxPausedVideo?(a.vars.player.resume(Date.now()),a.vars.isVideoImmersivePlayer&&!a.vars.isVIPOverlayTimerSet&&(a.resetUserActivityTimer(),
a.showVideoImmersivePlayerOverlay(),a.vars.intervalUserActivityHandlerId=a.userActivityCountDown())):a.vars.useAutoplayFallback&&(a.startPlaying(a.vars.currentAssetSpec),a.vars.intervalUserActivityHandlerId=a.userActivityCountDown(),a.vars.vipPlayIconClicked=!0,a.vars.isClosedCaptionEnabled&&a.vars.player.enableCurrentTextTrack(a.vars.currentClosedCaptionsLang),a.vars.useAutoplayFallback=!1),a.vars.isVideoImmersivePlayer&&a.vars.isContinuousPlayFinished&&(a.relatedVideosCarouselNotEmpty()&&a.vars.initialVideo?
(a.startPlaying(a.vars.initialVideo),a.show(a.vars.initialVideo)):a.vars.currentAssetSpec&&(a.startPlaying(a.vars.currentAssetSpec),a.vars.customerReviewsConfig&&a.vars.customerReviewsConfig.showCustomerReviewMetadata&&!a.vars.isVIPOverlayTimerSet&&(a.resetUserActivityTimer(),a.showVideoImmersivePlayerOverlay(),a.vars.intervalUserActivityHandlerId=a.userActivityCountDown()))),a.vars.lightBoxPausedVideo=!1)};this.noNextVideoHandler=function(){a.vars.isVideoImmersivePlayer&&(a.clearIntervalUserActivityHandler(),
a.vars.lightBoxPausedVideo=!0,a.vars.vipControlsShouldPause=!1,a.vars.vipPlayPauseToggle.toggleClass(f.VIPPauseIconClassName,a.vars.vipControlsShouldPause),a.vars.vipPlayPauseToggle.toggleClass(f.VIPPlayIconClassName,!a.vars.vipControlsShouldPause),a.showVideoImmersivePlayerOverlay());a.vars.isContinuousPlayFinished=!0};this.setInitialClosedCaptions=function(c,b){b=ha.getClosedCaptions(a.vars.A,b);c.closedCaptions=b;a.vars.initialVideo.closedCaptions=b;a.vars.currentClosedCaptionsLang=a.getDefaultLangFromClosedCaptions(b)};
this.setupVIPClosedCaptions=function(c,b){if("inline"!==a.vars.currentPlayerMode){a.vars.closedCaptionsConfig=c;var d="#"+a.vars.templateId+" "+f.VIPCCButtonSelector;a.vars.A.$(d+"."+f.VIPCCButtonUnpressedClassName).live("click",function(){a.vars.isClosedCaptionEnabled=!0;a.vars.customerReviewsConfig&&a.vars.customerReviewsConfig.showCustomerReviewMetadata&&a.A.$("#"+a.vars.templateId+" .vjs-text-track-display").toggleClass(f.VIPLandscapeVideoClassName,a.vars.shouldHandleCCForLandscapeVideo);a.vars.A.$(""+
d).removeClass(f.VIPCCButtonUnpressedClassName).addClass(f.VIPCCButtonPressedClassName);a.vars.player.enableCurrentTextTrack(a.vars.currentClosedCaptionsLang);a.showTempCCPopup(a.getCurrentCaptionsOnText())});a.vars.A.$(d+"."+f.VIPCCButtonPressedClassName).live("click",function(){a.vars.isClosedCaptionEnabled=!1;a.vars.A.$(""+d).removeClass(f.VIPCCButtonPressedClassName).addClass(f.VIPCCButtonUnpressedClassName);a.vars.player.disableCurrentTextTrack(a.vars.currentClosedCaptionsLang);a.showTempCCPopup(c.captionsOffText)});
a.vars.A.objectIsEmpty(b)&&a.vars.A.$(""+d).hide()}};this.getCurrentCaptionsOnText=function(){var c=a.vars.closedCaptionsConfig.captionsOnTexts,b=a.vars.currentClosedCaptionsLang;return a.vars.A.objectIsEmpty(c)||a.vars.A.objectIsEmpty(c[b])?f.EMPTY_STRING:c[b]};this.showTempCCPopup=function(c){a.vars.A.$("#"+a.vars.templateId+" "+f.VIPCCTooltipTextSelector).text(c);a.vars.A.$("#"+a.vars.templateId+" "+f.VIPCCTooltipSelector).removeClass("aok-hidden");clearTimeout(a.vars.closedCaptionsTooltipTimerId);
a.vars.closedCaptionsTooltipTimerId=setTimeout(function(){return a.vars.A.$("#"+a.vars.templateId+" "+f.VIPCCTooltipSelector).addClass("aok-hidden")},3E3)};this.setupDefaultClosedCaptions=function(){a.vars.A.$("#"+a.vars.templateId+" "+f.defaultPlayerCCButtonTitleSelector).removeAttr("title")};this.onTextTrackEnable=function(c){if("inline"!==a.vars.currentPlayerMode){var b="#"+a.vars.templateId+" "+f.VIPCCButtonSelector;"showing"===c.mode&&a.vars.A.$(""+b).hasClass(f.VIPCCButtonUnpressedClassName)&&
(a.vars.isClosedCaptionEnabled=!0,a.vars.customerReviewsConfig&&a.vars.customerReviewsConfig.showCustomerReviewMetadata&&a.A.$("#"+a.vars.templateId+" .vjs-text-track-display").toggleClass(f.VIPLandscapeVideoClassName,a.vars.shouldHandleCCForLandscapeVideo),a.vars.A.$(""+b).removeClass(f.VIPCCButtonUnpressedClassName).addClass(f.VIPCCButtonPressedClassName))}};this.getDomain=function(){return a.vars.A.objectIsEmpty(h.location.origin)?"https://www.amazon.com":h.location.origin};this.buildShareUrl=
function(c){return a.getDomain()+(c.isSponsoredBrandVideo&&c.sponsoredBrandVideoMetadata?c.sponsoredBrandVideoMetadata.linkUrl:"/vdp/"+c.contentId)};this.refreshSocialSharePageState=function(c){var b=a.buildShareUrl(c);a.vars.A.objectIsEmpty(a.vars.productAsin)||(b+="?product\x3d"+a.vars.productAsin);a.vars.A.state.replace(a.vars.socialSharePageState,{pageLevelData:{clientRef:"ib",deviceTypeRef:a.vars.isMobile?"mb":"dt"},url:b,image:c.imageUrl,title:c.title,description:c.title})};this.getMshopShareParams=
function(c){var b=a.buildShareUrl(c)+"?ref\x3dive_share_mshop_"+a.vars.clientPrefix;c=c.title+" "+b;var d="\x3cdiv\x3e \x3cp\x3e"+c+"\x3c/p\x3e \x3c/div\x3e";return{subject:c,messagePlain160:c.substring(0,160),messagePlain140:c.substring(0,140),messageHTML:d,messagePlain:c,url:b}};this.getDomElements=function(c,b){a.dom.$wrapper=a.vars.$("#"+c+" #"+b);a.dom.$lbContainer=a.dom.$wrapper.find(".vse-lb-container");a.dom.$lbLeftColumn=a.dom.$wrapper.find(".vse-lb-left");a.dom.$lbRightColumn=a.dom.$wrapper.find(".vse-lb-right");
a.dom.$lbCCHeader=a.dom.$wrapper.find(".vse-cc-header");a.dom.$lbTabContainer=a.dom.$wrapper.find(".vse-lightbox-tab");a.dom.$videoAuthor=a.dom.$wrapper.find(".vse-video-author span");a.dom.$mobileFixedContainer=a.dom.$wrapper.find(".vse-common-mobile-fixed-container");a.dom.$mobileMovableContainer=a.dom.$wrapper.find(".vse-vb-movable-container");a.dom.$relatedProductContainer=a.dom.$wrapper.find(".vse-related-products-narrow");a.dom.$activeVideoOspLink=a.dom.$wrapper.find(".vse-oap-link");a.dom.$activeVideoTitlePrefix=
a.dom.$wrapper.find(".vse-title-prefix");a.dom.$activeVideoCRLink=a.dom.$wrapper.find(".vse-cr-link");a.dom.$activeVideoCRLinkWrapper=a.dom.$wrapper.find(".video-title-container-right");a.dom.$followButtonSelector=a.dom.$wrapper.find(f.followButton);a.dom.$vseFollowClassSelector=a.dom.$wrapper.find(f.vseFollowClass);a.dom.$followEligibleCreator=a.dom.$wrapper.find(f.creatorAndDisclosure)};this.getCustomerProfileDomElements=function(){a.dom.$lbVideoCarousel=a.vars.isVideoImmersivePlayer?a.dom.$wrapper.find(".vse-vip-lb-carousel"):
a.dom.$wrapper.find(".vse-related-videos-container");a.dom.$activeVideoCustomerProfile=a.dom.$wrapper.find("#vse-active-video-customer-profile");a.dom.$activeCrvMetadataContainer=a.dom.$wrapper.find(".vse-active-crv-metadata");a.dom.$videoAuthorBlock=a.dom.$wrapper.find(".vse-video-author");a.dom.$customerProfileContainer=a.dom.$wrapper.find(".vse-cp-container");a.dom.$profileLinkSelector=a.dom.$wrapper.find(".vse-profile");a.dom.$vseOapDivider=a.dom.$wrapper.find(".vse-oap-divider");a.dom.$creatorNameAndDisclosure=
a.dom.$wrapper.find(".vse-creator-name-and-disclosure")};this.shouldSetProductCarouselWidth=function(c){var b=a.dom.$wrapper.find(".vse-lb-right .vse-related-videos-container .a-carousel-row").height();return a.vars.A.isFiniteNumber(b)?b<c?!0:!1:!1};this.resizeDesktopLB=function(){var c=a.dom.$lbLeftColumn.outerHeight(!0);if(!a.isDesktopVerticalLightBox()){var b=h.innerHeight-a.dom.$wrapper.closest(f.LightboxWrapperSelector).outerHeight();0<b&&a.dom.$wrapper.closest(f.LightboxWrapperSelector).animate({marginTop:b/
2+"px",marginBottom:b/2+"px",top:0},0)}0<a.vars.$("#"+a.vars.templateId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR).length?!a.vars.showLightboxV2Experience&&a.shouldSetProductCarouselWidth(c-a.vars.relatedProductsContainerFixedHeight)?(a.vars.$("#"+a.vars.templateId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR).width(a.dom.$lbContainer.outerWidth()),b=c-a.vars.relatedProductsContainerFixedHeight):(a.vars.$("#"+a.vars.templateId+" "+f.RELATED_PRODUCTS_CONTAINER_SELECTOR).removeAttr("style"),b=c):(c=a.dom.$lbTabContainer.length?
a.dom.$lbTabContainer.outerHeight(!0):0,b=c=a.vars.$("#"+a.vars.popoverId).height()-(a.dom.$lbContainer.outerHeight(!0)-a.dom.$lbContainer.innerHeight())-c);a.vars.showLightboxV2Experience&&(a.isDesktopVerticalLightBox()?(a.toggleLightboxCloseButton(!1),a.hideFeedbackLink(a.vars.feedbackContainer,a.vars.playerContainer),b=c,a.dom.$lbRightColumn.css({height:"unset"})):(a.toggleLightboxCloseButton(!0),a.dom.$lbRightColumn.css({height:c})));a.dom.$lbRightColumn.css({"max-height":b});a.vars.setMaxHeightToLBLeftColumn&&
(c=a.dom.$lbTabContainer.length?a.dom.$lbTabContainer.outerHeight(!0):0,c=a.vars.$("#"+a.vars.popoverId).height()-(a.dom.$lbContainer.outerHeight(!0)-a.dom.$lbContainer.height())-c,a.dom.$lbLeftColumn.css({"max-height":c}));!a.vars.A.capabilities.mobile&&a.vars.A.capabilities.touch&&(a.toggleLightboxCloseButton(!0),a.dom.$wrapper.closest(f.LightboxWrapperSelector).addClass(f.TABLET_LIGHTBOX_CLASS_NAME),a.dom.$wrapper.closest(f.LightboxWrapperSelector).find(f.AUI_POPOVER_INNER).addClass(f.TABLET_LIGHTBOX_CLASS_NAME))};
this.resizeMobileLB=function(){a.dom.$lbContainer.height(h.innerHeight);var c=a.vars.$(a.dom.$mobileFixedContainer).outerHeight(!0),c=a.vars.$(h).height()-c;a.vars.$(a.dom.$mobileMovableContainer).animate({"max-height":c})};this.resizeLB=function(){a.vars.isMobile?a.resizeMobileLB():a.resizeDesktopLB()};this.isOspEnabled=function(c){return!a.vars.A.objectIsEmpty(c.vendorTrackingId)&&""!==c.vendorTrackingId};this.showVideoImmersivePlayerOverlay=function(){a.dom.$wrapper.find(f.VIPOverlaySelector).addClass(f.VIPOverlayShowClassName);
a.vars.customerReviewsConfig&&a.vars.customerReviewsConfig.showCustomerReviewMetadata&&a.handleCCStylesOnReviewsOverlayVisibility(!0)};this.hideVideoImmersivePlayerOverlay=function(){a.vars.useMultiCarousel&&a.vars.multiCarouselExpanded&&a.openCloseMultiCarousel();a.vars.showPFOOnOverlay&&a.handleCCStylesOnCarouselVisibility(!1);a.vars.customerReviewsConfig&&a.vars.customerReviewsConfig.showCustomerReviewMetadata&&a.handleCCStylesOnReviewsOverlayVisibility(!1);a.dom.$wrapper.find(f.VIPOverlaySelector).removeClass(f.VIPOverlayShowClassName)};
this.setUserActivityTimer=function(c){a.vars.$(c.target).hasClass(f.VIPOverlayShowClassName)||a.vars.$(c.target).hasClass(f.UpNextClassName)||a.vars.$(c.target).hasClass(f.VIPMetadataClassName)||a.vars.$(c.target).hasClass(f.VIPVideoInfoClassName)||a.vars.$(c.target).hasClass(f.VIPVideoAgeClassName)||a.vars.$(c.target).hasClass(f.VIPVideoTitleWrapperClassName)||a.vars.$(c.target).hasClass(f.VIPVideoHelpfulVotesClassName)||a.vars.$(c.target).hasClass(f.VIPPlayPauseClassName)||a.vars.$(c.target).hasClass(f.VIPScrubberClassName)?
a.hideVideoImmersivePlayerOverlay():a.resetUserActivityTimer()};this.resetUserActivityTimer=function(c){void 0===c&&(c=0);a.vars.useAllIVXComponents&&(a.vars.secondsFromLastActivity=c)};this.handleUserActivityForReviewsUsecase=function(c){a.isReviewTextExpanded()?a.isTargetOutsideExpandedReviewsMetadata(c)&&(a.A.$(f.VIPOverlaySelector).removeClass("vse-reviews-expand-full-cr"),a.A.$(".vse-reviews-content-ellipsis-wrapper").scrollTop(0),a.resetReviewTextStyle(),a.A.animationFrameDelay(function(){a.compactReviewIfNeeded();
a.updateReviewsExpandButtonVisibility()}),a.vars.vipControlsShouldPause&&a.resumeVideoIfNeeded()):a.vars.useAutoplayFallback||a.vars.vipControlsShouldPause&&a.setUserActivityTimer(c)};this.handleUserActivity=function(){!a.vars.isVIPOverlayOnTapEventRegistered&&a.vars.$(""+a.vars.popoverId)&&(a.dom.$lbContainer.click(function(c){a.vars.customerReviewsConfig&&a.vars.customerReviewsConfig.showCustomerReviewMetadata?a.handleUserActivityForReviewsUsecase(c):a.setUserActivityTimer(c)}),a.vars.isVIPOverlayOnTapEventRegistered=
!0)};this.userActivityCountDown=function(){if(a.vars.useAllIVXComponents)return a.vars.intervalUserActivityHandlerId=a.vars.A.interval(function(){a.vars.multiCarouselExpanded||(a.vars.secondsFromLastActivity++,3<a.vars.secondsFromLastActivity&&a.hideVideoImmersivePlayerOverlay())},1E3),a.vars.isVIPOverlayTimerSet=!0,a.handleUserActivity(),a.vars.intervalUserActivityHandlerId};this.clearIntervalUserActivityHandler=function(){a.vars.isVIPOverlayTimerSet=!1;clearInterval(a.vars.intervalUserActivityHandlerId)};
this.emitMetric=function(c){a.emitMetricToNexus({eventName:c,stringPayload:f.EMPTY_STRING,intPayload:1})};this.emitClickMetric=function(c){c={eventName:c,stringPayload:f.EMPTY_STRING,intPayload:1,videoAsin:a.getVideoAsin(),rankingStrategy:a.getRankingStrategy(),groupType:a.getGroupType()};a.emitMetricToNexus(c)};this.emitEventDurationMetric=function(c,b){c={eventName:c,stringPayload:f.EMPTY_STRING,intPayload:b,videoAsin:a.getVideoAsin(),rankingStrategy:a.getRankingStrategy()};a.emitMetricToNexus(c)};
this.emitRelatedVideosRenderMetric=function(c,b){a.vars.A.objectIsEmpty(b)||(c={eventName:c,stringPayload:f.EMPTY_STRING,intPayload:1,videoAsinList:b.getplaylist().map(function(a){return a.contentId+f.COMMA+a.groupType}).join(f.SEMICOLON),rankingStrategy:b.getplaylist().map(function(a){return a.rankingStrategy}).join(f.SEMICOLON)},a.emitMetricToNexus(c))};this.emitPFOClickMetric=function(c,b,d){a.vars.emitMetricsToNexus&&(c=a.vars.buildNexusPayload({eventName:c,stringPayload:d.toString(),intPayload:1,
productAsin:b,videoAsin:a.getVideoAsin(),rankingStrategy:a.getRankingStrategy()}),l.emitNexusMetric(c,a.vars.nexusMetricsConfig.producerId,a.vars.nexusMetricsConfig.widgetMetricsSchemaId,a.vars.nexusMetricsConfig.isInternal))};this.emitPFORenderMetric=function(c){a.A.off(" "+a.vars.clientPrefix+":relatedproducts:load:success");a.A.on(" "+a.vars.clientPrefix+":relatedproducts:load:success",function(){for(var b=a.A.$("#"+a.vars.templateId+" .vse-pc-visible").not(".aok-hidden").find(".vse-product-item"),
d="",k=a.getVideoAsin(),g=[],h=0;h<b.length;h++)g.push([b[h].getAttribute("data-asin"),b[h].classList.contains("vse-sponsor-product").toString(),!1]),d+=b[h].getAttribute("data-asin")+","+b[h].classList.contains("vse-sponsor-product").toString(),h!==b.length-1&&(d+=f.SEMICOLON);a.vars.contentIdProductAsinMap[k]=g;a.vars.emitMetricsToNexus&&(b={eventName:c,stringPayload:d.toString(),intPayload:1,videoAsin:k,rankingStrategy:a.getRankingStrategy(),groupType:a.getGroupType()},a.emitMetricToNexus(b))})};
this.getVideoAsin=function(){return a.vars.currentAssetSpec&&a.vars.currentAssetSpec.contentId?a.vars.currentAssetSpec.contentId:a.relatedVideosCarouselNotEmpty()?a.getCurrentlyPlayingVideoInCarousel(a.vars.currentIndex).contentId:f.EMPTY_STRING};this.getRankingStrategy=function(){return a.vars.currentAssetSpec&&a.vars.currentAssetSpec.rankingStrategy?a.vars.currentAssetSpec.rankingStrategy:a.relatedVideosCarouselNotEmpty()?a.getCurrentlyPlayingVideoInCarousel(a.vars.currentIndex).rankingStrategy:
a.vars.rankingStrategy};this.getGroupType=function(){return a.vars.currentAssetSpec&&a.vars.currentAssetSpec.groupType?a.vars.currentAssetSpec.groupType:a.relatedVideosCarouselNotEmpty()?a.getCurrentlyPlayingVideoInCarousel(a.vars.currentIndex).groupType:f.EMPTY_STRING};this.emitPFOImpressionMetric=function(c,b,d,f){a.vars.emitMetricsToNexus&&(c={eventName:c,stringPayload:d.toString(),intPayload:f,productAsin:b,videoAsin:a.getVideoAsin(),rankingStrategy:a.getRankingStrategy()},a.emitMetricToNexus(c))};
this.emitThumbnailMetric=function(c,b,d){void 0===d&&(d=1);a.vars.emitMetricsToNexus&&(c=a.vars.buildNexusPayload({eventName:c,stringPayload:f.EMPTY_STRING,intPayload:d,productAsin:b.productAsin,videoAsin:b.contentId,rankingStrategy:b.rankingStrategy,groupType:b.groupType}),l.emitNexusMetric(c,a.vars.nexusMetricsConfig.producerId,a.vars.nexusMetricsConfig.widgetMetricsSchemaId,a.vars.nexusMetricsConfig.isInternal))};this.emitPFOImpressionMetricHandler=function(c,b,d){var f=a.getVideoAsin(),g=a.vars.contentIdProductAsinMap[f];
if(g){for(;c<Math.min(b,g.length);c++)g[c][2]||(a.emitPFOImpressionMetric(d,g[c][0],g[c][1],c),g[c][2]=!0);a.vars.contentIdProductAsinMap[f]=g}};this.emitPFOImpressionMetricVIPHandler=function(){var c=a.A.$("#"+a.vars.templateId+" .vse-pc-visible .a-carousel-viewport").not(".aok-hidden"),b=c.find(".vse-product-item").first(),c=h.innerWidth>h.innerHeight?Math.floor((c.scrollTop()+h.innerHeight)/b.height()):Math.floor((c.scrollLeft()+h.innerWidth)/b.width());a.emitPFOImpressionMetricHandler(0,c,f.METRIC_PFO_IMPRESSION)};
this.emitPFOImpressionMetricDefaultHandler=function(c){var b=c.carousel.getAttr("pageNumber");c=c.carousel.getAttr("pageSize");a.emitPFOImpressionMetricHandler((b-1)*c,b*c,f.METRIC_PFO_IMPRESSION)};this.emitPFOImpressionMetricInitHandler=function(c){a.vars.A.off("a:carousel:"+a.vars.relatedProductsCarouselName+":change:pageNumber",a.emitPFOImpressionMetricDefaultHandler);a.vars.A.on("a:carousel:"+a.vars.relatedProductsCarouselName+":change:pageNumber",a.emitPFOImpressionMetricDefaultHandler);a.emitPFOImpressionMetricDefaultHandler(c)};
this.handleWatchIconMetric=function(){var c=function(c){a.vars.manualTriggerWatchIcon||a.emitClickMetric(f.METRIC_WATCH_ICON);a.vars.useMultiCarousel&&!a.vars.multiCarouselExpanded&&(a.resetUserActivityTimer(-2),setTimeout(function(){return a.openCloseMultiCarousel()},750))};a.A.$("#"+a.vars.templateId+" "+f.VIPWatchIconSelector+".vse-unpressed").click(c);a.A.$("#"+a.vars.templateId+" "+f.VIPWatchIconSelector+".vse-pressed").click(c)};this.handleShopIconMetric=function(){var c=function(c){a.vars.manualTriggerShopIcon||
a.emitClickMetric(f.METRIC_SHOP_ICON)};a.A.$("#"+a.vars.templateId+" "+f.VIPShopIconSelector+".vse-unpressed").click(c);a.A.$("#"+a.vars.templateId+" "+f.VIPShopIconSelector+".vse-pressed").click(c)};this.handleShareIconMetric=function(){a.A.on("a:sheet:beforeShow:"+a.vars.socialShareId+"-sheet",function(){a.emitClickMetric(f.METRIC_SHARE_ICON)})};this.handleInfluencerProfileNameClick=function(){a.dom.$activeVideoCustomerProfile.find(".a-profile-name").unbind("click");a.dom.$activeVideoCustomerProfile.find(".a-profile-name").click(function(){l.count(a.vars.clientPrefix+
".influencerProfileNameClickCount",1)})};this.handleInfluencerAvatarClick=function(){a.dom.$activeVideoCustomerProfile.find(".a-profile-avatar").unbind("click");a.dom.$activeVideoCustomerProfile.find(".a-profile-avatar").click(function(){l.count(a.vars.clientPrefix+".influencerAvatarClick",1)})};this.getDeviceOrientation=function(){return h.innerHeight>h.innerWidth?f.PORTRAIT:h.innerWidth>h.innerHeight?f.LANDSCAPE:f.SQUARE};this.getAspectRatio=function(a){if(a===f.PORTRAIT)return f.PORTRAIT_ASPECT_RATIO;
if(a===f.LANDSCAPE)return f.LANDSCAPE_ASPECT_RATIO;if(a===f.SQUARE)return f.SQUARE_ASPECT_RATIO};this.isDesktopVerticalLightBox=function(){return!a.vars.isMobile&&h.innerWidth<a.vars.verticalLightBoxMaxWidth};this.attachStickyHeaders=function(){a.vars.isMobile||!a.vars.lightboxOpened||a.vars.A.objectIsEmpty(a.vars.relatedVideosCarousel)||a.vars.relatedVideosCarousel.attachStickyHeader({A:a.vars.A,stickyHeaderContainer:"#"+a.vars.popoverId+" .vse-lb-right",stickyHeaderLBContainer:"#"+a.vars.popoverId,
lbModalContainer:".a-modal-scroller.a-declarative"})};this.resetStickyHeaders=function(){a.vars.isMobile||a.vars.A.objectIsEmpty(a.vars.relatedVideosCarousel)||a.dom.$lbRightColumn.find(".vse-vc-header.first-item").removeAttr("style").removeClass("vse-absolute")};this.initializeVideoActionTray=function(c,b){a.vars.videoActionTrayComponents=new ua({A:a.A,contentCarousel:a.vars.relatedVideosCarousel,socialShareId:a.vars.socialShareId,templateId:a.vars.templateId,clientPrefix:a.vars.clientPrefix});a.setVIPOrientationProperties(b);
a.handleShopIconMetric();a.vars.enableMultiplePFOImpressions?a.vars.videoActionTrayComponents.handleShopIconInteractions():a.vars.videoActionTrayComponents.handleShopIconInteractions(a.emitPFOImpressionMetricVIPHandler);a.vars.videoActionTrayComponents.handleShareIconInteractions();a.handleShareIconMetric();a.handleWatchIconMetric();a.vars.videoActionTrayComponents.handleVIPCarouselClose();a.initializeWatchComponents(c);a.A.on("vse:"+a.vars.templateId+":vip:vat:component:open",function(){a.A.$("#"+
a.vars.templateId+" "+f.VIPActionOverlaySelector).addClass(f.VIPActionOverlayShowClassName)});a.A.on("vse:"+a.vars.templateId+":vip:vat:component:close",function(){a.A.$("#"+a.vars.templateId+" "+f.VIPActionOverlaySelector).removeClass(f.VIPActionOverlayShowClassName)})};this.updateProgressBarAndTimeDisplay=function(){if(0===a.vars.vipVideoDuration)a.vars.vipVideoDuration=a.vars.player.getMediaDuration();else{var c=a.dom.$wrapper.find(f.VIPProgressBarFillSelector),b=a.dom.$wrapper.find(f.VIPTimeRemainingSelector),
d=Math.min(a.vars.player.getCurrentTime(),a.vars.vipVideoDuration);c.width(d/a.vars.vipVideoDuration*100+"%");var k,c=0,g=!1;3600<=a.vars.vipVideoDuration&&(c=Math.floor(d/3600),g=!0);var h=a.vars.vipVideoDuration-d,d=Math.floor(h%60);k=Math.floor(h/60%60);g&&(c=Math.floor(h/3600));b.text("-"+(g?c+":":"")+(g&&10>k?"0"+k+":":k+":")+(10>d?"0"+d:d))}};this.initializeVIPControls=function(){var c=a.dom.$wrapper.find(f.VIPSkipBackButtonSelector);c.unbind("click");c.click(function(c){c.stopPropagation();
c=a.vars.player.getCurrentTime();a.vars.player.setCurrentTime(c-10);a.resetUserActivityTimer(2);a.vars.isContinuousPlayFinished=!1;a.emitClickMetric(f.METRIC_SKIP_BACK)});c=a.dom.$wrapper.find(f.VIPSkipForwardButtonSelector);c.unbind("click");c.click(function(c){c.stopPropagation();0===a.vars.vipVideoDuration&&(a.vars.vipVideoDuration=a.vars.player.getMediaDuration());c=a.vars.player.getCurrentTime();a.vars.player.setCurrentTime(Math.min(c+10,a.vars.vipVideoDuration-1));a.resetUserActivityTimer(2);
a.emitClickMetric(f.METRIC_SKIP_FORWARD)});a.initializeMuteButton();a.vars.vipPlayPauseToggle=a.dom.$wrapper.find(f.VIPPlayPauseToggleSelector);a.vars.vipPlayPauseToggle.unbind("click");a.vars.vipPlayPauseToggle.click(function(c){c.stopPropagation();a.vars.vipControlsShouldPause?(a.pauseVideoIfNeeded(),a.vars.vipControlsShouldPause=!1,a.emitClickMetric(f.METRIC_PAUSE)):(a.vars.useUpNextComponent&&a.vars.isUpNextComponentActive?a._playUpNextHandler():a.resumeVideoIfNeeded(),a.resetUserActivityTimer(2),
a.vars.vipControlsShouldPause=!0,a.emitClickMetric(f.METRIC_PLAY));a.vars.vipPlayPauseToggle.toggleClass(f.VIPPauseIconClassName,a.vars.vipControlsShouldPause);a.vars.vipPlayPauseToggle.toggleClass(f.VIPPlayIconClassName,!a.vars.vipControlsShouldPause)});var b=a.dom.$wrapper.find(f.VIPProgressBarSelector);a.vars.player.on("timeupdate",a.updateProgressBarAndTimeDisplay);a.dom.$wrapper.delegate(f.VIPProgressBarSelector,"touchstart",function(c){c.stopPropagation();a.vars.isScrubbing=!0;a.pauseVideoIfNeeded()});
a.dom.$wrapper.delegate(f.VIPProgressBarSelector,"touchmove",function(c){if(a.vars.isScrubbing){c.stopPropagation();a.resetUserActivityTimer();var d=b.offset().left,f=b.width();c=Math.max(0,Math.min(1,(c.originalEvent.touches[0].pageX-d)/f));d=a.vars.vipVideoDuration*c;1===c&&(d-=.1);a.vars.player.setCurrentTime(d)}});a.dom.$wrapper.delegate(f.VIPProgressBarSelector,"touchend",function(c){c.stopPropagation();a.vars.isScrubbing=!1;a.vars.isContinuousPlayFinished=!1;a.vars.vipControlsShouldPause&&a.resumeVideoIfNeeded()});
a.dom.$wrapper.delegate(f.VIPProgressBarSelector,"click",function(c){c.stopPropagation();a.vars.isContinuousPlayFinished=!1;a.resetUserActivityTimer();var d=b.offset().left,f=b.width();c=Math.max(0,Math.min(1,(c.pageX-d)/f));d=a.vars.vipVideoDuration*c;1===c&&(d-=.1);a.vars.player.setCurrentTime(d)})};this.initializeMuteButton=function(){a.vars.vipMuteUnmuteToggle=a.dom.$wrapper.find(f.VIPMuteUnmuteSelector);a.vars.vipMuteUnmuteToggle.unbind("click");a.vars.vipMuteUnmuteToggle.click(function(c){c.stopPropagation();
a.muteUnMuteVideo()})};this.updateSegmentTab=function(c){a.vars.relatedVideosCarousel&&a.vars.relatedVideosCarousel.updateSegmentTabForActiveVideo(c)};this.vseCsmWidgetLoadedMetrics=function(){var c=a.vars.A.$("#"+a.vars.clientPrefix+"-vse-related-videos");a.vars.isMetricRecorded||a.vars.A.objectIsEmpty(c.offset())?a.vars.A.off("scroll",a.vseCsmWidgetLoadedMetrics):a.vars.A.onScreen(c)&&(a.postWidgetInitializationMetrics(),a.vars.isMetricRecorded=!0)};this.postWidgetInitializationMetrics=function(){var c=
a.vars.A.now()-a.vars.widgetStartTime;a.vars.A.$("#vse-spinner").hasClass("aok-hidden")?(l.count(a.vars.clientPrefix+".widgetViewedAndLoadedCount",1),l.count(a.vars.clientPrefix+".widgetViewedAndLoadedDuration",c)):(l.count(a.vars.clientPrefix+".widgetViewedNotLoadedCount",1),l.count(a.vars.clientPrefix+".widgetViewedNotLoadedDuration",c));l.count(a.vars.clientPrefix+".pageLoadToWidgetViewedDuration",c)};this.emitMultipleThumbnailImpressionMetricHandler=function(c){try{if(c===r||null===c)return!1;
var b=a.vars.isVideoImmersivePlayer?a.getCombinedPlaylist():a.vars.playlist;a.emitThumbnailMetric(a.vars.isVideoImmersivePlayer?f.METRIC_WATCH_THUMBNAIL_IMPRESSION:f.METRIC_LB_THUMBNAIL_IMPRESSION,b[c],c)}catch(d){l.logError(f.ATTRIBUTION_NAME,"Failed to emit thumbnail impression",d)}};this.onIntersectionObserved=function(c){a.emitMultipleThumbnailImpressionMetricHandler(c)};this.onProductItemIntersectionObserved=function(c,b){b&&b.dataset&&a.emitPFOImpressionMetric(f.METRIC_PFO_IMPRESSION,b.dataset.asin||
null,b.dataset.isSponsored||!1,c)};this.getEligibleIndicesForEmission=function(a,b){return b=a=a.filter(function(a){return 0>b.indexOf(a)}).slice()};this.getModalFactory=function(){var c=null;a.vars.isMobile?t.now("a-secondary-view").execute("vw-dp-secondary-view",function(a){c=a}):t.now("a-modal").execute("vw-dp-modal",function(a){c=a});return c};this.resetVIPControls=function(){a.vars.vipControlsShouldPause||(a.vars.vipControlsShouldPause=!0,a.vars.vipPlayPauseToggle.toggleClass(f.VIPPlayIconClassName,
!a.vars.vipControlsShouldPause),a.vars.vipPlayPauseToggle.toggleClass(f.VIPPauseIconClassName,a.vars.vipControlsShouldPause))};this.setMshopPageOrientation=function(c){a.vars.A.capabilities.ios&&"function"===typeof a.vars.mShopFactory.setPageOrientation&&a.vars.mShopFactory.setPageOrientation({behavior:c})};this.requestMshopFullscreen=function(){a.vars.isVideoImmersivePlayer&&!a.vars.A.objectIsEmpty(a.vars.mShopFactory)&&(a.vars.A.capabilities.ios&&a.vars.viewportMetaTag.attr("content",a.vars.viewportMetaTagContent+
",  viewport-fit\x3dcover"),a.vars.mShopFactory.requestFullscreen({successCallback:function(){document.addEventListener("touchmove",a.mShopScrollLock,!0);document.addEventListener("touch",a.mShopScrollLock,!0);a.vars.A.delay(function(){a.vars.A.trigger("resize",{},{width:h.innerWidth,height:document.documentElement.clientHeight});a.dom.$lbContainer&&a.dom.$lbContainer.height(document.documentElement.clientHeight)},200);a.setMshopPageOrientation(a.vars.mShopFactory.AUTO_ROTATE_ENABLED)},failCallback:function(){a.vars.A.trigger("resize",
{},{width:h.innerWidth,height:document.documentElement.clientHeight});a.dom.$lbContainer&&a.dom.$lbContainer.height(document.documentElement.clientHeight)}}))};this.cancelMshopFullscreen=function(c){void 0===c&&(c=function(){});a.vars.isVideoImmersivePlayer&&!a.vars.A.objectIsEmpty(a.vars.mShopFactory)&&(a.vars.A.capabilities.ios&&a.vars.viewportMetaTag.attr("content",a.vars.viewportMetaTagContent),a.vars.mShopFactory.cancelFullscreen({successCallback:function(){document.removeEventListener("touchmove",
a.mShopScrollLock,!0);document.removeEventListener("touch",a.mShopScrollLock,!0);c();a.setMshopPageOrientation(a.vars.mShopFactory.AUTO_ROTATE_DISABLED)},failCallback:function(){a.requestMshopFullscreen()}}))};this.cancelMshopFullscreenAndNavigate=function(c){var b;"string"===typeof c?b=function(){a.vars.A.delay(function(){a.closeIVXComponents();a.vars.mShopFactory.navigate({url:c,transition:"slide"})},600)}:(c&&c.preventDefault(),b=function(){if(c.target){var b=c.target.getAttribute("href");a.closeIVXComponents();
a.vars.mShopFactory.navigate({url:b,transition:"slide"})}});a.vars.disableFullScreenOnMshop?b():a.cancelMshopFullscreen(b)};this.openExternalLinkFromLightBox=function(c){a.pauseVideoIfNeeded();a.vars.isMshop&&a.vars.isVideoImmersivePlayer&&a.cancelMshopFullscreenAndNavigate(c)};this.closeIVXComponents=function(){a.vars.$(".vse-close-button").click();a.A.trigger("vse:ns:partialcomponents:"+a.vars.clientPrefix+":ivx:close")};this.closeIXVAndTriggerDisclosureEvent=function(c){a.vars.isVideoImmersivePlayer&&
c&&(a.preventExternalLinkClick(c),c.srcElement&&(c=c.srcElement.getAttribute("href"),a.closeIVXComponents(),a.vars.A.trigger(a.vars.clientPrefix+":vse:disclosure:click",c)))};this.preventExternalLinkClick=function(a){a&&a.preventDefault()};this.mShopScrollLock=function(c){0<a.vars.$(c.target).closest(f.VIPActionOverlaySelector).length||0<a.vars.$(c.target).closest(".vse-profile").length||0<a.vars.$(c.target).closest(".vse-fb-sheet").length||a.vars.$(c.target).hasClass("vse-fb-copyright")||a.vars.$(c.target).hasClass("vse-oap-link")||
a.vars.$(c.target).hasClass("vse-profile")||a.vars.$(c.target).hasClass("vse-cr-link")||a.vars.$(c.target).hasClass("vse-fb-report-illegal-content")?c.stopPropagation():c.preventDefault()};this.initializeWatchComponents=function(c){c={A:a.A,segmentTabs:c,segmentTabCssClassSelectorName:"#"+a.vars.popoverId+" "+f.VIPLbTabsContainerSelector+" .vse-vip-lb-tab"};a.vars.useMultiCarousel||a.vars.A.objectIsEmpty(a.vars.relatedVideosCarousel)?a.vars.useMultiCarousel&&!a.vars.hideWatchIcon&&a.vars.videoActionTrayComponents.handleMoreVideosIconInteractions():
(a.vars.relatedVideosCarousel.initializeSegmentTabs(c),a.vars.videoActionTrayComponents.handleWatchIconInteractions())};this.setVIPOrientationProperties=function(c){var b={carouselAnimationType:{width:"toggle"},getCardInViewOffset:function(a){return a.offset().left},getOffsetPointForTabUpdate:function(){return h.innerWidth/2},animatedCarouselDimensionValue:function(){return c},getCarouselPropertyToAnimate:function(a){return{scrollLeft:a}}},d={carouselAnimationType:{height:"toggle"},getCardInViewOffset:function(a){return a.offset().top},
getOffsetPointForTabUpdate:function(){return a.A.$("#"+a.vars.templateId+" "+f.VIPLbTabsContainerSelector).outerHeight(!0)+parseInt(a.A.$("#"+a.vars.templateId+" "+f.VIPLbCarouselSelector+" .vse-video-card:first").css("margin-top"))},animatedCarouselDimensionValue:function(){return a.A.$("#"+a.vars.templateId+" "+f.VIPLbCarouselSelector+" .vse-video-card:last").outerHeight(!0)+3},getCarouselPropertyToAnimate:function(a){return{scrollTop:a}}},k={carouselAnimationType:{height:"toggle"},getCardInViewOffset:function(a){return a.offset().top},
getOffsetPointForTabUpdate:function(){return a.A.$("#"+a.vars.templateId+" "+f.VIPLbTabsContainerSelector).outerHeight(!0)+parseInt(a.A.$("#"+a.vars.templateId+" "+f.VIPLbCarouselSelector+" .vse-video-card:first").css("margin-top"))},animatedCarouselDimensionValue:function(){return c},getCarouselPropertyToAnimate:function(a){return{scrollLeft:a}}};h.innerHeight>h.innerWidth&&a.setOrintationConfig(b);h.innerWidth>h.innerHeight&&(a.vars.useMultiCarousel?a.setOrintationConfig(k):a.setOrintationConfig(d),
a.updateLbViewportHeight());a.A.on.orientationchange(function(c){0===c.orientation?(a.setOrintationConfig(b),a.resetLbViewportHeight()):(a.vars.useMultiCarousel?a.setOrintationConfig(k):a.setOrintationConfig(d),a.updateLbViewportHeight())})};this.setOrintationConfig=function(c){a.vars.videoActionTrayComponents.setOrientationConfig(c);a.setOrientationConfig(c)};this.resetLbViewportHeight=function(){a.A.$("#"+a.vars.templateId+" "+f.VIPLbCarouselViewportSelector).css("height","initial")};this.updateLbViewportHeight=
function(){a.A.$("#"+a.vars.templateId+" "+f.VIPLbCarouselViewportSelector).height(h.innerHeight-a.A.$("#"+a.vars.templateId+" "+f.VIPLbTabsContainerSelector).outerHeight(!0))};this.isReviewTextOverflow=function(){var c=a.A.$("#"+a.vars.templateId+" .vse-reviews-content-ellipsis-wrapper").prop("scrollHeight"),b=a.A.$("#"+a.vars.templateId+" .vse-reviews-content-ellipsis-wrapper").prop("clientHeight");return c>b};this.isReviewTextExpanded=function(){return a.A.$("#"+a.vars.templateId+" "+f.VIPOverlaySelector).hasClass("vse-reviews-expand-full-cr")};
this.updateReviewsExpandButtonVisibility=function(){a.A.$("#"+a.vars.templateId+" .vse-reviews-expand-container").toggleClass("vse-reviews-expand-show-toggle",a.isReviewTextOverflow())};this.styleExpandedReviewText=function(){var c=a.A.$("#"+a.vars.templateId+" .vse-reviews-content-expand-container"),b=a.isReviewTextOverflow()?"vse-reviews-content-expand-container-long":"vse-reviews-content-expand-container-short";c.addClass(b)};this.resetReviewTextStyle=function(){a.A.$("#"+a.vars.templateId+" .vse-reviews-content-expand-container").removeClass("vse-reviews-content-expand-container-short vse-reviews-content-expand-container-long")};
this.compactReviewIfNeeded=function(){var b=a.A.$("#"+a.vars.templateId+" .vse-reviews-content-ellipsis-wrapper"),d=a.A.$("#"+a.vars.templateId+" .vse-vip-play-pause-forward-previous-btns-container"),f=b.hasClass("vse-reviews-content-ellipsis-single-line"),f=b.height()*(f?2:1),d=b.offset().top+f>d.offset().top-10;b.toggleClass("vse-reviews-content-ellipsis-single-line",d)};this.handleReviewsOnResize=function(){a.vars.customerReviewsConfig&&a.vars.customerReviewsConfig.showCustomerReviewMetadata&&
a.vars.lightboxOpened&&(a.isReviewTextExpanded()?(a.resetReviewTextStyle(),a.styleExpandedReviewText()):(a.compactReviewIfNeeded(),a.updateReviewsExpandButtonVisibility()))};this.isTargetOutsideExpandedReviewsMetadata=function(b){return f.VIPReviewsMetadataSelectors.every(function(d){return 0===a.A.$(b.target).closest(d).length})};this.toggleVipPlayPauseClass=function(){a.vars.vipPlayPauseToggle.toggleClass(f.VIPPauseIconClassName,a.vars.vipControlsShouldPause);a.vars.vipPlayPauseToggle.toggleClass(f.VIPPlayIconClassName,
!a.vars.vipControlsShouldPause)};this.handleKeepVideoCarouselOpen=function(){a.vars.lightboxOpened&&a.vars.keepCarouselOpenOnLinkClick&&(a.handleIVXOverlay(),a.vars.manualTriggerWatchIcon=!0,a.vars.videoActionTrayComponents.triggerWatchIconInteractionOpen(),a.vars.watchAllClicked=!1,a.vars.manualTriggerWatchIcon=!1)};this.handleKeepProductCarouselOpen=function(){a.vars.lightboxOpened&&a.vars.keepProductCarouselOpenOnClick&&(a.handleIVXOverlay(),a.vars.manualTriggerShopIcon=!0,a.vars.videoActionTrayComponents&&
a.vars.videoActionTrayComponents.triggerShopIconInteractionOpen(),a.vars.manualTriggerShopIcon=!1)};this.handleIVXOverlay=function(){a.vars.useAutoplayFallback||!a.vars.lightboxOpenedFirstTime?a.showVideoImmersivePlayerOverlay():a.hideVideoImmersivePlayerOverlay()};this.showPoster=function(b){a.vars.player.showPoster(b)};this.addPlayerHoverHandler=function(){var b=a.vars.A.$("#"+a.vars.containerId),d=a.vars.$("#"+a.vars.templateId+"-close-button");if(d){d=d.clone();d.removeClass("vse-close-button").addClass(f.LB_CLOSE_BUTTON_ON_PLAYER_CLASS_NAME);
b.append(d);var h=function(){(a.isDesktopVerticalLightBox()||a.isSingleVideoLightbox())&&a.toggleLightboxCloseButton(!0)};a.vars.playerUnHoverHandler=function(){(a.isDesktopVerticalLightBox()||a.isSingleVideoLightbox())&&a.toggleLightboxCloseButton(!1)};b.hover(function(){return h()},function(){return a.vars.playerUnHoverHandler()});b.focusin(function(){null!==a.vars.feedbackContainer&&a.showFeedbackLink(a.vars.feedbackContainer,a.vars.playerContainer);a.toggleLightboxCloseButton(!0)});a.vars.$(""+
f.videoInformationContainer).focusin(function(){a.hideFeedbackLink(a.vars.feedbackContainer,a.vars.playerContainer);a.toggleLightboxCloseButton(!1)});a.dom.$wrapper.find("."+f.LB_CLOSE_BUTTON_ON_PLAYER_CLASS_NAME).hover(function(){h();a.vars.isFeedbackClosed&&a.showFeedbackLink(a.vars.feedbackContainer,a.vars.playerContainer)})}};this.toggleLightboxCloseButton=function(b){0<a.dom.$wrapper.find("."+f.LB_CLOSE_BUTTON_ON_PLAYER_CLASS_NAME).length&&a.dom.$wrapper.find("."+f.LB_CLOSE_BUTTON_ON_PLAYER_CLASS_NAME).toggleClass("vse-show",
b)};this.feedBackMouseLeaveHandler=function(){a.vars.isFeedbackClosed?a.hideFeedbackLink(a.vars.feedbackContainer,a.vars.playerContainer):a.toggleLightboxCloseButton(!0);a.vars.cursorOnVideoPlayerDiv=!1};this.isSingleVideoLightbox=function(){return 0<a.vars.A.$("#"+a.vars.popoverName+"-wrapper").length?0<=a.vars.A.$("#"+a.vars.popoverName+"-wrapper").attr("data-css-class").indexOf("vse-single-video-lb"):!1};this.showHideElementsForMultiCarousel=function(){a.vars.multiCarouselExpanded?setTimeout(function(){a.A.$("#"+
a.vars.templateId+" ."+f.VIPScrubberClassName).removeClass("aok-hidden");a.A.$("#"+a.vars.templateId+" ."+f.VIPPlayPauseClassName).removeClass("aok-hidden");a.A.$("#"+a.vars.templateId+" "+f.VIPFeedbackContainer).removeClass("aok-hidden");a.A.$("#"+a.vars.templateId+" ."+f.VIPVideoHelpfulVotesClassName).removeClass("aok-hidden")},250):(a.A.$("#"+a.vars.templateId+" ."+f.VIPScrubberClassName).addClass("aok-hidden"),a.A.$("#"+a.vars.templateId+" ."+f.VIPPlayPauseClassName).addClass("aok-hidden"),a.A.$("#"+
a.vars.templateId+" "+f.VIPFeedbackContainer).addClass("aok-hidden"),a.A.$("#"+a.vars.templateId+" ."+f.VIPVideoHelpfulVotesClassName).addClass("aok-hidden"))};this.openCloseMultiCarousel=function(){a.vars.multiCarouselExpanded?(a.vars.hideWatchIcon||a.vars.videoActionTrayComponents.reset(),a.A.$("#"+a.vars.templateId+" "+f.VIPMultiCarouselWrapper).removeClass(f.VIPMultiCarouselExpandedClass),a.showHideElementsForMultiCarousel(),a.resetUserActivityTimer(),a.vars.multiCarouselExpanded=!1,a.vars.keepMultiCarouselOpen=
!1):(a.resetUserActivityTimer(-2),a.A.$("#"+a.vars.templateId+" "+f.VIPMultiCarouselWrapper).addClass(f.VIPMultiCarouselExpandedClass),a.showHideElementsForMultiCarousel(),a.vars.multiCarouselExpanded=!0)};this.isGroupOne=function(b){if(b.groupType)return-1!==b.groupType.indexOf(f.G1);if(!a.vars.A.objectIsEmpty(a.vars.multiCarouselS1))for(var d=a.vars.multiCarouselS1.getplaylist(),h=0;h<d.length;h++)if(d[h].contentId===b.contentId)return!0;return!1};this.isGroupTwo=function(b){if(b.groupType)return-1!==
b.groupType.indexOf(f.G2);if(!a.vars.A.objectIsEmpty(a.vars.multiCarouselS2))for(var d=a.vars.multiCarouselS2.getplaylist(),h=0;h<d.length;h++)if(d[h].contentId===b.contentId)return!0;return!1};this.isInPlayList=function(b){if(!a.vars.A.objectIsEmpty(a.vars.relatedVideosCarousel)&&b)for(var d=a.vars.relatedVideosCarousel.getplaylist(),f=0;f<d.length;f++)if(d[f].contentId===b.contentId)return!0;return!1};this.getActiveAsset=function(){if(a.vars.useMultiCarousel){var b=a.isGroupOne(a.vars.currentAssetSpec),
d=a.isGroupTwo(a.vars.currentAssetSpec),f=a.vars.currentAssetSpec,b=a.vars.A.objectIsEmpty(a.vars.currentAssetSpec)?!1:b,d=a.vars.A.objectIsEmpty(a.vars.currentAssetSpec)?!1:d;b&&!a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)?f=a.vars.multiCarouselS1.getActiveAsset():d&&!a.vars.A.objectIsEmpty(a.vars.multiCarouselS2)&&(f=a.vars.multiCarouselS2.getActiveAsset());return f}return a.vars.A.objectIsEmpty(a.vars.relatedVideosCarousel)?a.vars.currentAssetSpec:a.vars.relatedVideosCarousel.getActiveAsset()!==
r?a.vars.relatedVideosCarousel.getActiveAsset():a.vars.currentAssetSpec};this.getCombinedPlaylist=function(){if(a.vars.useMultiCarousel){var b=[];a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)||(b=b.concat(a.vars.multiCarouselS1.getplaylist()));a.vars.A.objectIsEmpty(a.vars.multiCarouselS2)||(b=b.concat(a.vars.multiCarouselS2.getplaylist()));return b}return a.vars.relatedVideosCarousel.getplaylist()};this.setOrientationConfig=function(b){a.vars.useMultiCarousel?(a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)||
a.vars.multiCarouselS1.setOrientationConfig(b),a.vars.A.objectIsEmpty(a.vars.multiCarouselS2)||a.vars.multiCarouselS2.setOrientationConfig(b)):a.vars.A.objectIsEmpty(a.vars.relatedVideosCarousel)||a.vars.relatedVideosCarousel.setOrientationConfig(b)};this.findIndex=function(b){if(a.vars.useMultiCarousel){var d=a.isGroupOne(b),f=a.isGroupTwo(b);if(!d&&!f)return-1;if(!a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)&&d)return a.vars.multiCarouselS1.findIndex(b);if(!a.vars.A.objectIsEmpty(a.vars.multiCarouselS2)&&
!d)return(a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)?0:a.vars.multiCarouselS1.getplaylist().length)+a.vars.multiCarouselS2.findIndex(b)}else return a.isInPlayList(b)?a.vars.relatedVideosCarousel.findIndex(b):-1};this.markPlaying=function(b){if(b!==r)if(a.vars.useMultiCarousel){var d=a.isGroupOne(b),h=a.isGroupTwo(b),k=a.vars.A.objectIsEmpty(a.vars.currentAssetSpec)?!1:d;!a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)&&d?(a.vars.multiCarouselS1.markPlaying(b),a.vars.A.objectIsEmpty(a.vars.multiCarouselS2)||
k||a.dom.$wrapper.find(f.VIPMultiCarouselTwoContainer).find(".vse-video-card").removeClass("active")):!a.vars.A.objectIsEmpty(a.vars.multiCarouselS2)&&h&&(a.vars.multiCarouselS2.markPlaying(b),!a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)&&k&&a.dom.$wrapper.find(f.VIPMultiCarouselOneContainer).find(".vse-video-card").removeClass("active"))}else a.isInPlayList(b)&&a.vars.relatedVideosCarousel.markPlaying(b)};this.rotateTo=function(b){if(a.vars.useMultiCarousel){a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)||
a.vars.multiCarouselS1.removeActive();a.vars.A.objectIsEmpty(a.vars.multiCarouselS2)||a.vars.multiCarouselS2.removeActive();var d=a.isGroupOne(b);a.vars.A.objectIsEmpty(a.vars.currentAssetSpec)||a.isGroupOne(a.vars.currentAssetSpec);!a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)&&d?a.vars.multiCarouselS1.rotateTo(b):a.vars.A.objectIsEmpty(a.vars.multiCarouselS2)||a.vars.multiCarouselS2.rotateTo(b)}else a.vars.A.objectIsEmpty(a.vars.relatedVideosCarousel)||a.vars.relatedVideosCarousel.rotateTo(b)};
this.updateVotingElements=function(b,d,f){a.vars.useMultiCarousel?(b=a.isGroupOne(b),!a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)&&b?a.vars.multiCarouselS1.updateVotingElements(d,f):a.vars.A.objectIsEmpty(a.vars.multiCarouselS2)||a.vars.multiCarouselS2.updateVotingElements(d,f)):a.vars.A.objectIsEmpty(a.vars.relatedVideosCarousel)||a.vars.relatedVideosCarousel.updateVotingElements(d,f)};this.updateVotingElementsForCountAndStatus=function(b,d,f){a.vars.useMultiCarousel?(b=a.isGroupOne(b),!a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)&&
b?a.vars.multiCarouselS1.updateVotingElementsForCountAndStatus(d,f):a.vars.A.objectIsEmpty(a.vars.multiCarouselS2)||a.vars.multiCarouselS2.updateVotingElementsForCountAndStatus(d,f)):a.vars.A.objectIsEmpty(a.vars.relatedVideosCarousel)||a.vars.relatedVideosCarousel.updateVotingElementsForCountAndStatus(d,f)};this.initializeMultiCarousel=function(b,d){a.emitRelatedVideosRenderMetric(f.METRIC_WATCH_THUMBNAIL_RENDER,d);b=b?f.VIPMultiCarouselOneContainer:f.VIPMultiCarouselTwoContainer;a.dom.$wrapper.delegate(b,
"touchstart",function(b){a.vars.multiCarouselExpanded&&(a.vars.keepMultiCarouselOpen=!0,a.resetUserActivityTimer(-2),b.stopPropagation())});a.dom.$wrapper.delegate(b,"touchend",function(b){a.vars.multiCarouselExpanded&&(a.vars.keepMultiCarouselOpen=!1,a.resetUserActivityTimer(-2),b.stopPropagation())})};this.relatedVideosCarouselNotEmpty=function(){return!a.vars.A.objectIsEmpty(a.vars.relatedVideosCarousel)||!a.vars.A.objectIsEmpty(a.vars.multiCarouselS1)||!a.vars.A.objectIsEmpty(a.vars.multiCarouselS2)};
this.toggleSingleLbCssClass=function(b){!a.vars.isMobile&&a.dom.$wrapper&&a.dom.$wrapper.closest(f.LightboxWrapperSelector)&&a.dom.$wrapper.closest(f.LightboxWrapperSelector).toggleClass(f.SINGLE_VIDEO_LB_CSS_CLASS,b)&&setTimeout(function(){return a.vars.A.trigger("resize",{},{width:h.innerWidth,height:h.innerHeight})},200)};this.vars={A:b,$:b.$,isMobile:!1,player:null,feedback:null,clientPrefix:null,placement:null,containerId:null,contentId:null,productAsin:null,playerFactory:null,ingressRelatedVideosCarousel:null,
relatedVideosCarousel:null,keepCarouselOpenOnLinkClick:!1,watchAllClicked:!1,keepProductCarouselOpenOnClick:!1,videoVoteContainerFactory:null,activeVideoVoteContainer:null,isMshop:!1,isContinuousPlayFinished:!1,isFeedbackClosed:!0,showVotes:!1,defaultEntityId:f.EMPTY_STRING,videoVoteFailure:!1,videoVoteConfig:null,currentAssetSpec:null,initialVideo:null,relatedProductsNilgiriRequestCount:0,popoverId:null,relatedProductsRequest:null,cursorOnVideoPlayerDiv:!1,lightBoxPausedVideo:!1,verticalLightBoxMaxWidth:1024,
relatedProductsContainerFixedHeight:115,currentIndex:0,socialSharePageState:null,mShopFactory:null,lightboxOpened:!1,lightboxCarouselRegistered:!1,playFullScreenVideo:!1,ingressHasInitialAssetSpec:!0,playlist:null,isVideoImmersivePlayer:!1,secondsFromLastActivity:0,intervalUserActivityHandlerId:0,isVIPOverlayTimerSet:!1,isVIPOverlayOnTapEventRegistered:!1,lightboxOpenedFirstTime:!0,videoActionTrayComponents:null,socialShareId:null,ingressCarousel:null,ingressPlaylist:null,widgetStartTime:0,isMetricRecorded:!1,
carouselPageSize:0,nextPage:0,previousPage:0,vipVideoDuration:0,isScrubbing:!1,vipControlsShouldPause:!0,vipPlayPauseToggle:null,shouldShowProfiles:!1,popoverName:null,isUpNextComponentActive:!1,upNextTimeoutHandle:null,useUpNextComponent:!1,upNextString:f.EMPTY_STRING,cancelString:f.EMPTY_STRING,watchIconFirstOpen:!0,shopIconFirstOpen:!0,manualTriggerWatchIcon:!1,manualTriggerShopIcon:!1,customerReviewsConfig:null,useAutoplayFallback:!1,vipPlayIconClicked:!1,contentIdProductAsinMap:{},showLightboxV2Experience:!1,
playerContainer:null,feedbackContainer:null,showContentCarousel:!0,useMultiCarousel:!1,hideWatchIcon:!1,multiCarouselExpanded:!1,handleMultiCarousel:!0,keepMultiCarouselOpen:!1,multiCarouselS1:null,multiCarouselS2:null,isSwipingMultiCarousel:!1,showPFOOnOverlay:!1,cacheOnProductAsin:!1,onSiteAttributionMetrics:null,useAllIVXComponents:!0,viewportMetaTag:null,viewportMetaTagContent:null,isClosedCaptionEnabled:!1,currentClosedCaptionsLang:null,closedCaptionsConfig:{},closedCaptionsTooltipTimerId:0,
shouldHandleCCForLandscapeVideo:!1,playerUnHoverHandler:function(){},setMaxHeightToLBLeftColumn:!1,seekTime:0,rankingStrategy:f.EMPTY_STRING,videoUrlInlineVideoKey:f.EMPTY_STRING,showMoreMenuExperience:!1,disableFullScreenOnMshop:!1,disableCreatorClicksOnMshop:!1,vipControlsShouldMute:!0,vipMuteUnmuteToggle:null,currentPlayerMode:"",inlinePlayerInitialized:!1,firstRelatedProductOverride:null};this.dom={$wrapper:null,$lbContainer:null,$lbLeftColumn:null,$lbRightColumn:null,$lbCCHeader:null,$lbTabContainer:null,
$videoAuthor:null,$playerContainer:null,$mobileFixedContainer:null,$mobileMovableContainer:null,$relatedProductContainer:null,$activeVideoOspLink:null,$activeVideoTitlePrefix:null,$activeVideoCRLink:null,$lbVideoCarousel:null,$activeVideoCustomerProfile:null,$customerProfileContainer:null,$videoAuthorBlock:null,$activeVideoCRLinkWrapper:null,$profileLinkSelector:null,$followButtonSelector:null,$followEligibleCreator:null};this.refTagRecorder=new J(b)}d.prototype.getAciContentIdFromPlayerInstance=
function(){try{return this.vars.player.player.playerInstance.config.aciContentId}catch(b){l.logError(f.ATTRIBUTION_NAME,"Failed to get aciContentId for the asset: "+this.vars.currentAssetSpec.contentId+" ",b)}};d.prototype.isCustomerReviewVideo=function(b){return"AOD60"==b.vendorCode};d.prototype.isInfluencerVideo=function(b){return b.creatorType?"influencer"===b.creatorType.toLowerCase():!1};return d}(),va=f.VAP_EW+"subcomponent/",ea=function(){function d(){}d.getLazyLoadComponents=function(b,a,
c,f,h){b.$("#"+a+" div[data-configuration]").each(function(){d.callSubComponentBuilder({A:b,context:c,handleFailure:h,handleSuccess:f},b.$(this),3)})};d.callSubComponentBuilder=function(b,a,c){var f=b.A,h=b.context,k=b.handleFailure,g=b.handleSuccess,m=atob(a.attr("data-configuration")),n=JSON.parse(m),m=c,e={pageContext:h,configuration:n},B=f.now();c--;var q=m-c-1;F.sendRequest(f,va+n.type,e,function(b){var c=f.now()-B;l.count("vse_component_lazyLoaderHook:success:",c);l.count("vse_component_lazyLoaderHook:success:"+
h.page+":"+h.placement+":"+n.type+":"+q,1);a.html(b);g(f,e)},function(g){(0===g.http.status||500<=g.http.status&&599>=g.http.status)&&0<c?(l.count("vse_component_lazyLoaderHook:error:"+h.page+":"+h.placement+":"+n.type+":"+q,1),d.callSubComponentBuilder(b,a,c)):(l.count("vse_component_lazyLoaderHook:failure",1),k(f,e))})};return d}();try{var wa=function(d){return new d(function(b,a){t.when("A","a-carousel-framework","a-carousel-constants","3p-promise","a-button","ready").register("VSEComponentAssets",
function(a,d,m,k,g){return{setClientPrefix:function(b,n){var e=new da(a);e.vars.clientPrefix=b;e.vars.setMaxHeightToLBLeftColumn=n.setMaxHeightToLBLeftColumn||!1;e.vars.templateId=n.templateId;e.vars.showLightboxV2Experience=n.showLightboxV2Experience||!1;e.vars.isMobile=a.capabilities.mobile;e.vars.disableFullScreenOnMshop=n.disableFullScreenOnMshop||!1;e.vars.A.objectIsEmpty(n)||(n.hasOwnProperty(f.IS_VIDEO_IMMERSIVE_PLAYER_KEY)&&(e.vars.isVideoImmersivePlayer=n.isVideoImmersivePlayer),n.hasOwnProperty(f.SHOW_CONTENT_CAROUSEL)&&
(e.vars.showContentCarousel=n.showContentCarousel));a.off("vse:ns:player:"+e.vars.clientPrefix+":init");a.off("vse:ns:metadata:"+e.vars.clientPrefix+":init");a.off("vse:ns:socialShare:"+e.vars.clientPrefix+":init");a.off("vse:ns:feedback:"+e.vars.clientPrefix+":init");a.off("vse:ns:relatedProducts:"+e.vars.clientPrefix+":init");a.off("vse:ns:relatedVideos:"+e.vars.clientPrefix+":init");a.off("vse:ns:relatedVideosVernacularExperience:"+e.vars.clientPrefix+"init");a.off("vse:ns:ingressCarousel:"+e.vars.clientPrefix+
":init");a.off("vse:"+e.vars.clientPrefix+":page:lightBoxOpened");a.off("vse:"+e.vars.clientPrefix+":page:lightBoxClosed");a.off("vse:"+e.vars.clientPrefix+":lazyload:relatedvideos:succeeded");a.off("vse:"+e.vars.clientPrefix+":page:watchAllClicked");a.off("vse:ns:"+e.vars.clientPrefix+":hideAdditionalUXFeatures");a.off("vse:ns:inlinePlayer:"+e.vars.clientPrefix+":init");t.when("mash").execute("VSEComponentAsset-Mash-Detection",function(a){e.vars.isMshop=!0;e.vars.mShopFactory=a});a.on("vse:ns:player:"+
e.vars.clientPrefix+":init",function(d){try{var g=z.fetchLatestPageState(a,d);if(g){l.count(f.PLAYER_INITIALIZED+":"+e.vars.clientPrefix,1);var h=g.awaConfig;e.vars.isMobile=g.isMobile;e.vars.productAsin=g.productAsin;e.vars.playFullScreenVideo=g.enableFullScreenByDefault;e.vars.contentId=h.initialVideo;e.vars.containerId=h.containerId;e.vars.playerContainer="#"+e.vars.containerId+"-container";e.vars.placement=h.nexusMetricsConfig.placementContext;e.vars.nexusMetricsConfig=h.nexusMetricsConfig;e.vars.useUpNextComponent=
h.useUpNextComponent;e.vars.enableClickBasedAttribution=h.enableClickBasedAttribution;e.vars.aciContentId=h.aciContentId;e.vars.linkCode=h.ospLinkCode;e.vars.useAutoplayFallback=h.useAutoplayFallback;e.vars.useUpNextComponent&&(e.vars.upNextString=g.upNextString?g.upNextString:"UP NEXT",e.vars.cancelString=g.cancelString?g.cancelString:"CANCEL");d={gatedP:D,EventEmitter:K,promise:k};var m={videoUrl:g.videoUrl,contentId:e.vars.contentId,vendorCode:g.vendorCode,vendorTrackingId:g.vendorTrackingId,productAsin:g.productAsin,
videoReferenceId:g.videoReferenceId,eventTimestamp:e.vars.A.now(),imageUrl:g.imageUrl,duration:0,refTag:f.EMPTY_STRING,rankingStrategy:f.EMPTY_STRING,aciContentId:g.aciContentId,mimeType:g.mimeType,videoTitle:g.videoTitle,creatorType:g.creatorType};e.setVideoDetails(e.vars.contentId,g);var n=g.initialClosedCaptions;e.vars.A.objectIsEmpty(n)||e.setInitialClosedCaptions(m,n);e.vars.isVideoImmersivePlayer&&e.setupVIPClosedCaptions(g.closedCaptionsConfig,n);h.initialVideo=m;e.vars.playerFactory=new U(d);
if(e.vars.A.objectIsEmpty(g.inlinePlayerConfig)||!0!==g.needPlayerFactory){e.vars.player=e.vars.playerFactory.create(h);!e.vars.isVideoImmersivePlayer&&e.vars.playFullScreenVideo&&(e.vars.player.aspectRatio(e.getAspectRatio(e.getDeviceOrientation())),e.vars.player.fluid(!1));e.vars.isVideoImmersivePlayer&&(e.vars.player.on("playerClick",e.onPlayerTapHandler),e.vars.player.on("texttrackenable",e.onTextTrackEnable),e.vars.useAutoplayFallback&&(e.vars.player.on("autoplayFailed",e._playerFailedAutoplayHandler),
e.vars.player.on("autoplaySucceeded",e._playerSucceededAutoplayHandler)));e.attachPlayerEventListeners();if(e.vars.A.objectIsEmpty(h.osaInstrumentationConfig))l.count(e.vars.clientPrefix+".noOsaInstrumentationConfig",1);else{var E={$container:e.vars.A.$("#"+e.vars.containerId),schemaId:h.osaInstrumentationConfig.schemaId,producerId:h.osaInstrumentationConfig.producerId};e.vars.onSiteAttributionMetrics=new O(E,e.vars.player,e.vars.A,e.vars.isVideoImmersivePlayer,e.vars.clientPrefix)}"nexus"===h.metricsEmissionMethod&&
e.vars.nexusMetricsConfig&&(e.vars.buildNexusPayload=C.makeApplicationNexusPayloadBuilder(e.vars.A,e.vars.nexusMetricsConfig),e.vars.emitMetricsToNexus=!0);e.vars.A.trigger("vsePlayer-"+e.vars.clientPrefix,{player:e.vars.player,containerId:e.vars.containerId});e.vars.A.trigger(e.vars.clientPrefix+":vse:player:registered")}else e.vars.A.trigger("ivePlayerFactory-"+e.vars.clientPrefix,{playerFactory:e.vars.playerFactory})}else l.count(f.PLAYER_PAGE_STATE_NOT_FOUND_ERROR_KEY+":"+e.vars.clientPrefix,
1),e.vars.A.trigger("vse-common-assets-player-"+d+"-initialization-failed")}catch(p){l.logFatal(f.ATTRIBUTION_NAME+":"+e.vars.clientPrefix,"Fatal during player initialization.",p),l.count(b+".playerInitializationFatal",1)}});a.on("vse:ns:metadata:"+e.vars.clientPrefix+":init",function(d){try{var g=z.fetchLatestPageState(a,d);g?(e.vars.defaultEntityId=g.defaultEntityId,g.entityId&&g.entityType&&e.setFollowEntities(g.entityId,g.entityType),e.vars.showUploadDate=g.showUploadDate,e.vars.videoVoteConfig=
g.videoVoteConfig,e.vars.videoVoteConfig=a.$.extend({},e.vars.videoVoteConfig),d={gatedP:D,promise:k},e.vars.videoVoteConfig.hasOwnProperty("placementContext")&&(e.vars.videoVoteConfig.dependencies=d,e.vars.videoVoteContainerFactory=new M(a,e.vars.videoVoteConfig),e.vars.activeVideoVoteContainer=e.vars.videoVoteContainerFactory.createFromSelector("#vse-video-votes-lb-details-"+e.vars.videoVoteConfig.placementContext)),g.nexusMetricsConfig&&(e.vars.nexusMetricsConfig=g.nexusMetricsConfig,e.vars.buildNexusPayload=
C.makeApplicationNexusPayloadBuilder(e.vars.A,e.vars.nexusMetricsConfig),e.vars.emitMetricsToNexus=!0),g.customerReviewConfig&&(e.vars.customerReviewsConfig=g.customerReviewConfig,e.vars.customerReviewsConfig.showCustomerReviewMetadata&&(e.vars.A.delay(function(){e.compactReviewIfNeeded();e.updateReviewsExpandButtonVisibility()},250),e.attachReviewsPlayerEventListeners(),e.vars.A.off("a:declarative:"+e.vars.clientPrefix+"-expand-review-content:click"),e.vars.A.off("a:declarative:"+e.vars.clientPrefix+
"-expand-review-content:touch"),e.vars.A.declarative(e.vars.clientPrefix+"-expand-review-content","click touch",function(a){e.isReviewTextOverflow()&&!e.isReviewTextExpanded()&&(e.vars.$(f.VIPOverlaySelector).addClass("vse-reviews-expand-full-cr"),e.resetReviewTextStyle(),e.styleExpandedReviewText(),e.pauseVideoIfNeeded())}),e.vars.A.off("a:declarative:"+e.vars.clientPrefix+"-collapse-review-content:click"),e.vars.A.off("a:declarative:"+e.vars.clientPrefix+"-collapse-review-content:touch"),e.vars.A.declarative(e.vars.clientPrefix+
"-collapse-review-content","click touch",function(a){e.vars.$(f.VIPOverlaySelector).removeClass("vse-reviews-expand-full-cr");e.vars.$(".vse-reviews-content-ellipsis-wrapper").scrollTop(0);e.resetReviewTextStyle();e.vars.A.animationFrameDelay(function(){e.compactReviewIfNeeded();e.updateReviewsExpandButtonVisibility()});e.vars.vipControlsShouldPause&&e.resumeVideoIfNeeded()}),e.vars.A.on("resize",e.handleReviewsOnResize))),e.vars.A.trigger(e.vars.clientPrefix+":vse:metadata:registered")):(l.count(f.METADATA_PAGE_STATE_NOT_FOUND_ERROR_KEY+
":"+e.vars.clientPrefix,1),e.vars.A.trigger("vse-common-assets-metadata-"+d+"-initialization-failed"))}catch(h){l.logFatal(f.ATTRIBUTION_NAME+":"+e.vars.clientPrefix,"Fatal during metadata initialization.",h),l.count(b+".metadataInitializationFatal",1)}});a.on("vse:ns:socialShare:"+e.vars.clientPrefix+":init",function(d){try{var g=z.fetchLatestPageState(a,d);g?(e.vars.socialSharePageState=d,e.vars.socialShareId=g.id,e.vars.A.off("a:declarative:"+e.vars.clientPrefix+"-social-share-mshop-action:click"),
e.vars.A.off("a:declarative:"+e.vars.clientPrefix+"-social-share-mshop-action:touch"),e.vars.A.declarative(e.vars.clientPrefix+"-social-share-mshop-action","click touch",function(a){e.vars.isMshop&&!e.vars.A.objectIsEmpty(e.vars.mShopFactory)&&(a=e.getActiveAsset(),a=e.getMshopShareParams(a),e.vars.mShopFactory.share(a))}),e.vars.isMobile||(a.off("a:popover:afterShow:"+e.vars.socialShareId+"-popover"),a.on("a:popover:afterShow:"+e.vars.socialShareId+"-popover",function(){e.emitClickMetric(f.METRIC_SHARE_ICON)})),
e.vars.A.off("a:declarative:"+e.vars.clientPrefix+"-swf-share-network:click"),e.vars.A.declarative(e.vars.clientPrefix+"-swf-share-network","click",function(a){a=a.data;var b=e.vars.A.state(e.vars.socialSharePageState);fa.share(b,a.network);l.count(f.socialShareClickMetricName,1);e.emitClickMetric(f.METRIC_SHARE_SELECTION_CLICK)}),e.vars.A.trigger(e.vars.clientPrefix+":vse:socialShare:registered")):(l.count(f.SOCIAL_SHARE_STATE_NOT_FOUND_ERROR_KEY+":"+e.vars.clientPrefix,1),e.vars.A.trigger("vse-common-assets-social-share-"+
d+"-initialization-failed"))}catch(h){l.logFatal(f.ATTRIBUTION_NAME+":"+e.vars.clientPrefix,"Fatal during socialShare initialization.",h),l.count(b+".socialShareInitializationFatal",1)}});a.on("vse:ns:feedback:"+e.vars.clientPrefix+":init",function(a,c){try{var d=z.fetchLatestPageState(e.vars.A,a);if(d){var h=d.id;e.vars.feedbackContainer="#vse-"+e.vars.clientPrefix+"-feedback-container";e.vars.cursorOnVideoPlayerDiv=!1;e.deRegisterFeedback(h);c="true"===c;e.vars.showMoreMenuExperience=c;e.vars.showMoreMenuExperience&&
e.vars.$(e.vars.feedbackContainer).css({display:"inline-block"});e.vars.A.on("vse:"+h+":feedback:shown",function(){e.pauseVideoIfNeeded();e.vars.isFeedbackClosed=!1;e.vars.$(".vse-fb-copyright").click(function(a){e.vars.isMshop&&e.vars.isVideoImmersivePlayer&&(a.preventDefault(),e.vars.feedback.showInfringementNotSupport())});e.vars.$(".vse-fb-report-illegal-content").click(function(a){e.vars.isMshop&&e.vars.isVideoImmersivePlayer&&(e.vars.feedback.closeFeedbackForm(),e.openExternalLinkFromLightBox(a))});
e.vars.showMoreMenuExperience?e.vars.$("#vse-report-trigger").click(function(a){a.preventDefault();e.emitClickMetric(f.METRIC_REPORT_CLICK)}):e.emitClickMetric(f.METRIC_REPORT_CLICK)});e.vars.A.off("vse:"+h+":feedback:submitted:success");e.vars.A.on("vse:"+h+":feedback:submitted:success",function(){e.emitClickMetric(f.METRIC_REPORT_SUBMIT);l.count(f.METRIC_REPORT_SUBMIT,1)});e.vars.A.on("vse:"+h+":feedback:hidden",function(){e.vars.vipControlsShouldPause&&e.resumeVideoIfNeeded();e.vars.isFeedbackClosed=
!0;e.vars.showMoreMenuExperience?e.vars.isVideoImmersivePlayer||e.vars.cursorOnVideoPlayerDiv||e.hideFeedbackLink(e.vars.feedbackContainer,e.vars.playerContainer):e.vars.cursorOnVideoPlayerDiv||e.hideFeedbackLink(e.vars.feedbackContainer,e.vars.playerContainer);e.vars.showMoreMenuExperience&&e.vars.$("#vse-report-trigger").unbind("click");e.vars.$(".vse-fb-copyright").unbind("click");e.vars.isMshop&&e.vars.mShopFactory&&e.vars.A.delay(function(){e.vars.mShopFactory.dispatchEvent({type:"appOverlays.Hide"})},
500)});var k=new oa({A:e.vars.A,buttonApi:g});e.vars.feedback=k.create(h,a,c);e.updateFeedback(e.vars.currentAssetSpec);e.vars.isFeedbackClosed=!0;var m=e.vars.A.$(e.vars.feedbackContainer);e.vars.showMoreMenuExperience&&e.vars.isVideoImmersivePlayer?e.vars.A.$("#"+e.vars.templateId+" .vse-lb-actions-container").prepend(m):e.vars.A.$(e.vars.playerContainer).append(m);e.vars.isVideoImmersivePlayer||(e.vars.A.declarative.create(e.vars.$(e.vars.playerContainer),"feedback-overlays-player",{}),e.vars.A.declarative("feedback-overlays-player",
"mouseenter touchstart focus",function(){e.vars.isFeedbackClosed&&e.showFeedbackLink(e.vars.feedbackContainer,e.vars.playerContainer);e.vars.cursorOnVideoPlayerDiv=!0;e.vars.A.capabilities.touch&&e.vars.A.delay(e.feedBackMouseLeaveHandler,3E3)}),e.vars.A.declarative("feedback-overlays-player","mouseleave",e.feedBackMouseLeaveHandler));e.vars.A.trigger(e.vars.clientPrefix+":vse:feedback:registered")}else l.count(f.FEEDBACK_PAGE_STATE_NOT_FOUND_ERROR_KEY+":"+e.vars.clientPrefix,1),e.vars.A.trigger("vse-common-assets-feedback-"+
a+"-initialization-failed")}catch(n){l.logFatal(f.ATTRIBUTION_NAME+":"+e.vars.clientPrefix,"Fatal during feedback initialization.",n),l.count(b+".feedbackInitializationFatal",1)}});a.on("vse:ns:relatedProducts:"+e.vars.clientPrefix+":init",function(a){try{!e.vars.isVideoImmersivePlayer||!e.vars.A.objectIsEmpty(e.vars.videoActionTrayComponents)&&e.vars.useMultiCarousel||(e.initializeVideoActionTray(null,a),setTimeout(function(){return e.handleKeepProductCarouselOpen()},500))}catch(c){l.logFatal(f.ATTRIBUTION_NAME+
":"+e.vars.clientPrefix,"Fatal during related products initialization.",c),l.count(b+".relatedProductsInitializationFatal",1)}});a.on("vse:ns:relatedVideos:"+e.vars.clientPrefix+":init",function(g){try{var n=z.fetchLatestPageState(a,g);if(n){var x=new N(d,m,a,{gatedP:D,promise:k});e.vars.useMultiCarousel=n.useMultiCarousel;e.vars.emitMetricsToNexus=e.vars.nexusMetricsConfig?!0:!1;e.vars.enableMultiplePFOImpressions=n.enableMultiplePFOImpressions;e.vars.emitMetricsToNexus&&(e.vars.buildNexusPayload=
C.makeApplicationNexusPayloadBuilder(e.vars.A,e.vars.nexusMetricsConfig));e.vars.hideWatchIcon=n.hideWatchIcon;e.vars.disableCreatorClicksOnMshop=n.disableCreatorClicksOnMshop;d.createAll();d.initializeAll();e.vars.useMultiCarousel?(e.vars.multiCarouselS2=null,-1!==n.carouselName.indexOf("-G2")?(e.vars.multiCarouselS2=x.create(n),e.initializeMultiCarousel(!1,e.vars.multiCarouselS2)):(e.vars.multiCarouselS1=x.create(n),e.initializeMultiCarousel(!0,e.vars.multiCarouselS1)),e.vars.A.objectIsEmpty(e.vars.multiCarouselS1)||
e.vars.A.objectIsEmpty(e.vars.multiCarouselS2)||e.vars.A.$("#"+e.vars.templateId+" "+f.VIPMultiCarouselWrapper).addClass("vse-vip-two-carousels"),e.vars.handleMultiCarousel&&(e.dom.$wrapper.delegate(f.VIPMultiCarouselWrapper,"click touchstart",function(a){if(!e.vars.keepMultiCarouselOpen){if(e.vars.multiCarouselExpanded&&e.vars.$(f.vernacLanguageRadioBlockSelector).length)return!0;a.stopPropagation();a.preventDefault();e.openCloseMultiCarousel()}}),e.vars.handleMultiCarousel=!1)):e.vars.relatedVideosCarousel=
x.create(n);e.vars.A.on("vse:contentCarousel:"+n.carouselName+":click",function(b){e.vars.A.objectIsEmpty(e.vars.player)||(null!=e.vars.onSiteAttributionMetrics&&e.vars.onSiteAttributionMetrics.emitCarouselClickEvent(),e.vars.player.play(b),a.trigger("vse:ns:partialcomponents:"+e.vars.clientPrefix+":relatedvideos:click",b),e.vars.currentIndex=e.findIndex(b),e.vars.showVotes=e.shouldShowVotes(b),e.show(b),e.vars.currentAssetSpec=b,e.vars.showLightboxV2Experience&&e.resizeLB(),e.vars.useMultiCarousel&&
e.vars.multiCarouselExpanded&&e.openCloseMultiCarousel(),e.emitClickMetric(f.METRIC_LB_THUMBNAIL_CLICK),e.vars.isVideoImmersivePlayer&&(e.vars.isUpNextComponentActive&&e.removeUpNextComponent(),e.vars.videoActionTrayComponents.updateActiveVideoContentId(b),e.resetUserActivityTimer(),e.showVideoImmersivePlayerOverlay(),e.vars.isVIPOverlayTimerSet||(e.vars.intervalUserActivityHandlerId=e.userActivityCountDown()),e.vars.videoActionTrayComponents.reset(),e.emitClickMetric(f.METRIC_WATCH_THUMBNAIL_CLICK)))});
e.vars.A.on("vse:ns:partialcomponents:"+e.vars.clientPrefix+":relatedvideos:rotate",function(a){e.vars.currentIndex=e.findIndex(a);a=e.getCurrentlyPlayingVideoInCarousel(e.vars.currentIndex);e.show(a)});if(e.isImageBlockVIP()||-1==e.vars.currentIndex)e.vars.currentIndex=e.findIndex(e.vars.currentAssetSpec);var v=-1==e.vars.currentIndex?e.vars.currentAssetSpec:e.getCurrentlyPlayingVideoInCarouselMarkAsPlaying(e.vars.currentIndex);if(v!==r){e.vars.useAllIVXComponents&&e.updateVideoMetadataIfNeeded(v);
e.markPlaying(v);e.vars.initialVideo=v;e.vars.showVotes=e.shouldShowVotes(v);e.initializeHelpfulVotes();e.createContinuousPlayPlaylist(v);e.updateFeedback(v);e.refreshSocialSharePageState(v);e.vars.isVideoImmersivePlayer?(!e.vars.A.objectIsEmpty(e.vars.videoActionTrayComponents)&&e.vars.useMultiCarousel||e.initializeVideoActionTray(n.segmentTabs,n.carouselCardWidth),e.updateSegmentTab(v),e.vars.videoActionTrayComponents.updateActiveVideoContentId(v.contentId),e.emitRelatedVideosRenderMetric(f.METRIC_WATCH_THUMBNAIL_RENDER,
e.vars.relatedVideosCarousel),e.vars.keepCarouselOpenOnLinkClick=n.keepCarouselOpenOnLinkClick,e.vars.watchAllClicked?e.handleKeepVideoCarouselOpen():e.handleKeepProductCarouselOpen()):(1===e.vars.playlist.length?a.trigger("vse:ns:relatedVideos:"+e.vars.clientPrefix+":hide"):e.toggleSingleLbCssClass(!1),e.attachStickyHeaders());e.vars.shouldShowProfiles=n.includeProfiles;-1==e.vars.currentIndex&&(e.isInfluencerVideo(v)||e.isCustomerReviewVideo(v))&&(e.vars.shouldShowProfiles=!0);e.vars.shouldShowProfiles&&
(e.getCustomerProfileDomElements(),e.isCustomerReviewVideo(v)&&e.updateCustomerProfile(v),e.isInfluencerVideo(v)&&e.updateInfluencerProfile(v),e.dom.$activeVideoCustomerProfile.delegate(".vse-profile","click",function(a){e.vars.disableCreatorClicksOnMshop?e.preventExternalLinkClick(a):(a=e.vars.$(a.target).closest("."+f.VIPVideoInfoClassName).find(".vse-profile").attr("href"),e.openExternalLinkFromLightBox(a))}),e.dom.$activeVideoCustomerProfile.delegate(".vse-link","click",function(a){a=e.vars.$(a.target).closest("."+
f.VIPVideoInfoClassName).find(".vse-link").attr("href");e.openExternalLinkFromLightBox(a)}),a.trigger("resize",{},{width:h.innerWidth,height:h.innerHeight}));e.vars.lightboxCarouselRegistered=!0;var t=document.querySelectorAll("#"+e.vars.popoverId+" li.vse-video-card");!e.vars.carouselIntersectionObserver&&t&&h.IntersectionObserver&&(e.vars.carouselIntersectionObserver=new ca(null,t,e.onIntersectionObserved));e.vars.A.trigger(e.vars.clientPrefix+":vse:relatedVideos:registered")}}else e.vars.showVotes=
!1,l.count(f.RV_PAGE_STATE_NOT_FOUND_ERROR_KEY+":"+e.vars.clientPrefix,1),e.vars.A.trigger("vse-common-assets-carousel-"+g+"-initialization-failed")}catch(E){l.logFatal(f.ATTRIBUTION_NAME+":"+e.vars.clientPrefix,"Fatal during Lightbox carousel initialization.",E),l.count(b+".lightboxCarouselInitializationFatal",1)}});a.on("vse:"+e.vars.clientPrefix+":page:watchAllClicked",function(){e.vars.watchAllClicked=!0});a.on("vse:ns:relatedVideosVernacularExperience:"+e.vars.clientPrefix+":init",function(){a.declarative("onSelectVideoLanguage",
"change",function(a){a=e.vars.$("input:radio[name\x3d'videoLanguage']:checked").val();a===f.HINDI?(e.vars.$("#"+f.relatedEnglishVideosContainer).addClass("aok-hidden"),e.vars.$("#"+f.relatedHindiVideosContainer).removeClass("aok-hidden")):a===f.ENGLISH&&(e.vars.$("#"+f.relatedHindiVideosContainer).addClass("aok-hidden"),e.vars.$("#"+f.relatedEnglishVideosContainer).removeClass("aok-hidden"))})});a.on("vse:"+e.vars.clientPrefix+":seeMoreBlock:init",function(a,b){e.vars.isMobile&&e.vars.popoverId&&
(e.vars.$("#"+e.vars.popoverId).find(f.VIPShopIconBlockSelector).addClass("aok-hidden"),e.vars.$("#"+e.vars.popoverId).find(f.VIPSeeMoreBlockSelector).removeClass("aok-hidden"),e.vars.$("#"+e.vars.popoverId).find(f.VIPSeeMoreLinkSelector).attr("href",a),e.vars.$("#"+e.vars.popoverId).find(f.VIPSeeMoreTextSelector).text(b),e.vars.$("#"+e.vars.popoverId).find(".vse-airy-container").addClass("vse-spotlight-player-container"),e.vars.$("#"+e.vars.popoverId).find(".vse-vip-action-tray").addClass("vse-spotlight-vip-action-tray"))});
a.on("vse:ns:"+e.vars.clientPrefix+":hideAdditionalUXFeatures",function(){e.vars.$("#"+e.vars.popoverId).find(f.VIPShareIconBlockSelector).addClass("aok-hidden");e.vars.$("#"+e.vars.popoverId).find("."+f.VIPVideoHelpfulVotesClassName).css({display:"none",visibility:"hidden"})});a.on("vse:ns:ingressCarousel:"+e.vars.clientPrefix+":init",function(g,h){try{e.vars.widgetStartTime=h;var n=a.now(),r=z.fetchLatestPageState(a,g);if(r){e.vars.popoverName=r.lightboxPopoverConfig.popoverId;var t=e.vars.popoverName+
"-trigger",E=e.vars.popoverName+"-wrapper",u=new N(d,m,a,{gatedP:D,EventEmitter:K,promise:k});e.vars.ingressCarousel=u.create(r);if(e.vars.A.objectIsEmpty(e.vars.ingressCarousel))throw new H("Cannot create Ingress Carousel. Carousel is null or undefined");e.vars.ingressPlaylist=e.vars.ingressCarousel.getplaylist();e.vars.A.on(e.vars.A.constants.BROWSER_EVENTS.SCROLL,e.vseCsmWidgetLoadedMetrics);e.vseCsmWidgetLoadedMetrics();e.vars.modalFactory=e.getModalFactory();a.on("vse:contentCarousel:"+r.carouselName+
":click",function(b){var d=e.vars.modalFactory&&e.vars.modalFactory.get(e.vars.$("#"+t));l.count(""+e.vars.clientPrefix+f.METRIC_WIDGET_CLICK,1);d?(d.show(),a.off("a:popover:afterShow:"+e.vars.popoverName),a.on("a:popover:afterShow:"+e.vars.popoverName,function(d){a.$(d.popover.$popover).addClass(a.$("#"+E).data("cssClass"));a.trigger("vse:"+e.vars.clientPrefix+":page:lightBoxOpened",{assetSpec:b,lightBoxId:E})})):l.count(f.LB_POPOVER_NOT_FOUND_ERROR_KEY+":"+e.vars.clientPrefix,1)});a.on("a:popover:beforeHide:"+
e.vars.popoverName,function(){a.objectIsEmpty(e.vars.ingressCarousel)||e.vars.ingressCarousel.destroy();a.trigger("vse:"+e.vars.clientPrefix+":page:lightBoxClosed")});var y=a.now();l.count(b+".requestToReadyDuration",y-h);l.count(b+".requestToInitDuration",n-h);l.count(b+".initToReadyDuration",y-n);a.$("#vse-spinner").addClass("aok-hidden");e.vars.A.trigger(e.vars.clientPrefix+":vse:ingressCarousel:registered")}else e.vars.showVotes=!1,l.count(f.INGRESS_RV_PAGE_STATE_NOT_FOUND_ERROR_KEY+":"+e.vars.clientPrefix,
1),e.vars.A.trigger("vse-common-assets-carousel-"+g+"-initialization-failed")}catch(C){l.logFatal(f.ATTRIBUTION_NAME+":"+e.vars.clientPrefix,"Fatal during Ingress carousel initialization.",C),l.count(b+".ingressCarouselInitializationFatal",1),e.vars.A.hide("#"+e.vars.clientPrefix+f.INGRESS_CAROUSEL_SUFFIX)}});a.on("vse:"+e.vars.clientPrefix+":page:lightBoxOpened",function(d){if(!0===d.enableClickBasedAttribution||!1===d.enableClickBasedAttribution)e.vars.enableClickBasedAttribution=d.enableClickBasedAttribution;
!e.vars.aciContentId&&d.assetSpec&&d.assetSpec.aciContentId&&(e.vars.aciContentId=d.aciContentId);var g=e.vars.A.now();d.player&&d.templateId&&(e.vars.player=d.player,e.vars.useAllIVXComponents=!1,e.vars.templateId=d.templateId);e.vars.firstRelatedProductOverride=d.firstRelatedProductOverride;e.vars.lightboxOpened=!0;e.vars.popoverId=d.lightBoxId;e.vars.A.objectIsEmpty(d.assetSpec)&&(e.vars.ingressHasInitialAssetSpec=!1);d.lazyLoadProductAsin&&(e.vars.lightboxCarouselRegistered=!1);e.vars.lightboxCarouselRegistered?
(e.vars.ingressHasInitialAssetSpec?(e.vars.currentIndex=e.findIndex(d.assetSpec),e.vars.currentAssetSpec=e.getCurrentlyPlayingVideoInCarouselMarkAsPlaying(e.vars.currentIndex),e.vars.seekTime=d.assetSpec.seekTime,e.vars.videoUrlInlineVideoKey=d.assetSpec.videoUrl):(e.vars.currentAssetSpec=e.getActiveAsset(),e.vars.currentIndex=e.vars.currentAssetSpec.index),e.createContinuousPlayPlaylist(e.vars.currentAssetSpec)):(e.vars.seekTime=e.vars.ingressHasInitialAssetSpec?d.assetSpec.seekTime:d.seekTime,e.vars.rankingStrategy=
e.vars.ingressHasInitialAssetSpec?d.assetSpec.rankingStrategy:d.rankingStrategy,e.vars.videoUrlInlineVideoKey=e.vars.ingressHasInitialAssetSpec?d.assetSpec.videoUrl:d.videoUrl,e.vars.currentIndex=e.vars.ingressHasInitialAssetSpec&&!d.lazyLoadProductAsin?d.assetSpec.index:0,e.vars.currentAssetSpec=e.vars.ingressHasInitialAssetSpec?d.assetSpec:e.vars.initialVideo,e.vars.ingressHasInitialAssetSpec&&e.vars.initialVideo&&(e.vars.A.objectIsEmpty(e.vars.currentAssetSpec.vendorName)&&(e.vars.currentAssetSpec.vendorName=
e.vars.initialVideo.vendorName,e.vars.currentAssetSpec.entityId=e.vars.initialVideo.entityId,e.vars.currentAssetSpec.entityType=e.vars.initialVideo.entityType),e.vars.A.objectIsEmpty(e.vars.currentAssetSpec.closedCaptions)&&(e.vars.currentAssetSpec.closedCaptions=e.vars.initialVideo.closedCaptions)));d.initialRelatedProducts&&(e.vars.currentAssetSpec.relatedProducts=d.initialRelatedProducts);e.vars.currentAssetSpec&&e.vars.A.objectIsEmpty(e.vars.currentAssetSpec.rankingStrategy)&&(e.vars.currentAssetSpec.rankingStrategy=
e.vars.rankingStrategy);e.vars.lightboxOpenedFirstTime&&(e.getDomElements(e.vars.popoverId,e.vars.templateId),e.vars.isMobile||(e.dom.$wrapper.closest(f.LightboxWrapperSelector).addClass(e.dom.$wrapper.attr("class")),e.addPlayerHoverHandler()),e.vars.showContentCarousel||(e.vars.showVotes=e.shouldShowVotes(e.vars.currentAssetSpec),e.initializeHelpfulVotes()));e.vars.A.capabilities.mobile&&!e.vars.A.capabilities.isAmazonApp&&e.vars.$("body").scrollTop(1);e.vars.$("body").addClass("vse-lb-no-scroll");
e.vars.$("#"+e.vars.popoverId).addClass("vse-lb-opened");e.show(e.vars.currentAssetSpec);e.vars.lightboxOpenedFirstTime?(a.trigger("resize",{},{width:h.innerWidth,height:h.innerHeight}),e.vars.isVideoImmersivePlayer||e.setupDefaultClosedCaptions()):e.resizeLB();e.attachStickyHeaders();if(e.vars.isVideoImmersivePlayer){var k=a.capabilities.isAmazonApp?"vse-vip-lb-mshop":"vse-vip-lb-mweb";e.vars.$(f.VIPLightboxSelector).addClass(k);e.vars.$("#"+e.vars.popoverId).closest(".a-popover-secondary").addClass("vse-vip");
a.capabilities.ios&&(e.vars.$(f.VIPLightboxSelector).addClass("vse-ivx-ios"),e.vars.viewportMetaTag=e.vars.$('meta[name\x3d"viewport"]'),e.vars.viewportMetaTagContent=e.vars.viewportMetaTag.attr("content"));e.needToUpdateVideoInfoLater()?e.clearCurrentVideoInfo():(e.resetUserActivityTimer(),e.showVideoImmersivePlayerOverlay());e.vars.useAutoplayFallback||(e.vars.intervalUserActivityHandlerId=e.userActivityCountDown());e.vars.useAllIVXComponents&&e.initializeVIPControls();e.updateAudioToggleStatus();
e.vars.lightboxOpenedFirstTime||(e.vars.useMultiCarousel||e.updateSegmentTab(e.vars.currentAssetSpec),e.vars.lightboxCarouselRegistered&&e.vars.videoActionTrayComponents.updateActiveVideoContentId(e.vars.currentAssetSpec.contentId),e.vars.watchAllClicked?e.handleKeepVideoCarouselOpen():e.handleKeepProductCarouselOpen());a.delay(function(){e.vars.$("body").addClass("vse-vip-body")},250);e.emitMetric(f.METRIC_VIP_OPEN)}e.vars.currentAssetSpec&&!e.vars.currentAssetSpec.eventTimestamp&&(e.vars.currentAssetSpec.eventTimestamp=
g);e.vars.currentAssetSpec.seekTime=e.vars.seekTime;e.vars.A.delay(function(){e.dom.$wrapper.find(".vse-lb-container").animate({opacity:1},200);e.vars.useAllIVXComponents&&(e.emitEventDurationMetric(f.METRIC_OPEN_LIGHTBOX_EVENT_EXECUTION,e.vars.A.now()-g),e.startPlaying(e.vars.currentAssetSpec))},200);e.dom.$activeVideoOspLink.unbind("click").click(function(a){e.vars.disableCreatorClicksOnMshop?e.closeIXVAndTriggerDisclosureEvent(a):e.openExternalLinkFromLightBox(a)});e.dom.$activeVideoCRLink.click(function(a){a=
e.vars.$(a.target).closest(".vse-cr-link").attr("href");e.openExternalLinkFromLightBox(a)});!e.vars.isMobile&&e.vars.placement&&-1!==e.vars.placement.toLowerCase().indexOf("search")&&e.vars.$("#"+e.vars.popoverId).closest(f.LightboxWrapperSelector).addClass("vse-responsive-lightbox");e.vars.isMobile&&e.vars.placement&&-1!==e.vars.placement.toLowerCase().indexOf("search")&&e.vars.$("#"+e.vars.popoverId).closest(f.LightboxWrapperSelector).removeClass("vse-responsive-lightbox").removeClass("vse-vertical-lightbox").addClass("vse-vip");
e.isImageBlockVIP()&&e.vars.$("#"+e.vars.popoverId).closest(".video-immersive-view-gallery").addClass("vse-vip");t.when("mash").execute("vse-mash-detection",function(a){e.vars.isMshop=!0;e.vars.mShopFactory=a;e.vars.disableFullScreenOnMshop||e.requestMshopFullscreen()});l.count(f.LB_OPENED+":"+e.vars.clientPrefix,1);var m=z.fetchLatestPageState(a,e.vars.templateId+"-lazyload-request-ps");if(e.vars.A.objectIsEmpty(m))e.vars.lightboxOpenedFirstTime=!1,l.count(f.LAZY_LOAD_PAGE_STATE_NOT_FOUND_ERROR_KEY+
":"+e.vars.clientPrefix,1);else{var k=function(a,c){e.vars.A.trigger("vse:"+b+":lazyload:"+c.configuration.type+":succeeded")},n=function(a,c){e.vars.A.trigger("vse:"+b+":lazyload:"+c.configuration.type+":failed")};e.vars.lightboxOpenedFirstTime?(m=a.$.extend({video:{contentID:e.vars.currentAssetSpec.contentId,contentIDType:"ASIN",videoURL:e.vars.currentAssetSpec.videoUrl,imageURL:e.vars.currentAssetSpec.imageURL}},m),d.lazyLoadProductAsin&&(m.product.contentID=d.lazyLoadProductAsin),ea.getLazyLoadComponents(e.vars.A,
e.vars.popoverId,m,k,n),e.vars.lightboxOpenedFirstTime=!1):d.lazyLoadProductAsin&&(m.product.contentID=d.lazyLoadProductAsin,ea.getLazyLoadComponents(e.vars.A,e.vars.popoverId,m,k,n));e.emitMetric(f.METRIC_LIGHTBOX_OPEN)}});a.on("vse:"+e.vars.clientPrefix+":page:lightBoxClosed",function(){e.vars.lightboxOpened&&(e.vars.lightboxOpened=!1,e.vars.ingressHasInitialAssetSpec=!0,a.trigger("inlineVideo:immersiveViewClosed",{videoUrl:e.vars.videoUrlInlineVideoKey,seekTime:e.vars.player.getCurrentTime()}),
e.dom.$wrapper.find(".vse-lb-container").animate({opacity:0}),e.vars.$("body").removeClass("vse-lb-no-scroll"),e.resetStickyHeaders(),e.vars.useAllIVXComponents&&e.vars.player.pause(),e.vars.isVideoImmersivePlayer&&(e.vars.$("body").removeClass("vse-vip-body"),e.clearIntervalUserActivityHandler(),null!=e.vars.videoActionTrayComponents&&e.vars.videoActionTrayComponents.reset(),e.emitMetric(f.METRIC_VIP_CLOSE),e.vars.useAutoplayFallback&&!e.vars.vipPlayIconClicked&&(e.emitMetric(f.METRIC_VIP_CLOSE_WITHOUT_PLAY),
l.count(e.vars.clientPrefix+":"+f.METRIC_VIP_CLOSE_WITHOUT_PLAY,1)),e.resetVIPControls(),e.vars.useMultiCarousel&&e.vars.multiCarouselExpanded&&e.openCloseMultiCarousel(),e.vars.isMshop&&!e.vars.disableFullScreenOnMshop&&e.cancelMshopFullscreen(),e.vars.A.$("#"+e.vars.templateId+" ."+f.UpNextCancelClassName).click()),e.vars.customerReviewsConfig&&e.vars.customerReviewsConfig.showCustomerReviewMetadata&&e.vars.A.off("resize",e.handleReviewsOnResize),a.trigger("vse:ns:partialcomponents:"+e.vars.clientPrefix+
":lightboxClosed"))});a.on("vse:"+e.vars.clientPrefix+":lazyload:relatedvideos:succeeded",function(){e.resizeLB();e.emitPFORenderMetric(f.METRIC_PFO_RENDER)});a.on("vse:"+e.vars.clientPrefix+":lazyload:relatedvideos:failed",function(){e.vars.isVideoImmersivePlayer?e.vars.A.hide(e.vars.A.$("#"+e.vars.templateId+" "+f.VIPWatchIconBlockSelector)):e.vars.A.hide(e.vars.A.$("#"+e.vars.templateId+" div[class^\x3d'div-'][class$\x3d'lb'] .vse-lazyload-spinner"))});a.on("vse:ns:relatedVideos:"+e.vars.clientPrefix+
":hide",function(){e.vars.lightboxOpened&&e.vars.isVideoImmersivePlayer?e.vars.A.hide(e.vars.A.$("#"+e.vars.templateId+" "+f.VIPWatchIconBlockSelector)):e.toggleSingleLbCssClass(!0)});a.on("resize",function(){e.vars.lightboxOpened&&e.resizeLB()});a.on.orientationchange(function(a){!e.vars.isVideoImmersivePlayer&&e.vars.playFullScreenVideo&&(0===a.orientation?e.vars.player.aspectRatio(e.getAspectRatio(f.PORTRAIT)):e.vars.player.aspectRatio(e.getAspectRatio(f.LANDSCAPE)));e.vars.isMobile&&e.vars.lightboxOpened&&
(e.vars.$("#"+e.vars.popoverId).height(h.innerHeight),e.dom.$lbContainer.height(h.innerHeight))});a.on("vse:ns:inlinePlayer:"+e.vars.clientPrefix+":init",function(b){try{var d=z.fetchLatestPageState(a,b.pageStateName),g=new ba(a,e,b),h=a.$("#"+d.inlinePlayerConfig.lightboxClickHandlerSelector),k=b.popoverId&&b.popoverTriggerId;k&&g.addLightboxAfterShowAndBeforeHideEvents();g.initializePlayerOverlayComponents(h);var m={playerInstance:e.vars.player,changePlayerMode:g.changePlayerMode,startPlaying:g.startPlaying};
k?m.openLightbox=g.openLightbox:(m.movePlayerToLightbox=g.movePlayerToLightbox,m.movePlayerToIngress=g.movePlayerToIngress);d.needPlayerFactory?(m.playerFactoryConfig={playerFactory:e.vars.playerFactory,playerConfig:d,addPlayerLoadedHandler:g.addPlayerLoadedHandler},m.playerInstance=r,a.trigger("vse:ns:inlinePlayer:factory:"+e.vars.clientPrefix+":ready",m)):(g.addPlayerLoadedHandler(),a.trigger("vse:ns:inlinePlayer:"+e.vars.clientPrefix+":ready",m),l.count("vse:ns:inlinePlayer:initSuccess",1))}catch(n){l.count("vse:ns:inlinePlayer:"+
e.vars.clientPrefix+":initFailed",1),l.logError(f.ATTRIBUTION_NAME,"Fallback for inline player "+e.vars.clientPrefix,n),a.trigger("vse:ns:inlinePlayer:"+e.vars.clientPrefix+":initFailed",n),l.count("vse:ns:inlinePlayer:initFailed",1)}})},TestModules:ta,Utils:da,_noneFeature:b()}})})};t.when("A","3p-promise").execute("VSE-gatedP-register-VSEComponentAssets-client",function(d,b){D.register("VSEComponentAssets","VSE-VSEComponentAssets-client-registered",wa,b)});t.when("A","a-carousel-constants","a-carousel-framework",
"a-carousel-transition-slide").execute("vse-video-carousel-transition-registration",function(d,b,a,c){var f=h.vseFeatures||{};f["vse-video-carousel-transition-strategy"]||(d=new aa(d,b,c),a.registerStrategy("transition","vse-video-carousel-transition",d.get()),f["vse-video-carousel-transition-strategy"]=!0)});t.when("A","a-carousel-framework","a-carousel-constants").execute("vse-display-strategy-registration",function(d,b,a){var c=h.vseFeatures||{};c["vse-video-carousel-display-strategy"]||(d=new Z(d,
a),b.registerStrategy("display","vse-video-carousel-display",d),c["vse-video-carousel-display-strategy"]=!0)})}catch(d){l.logError(f.ATTRIBUTION_NAME,"Error during VSE AUI module registration.",d),l.count(f.ATTRIBUTION_NAME+".moduleFatal",1)}})()});