(()=>{function e(e){return e&&e.__esModule?e.default:e}var t=function(e){return e.replace(/_/g,":")},n=/(\/b|\/s|\/l).*(node=)(\d{1,12})/,i=new Map,a=function(){if(!i.has(window.location.href)){var e=n.exec(window.location.href),t=e&&e[3]?e[3]:null;i.set(window.location.href,t)}return i.get(window.location.href)},o=function(e){var t=a();if(!e||!t)return null;var n=e.split(":");return n.splice(n.length-1,0,t),n.join(":")},s=function(e){var t=a();return t?"".concat(e,":").concat(t):null},r={wb:"ues",bb:"uet",af:"uet",cf:"uet",be:"uet",ld:"uex"},d=function(e){var n,i,a=e.latencyEvent,r=e.scope,d=e.placement,p=e.timestamp;l(a)&&(c(a,m(r),d.id,p),c(a,m(r),t(d.name),p),c(a,m(r),null!==(n=o(d.name))&&void 0!==n?n:void 0,p),c(a,m(r),null!==(i=s(d.id))&&void 0!==i?i:void 0,p))},l=function(e){return"function"==typeof window[r[e]]},c=function(e,t,n,i){void 0===i&&(i=new Date);var a=r[e];n&&"function"==typeof window[a]&&window[a](e,t+n,{wb:1},i)},m=function(e){return"adplacements:"+p(e)},p=function(e){return e?"".concat(e,":"):""},h=function(e,t){console.error(e),w("ERROR",e,v(e,t))},u=function(e,t){console.error(e),w("FATAL",e,v(e,t))},w=function(e,t,n){var i;null===(i=window.ueLogError)||void 0===i||i.call(window,n,{logLevel:e,attribution:"APE-safeframe",message:t+" | "})},v=function(e,t){return t instanceof Error?t:t?new Error(t):new Error(e)},f=function(e,t,n){if(window.csa)try{window.csa("Content",{element:e})("mark",t,null==n?void 0:n.getTime())}catch(i){h("Error with 'mark' CSA",i)}};class g{sendLatencyMetric({latencyMetricType:e,placementId:t,placementName:n,placementDivId:i,timestamp:a}){d({latencyEvent:e.csmKey,scope:e.csmMessage,placement:{id:t,name:n},timestamp:a}),f(document.getElementById(i),e.csaKey,a)}}const y=()=>new g;var b=function(e,t,n){if(""===t)throw new Error("Invalid queryParamKey input to addJSONQueryParamToURL: "+JSON.stringify({queryParamKey:t}));var i=new URL(e),a=i.searchParams.get(t),o=a||"{}",s=JSON.parse(o),r=Object.assign(s,n);return i.searchParams.set(t,JSON.stringify(r)),i.toString()};function I(e,t,n){var i,a=n||{},o=a.noTrailing,s=void 0!==o&&o,r=a.noLeading,d=void 0!==r&&r,l=a.debounceMode,c=void 0===l?void 0:l,m=!1,p=0;function h(){i&&clearTimeout(i)}function u(){for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];var r=this,l=Date.now()-p;function u(){p=Date.now(),t.apply(r,a)}function w(){i=void 0}m||(d||!c||i||u(),h(),void 0===c&&l>e?d?(p=Date.now(),s||(i=setTimeout(c?w:u,e))):u():!0!==s&&(i=setTimeout(c?w:u,void 0===c?e-l:e)))}return u.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;h(),m=!n},u}const S="com.amazon.ads.cpp.",A=(e,t)=>`${S}${e}.${t}`;class E{*[Symbol.iterator](){for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(null==t?void 0:t.startsWith(S)){const n=localStorage.getItem(t);if(localStorage.removeItem(t),e=-1,null===n)continue;yield[t,n]}}}}const T=(e,t,n)=>{localStorage.setItem(A(e,t),n)},D=(e,t,n)=>(...i)=>{try{e(...i)}catch(a){null==t||t(n||"Error in handler",a)}},M=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/,k=e=>M.test(e),L=e=>k(e)?z(e):e,x=e=>k(e)?e:_(e),_=e=>btoa(unescape(encodeURIComponent(e))),z=e=>decodeURIComponent(escape(atob(e))),N=e=>e&&0===Object.keys(e).length&&e.constructor===Object,H=e=>{return t=e.slotName,["mobile-auto-top-advertising-0","auto-top-advertising-0"].includes(t)?e.renderingId:e.placementName;var t},R=(e,t)=>{var n,i;const a=e,o=a[t].options;if(N(a)||N(o))return null;const s=`ape_${H(o)}_iframe`;return a[t].iframe&&(a[t].iframe=(null===(i=a[t])||void 0===i||null===(n=i.iframe)||void 0===n?void 0:n.innerHTML)?a[t].iframe:document.getElementById(s)),a[t].iframe},C=[{p:50,t:2,def:"iab"}],F=[{p:0,t:0,def:"amzn"},{p:50,t:1,def:"iab"},{p:100,t:1,def:"groupm"}],O=[{p:0,t:0,def:"amzn"},{p:30,t:1,def:"iab"},{p:100,t:1,def:"groupm"}],$=()=>window.innerHeight||document.documentElement.clientHeight,W=()=>window.innerWidth||document.documentElement.clientWidth,B=e=>e.getBoundingClientRect().top-$(),U=(e,t)=>({t:e.top,l:e.left,r:e.right,b:e.bottom,w:e.width,h:e.height,z:t}),q=e=>{const t=e.getBoundingClientRect();return U(t,Number(window.getComputedStyle(e,null).zIndex))},j=e=>{const t=G(e);return{t:e.t,l:e.l,r:e.r,b:e.b,w:e.w,h:e.h,z:e.z,xiv:t.xiv,yiv:t.yiv,iv:t.iv}},V=()=>{const e=window.screenY?window.screenY:window.screenTop,t=window.screenX?window.screenX:window.screenLeft,n=W(),i=$();return{t:e,l:t,w:n,h:i,b:e+i,r:t+n}},J=e=>{const t=V(),n=(e=>j(q(e)))(e),i=K(e);return{atf:Y(e),geom:{win:t,self:n,exp:i},payload:{wh:t.h,ww:t.w,sx:window.scrollX,sy:window.scrollY,ah:n.h,aw:n.w,top:n.t,left:n.l}}},Y=e=>{const t=function(e){const t=document.body.getBoundingClientRect();if(X(t))return null;const n=q(e),i=$(),a=W(),o=Math.max(0,Math.min(t.left+a,n.r)-n.l),s=Math.max(0,Math.min(t.top+i,n.b)-n.t),r=o*s/(n.h*Math.min(n.w,a));return Number(Math.min(1,Math.max(0,r)).toFixed(2))}(e);return null==t?"unknown":t>=.5},X=e=>0===e.width&&0===e.height;const G=e=>{const t=W(),n=$(),i=Math.max(0,ee(e.t,e.b,n)),a=Math.max(0,ee(e.l,e.r,t)),o=i*a,s=e.h*Math.min(e.w,t);return 0!==s||0!==o?{xiv:Number(Math.min(1,a/e.w).toFixed(2)),yiv:Number(Math.min(1,i/e.h).toFixed(2)),iv:Number(Math.min(1,Math.max(0,o/s)).toFixed(2))}:{xiv:0,yiv:0,iv:0}},K=e=>{const t=e.getBoundingClientRect();return Z(t)},Z=e=>({t:e.top,l:e.left,r:W()-e.right,b:$()-e.bottom,xs:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>W()?1:0,yx:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>$()?1:0}),Q=e=>Z(e),ee=(e,t,n)=>{let i=0;return"visible"!==document.visibilityState?i:(i=e>0?n-e:t>0?Math.min(t,n):0,Math.min(i,t-e))},te=(e,t)=>{const n=q(e),i=q(t),a=W(),o=$();return n&&i&&(Math.abs(n.t-i.b)<o||Math.abs(n.b-i.t)<o)&&(Math.abs(n.l-i.r)<a||Math.abs(n.r-i.l)<a)},ne=(e,t)=>{const n=parseInt(t.height)*parseInt(t.width)>=242500;return"V"===e?C:n?O:F},ie=e=>{const t=ae(e),n=V(),i=j(U(t,NaN));return{atf:"unknown",geom:{win:n,self:i,exp:Q(t)},payload:{wh:n.h,ww:n.w,sx:window.scrollX,sy:window.scrollY,ah:i.h,aw:i.w,top:i.t,left:i.l}}},ae=e=>{const t=e.initialBoundingRect,n=t.top-(window.scrollY-e.originalScrollY),i=n+e.adHeight,a=t.left-(window.scrollX-e.originalScrollX);return{top:n,bottom:i,left:a,right:a+e.adWidth,width:e.adWidth,height:e.adHeight}},oe="localstorage_impression",se=(e,t)=>{const n=document.createElement("img");return n.id=e,n.style.display="none",n.setAttribute("pixel-url",t),n},re="localstorage:impression",de=async(e,t)=>{let n,i;return new Promise((a=>{i=a,n=new IntersectionObserver((t=>{t.forEach((t=>{t.target===e&&t.isIntersecting&&(i(t),n.unobserve(e))}))}),t),n.observe(e)}))};var le;le=function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(i){return!1}};const ce="sfImpression",me="LightAdImpression",pe="viewablelatency",he=(e,t,n)=>({csaKey:e,csmKey:t,csmMessage:n}),ue=he("bodyBegin","bb",ce),we=(he("bodyBegin","bb",me),he("bodyEnd","be"),he("clickToATF","af"),he("criticalFeature","cf"),he("criticalFeature","cf",ce),he("criticalFeature","cf",me),he("loaded","ld"),he("loaded","ld",ce),he("loaded","ld",me),he("viewablelatency:bodyBegin","bb",pe)),ve=he("viewablelatency:loaded","ld",pe);var fe=function(e,n,i){if(void 0===i&&(i=1),ye()){var a=function(e,t,n){t&&be("".concat(Se(e),":").concat(t),n)};a(e,n.id,i),a(e,s(n.id),i),a(e,t(n.name),i),a(e,o(t(n.name)),i)}},ge=function(e,t){void 0===t&&(t=1),ye()&&be(Se(e),t)},ye=function(){var e;return"function"==typeof(null===(e=null===window||void 0===window?void 0:window.ue)||void 0===e?void 0:e.count)},be=function(e,t){var n;return null===(n=null===window||void 0===window?void 0:window.ue)||void 0===n?void 0:n.count(e,t)},Ie="adplacements",Se=function(e){return e.startsWith(Ie)?e:"".concat(Ie,":").concat(e)};const Ae=e=>null==e?void 0:e.replace("criticalFeature","").replace("windowOnLoad","").replace("spATFEvent","").replace("r2OnLoad","").replace("aboveTheFold","").replace("af",""),Ee=e=>{const t=Ae(e);return""===t||"immediate"===t},Te=async(e,t)=>{e=Ae(null!=e?e:"");const n="undefined"!=typeof P,i=/^reached(\d{1,5}px)FromTop$/g.exec(e);if(!Ee(e)){if(e.match("[^:]+:.+")){const t=e.split(":"),i=t[1],a=t.length>2?t[2]:i;if(n)return await new Promise((e=>P.when(a,"A").execute(e)));throw new Error("Need AUI or AmazonJQ installed")}return e.match(/^\d{1,4}px$/g)?await Me(parseInt(e,10),t,((e,t)=>{const n=B(e);return e&&n<=t})):i?await Me(parseInt(i[1],10),t,De):void h(`Unknown delay pattern ${e}`)}},De=(e,t)=>window.scrollY+$()>=t,Me=async(e,t,n)=>new Promise((i=>{const a=()=>{n(t,e)&&(i(),window.removeEventListener("scroll",o),window.removeEventListener("resize",o))},o=D(I(20,(()=>{a()})),h);window.addEventListener("scroll",o),window.addEventListener("resize",o),a()})),ke=(e,t,n,i,a,o)=>{const s=null==e?void 0:e[t];(null==s?void 0:s.valid)&&(s.loaded=!0,s.viewed&&(y().sendLatencyMetric({latencyMetricType:ve,placementId:i,placementName:n,placementDivId:a,timestamp:new Date(o)}),fe("htmlviewed:loaded",{id:i,name:n})))},Le=e=>{window.addEventListener("scroll",e),window.addEventListener("resize",e),document.addEventListener("visibilitychange",e)};var Pe=function(e){if(window.csa)try{window.csa("Events",{producerId:"adplacements"})("setEntity",{adCreativeMetaData:e})}catch(t){h("Error with 'setEntity' CSA",t)}},xe=function(e,t,n){if(void 0===n&&(n=1),window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t.name+":"+t.id,metricValue:n},{ent:"all"})}catch(i){h("Error with 'logCsaEvent' CSA",i)}},_e=function(e,t){if(void 0===t&&(t=1),window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e,metricValue:t},{ent:"all"})}catch(n){h("Error with 'incrementCounter' CSA",n)}};const ze=async(e,t,n,i)=>{n.options.firePixelsAfter&&await Te(n.options.firePixelsAfter,n.placement),await Ce(t.adMap,n.options.arid),e.sendMessageToAd(n.options.arid,"fireImpression",i),Ne(e,t,n,i)},Ne=(e,t,n,i)=>{i.isNoInventory?Re(e,t,n):He(e,t,n)},He=(e,t,n)=>{Fe(e,t.adMap,n.options.arid);const i=t.ADS_HANDLERS[n.options.arid];i.viewabilityTracker=()=>{I(50,Fe)(e,t.adMap,n.options.arid)},Le(i.viewabilityTracker);new IntersectionObserver((()=>{Fe(e,t.adMap,n.options.arid)}),{threshold:[0,.5,1]}).observe(n.placement)},Re=(e,t,n)=>{const i=$e(t.adMap,n.options.arid);t.adMap[n.options.arid].noInventorySlotSnapshot=i,Oe(e,t.adMap,n.options.arid,i),e.sendMessageToAd(n.options.arid,"handleFallbackBehavior",{});const a=t.ADS_HANDLERS[n.options.arid];a.noInventoryViewabilityTracker=()=>{I(20,Oe)(e,t.adMap,n.options.arid,i)},Le(a.noInventoryViewabilityTracker)},Ce=async(e,t)=>{const n=R(e,t),i={root:document.documentElement};await de(n,i)},Fe=(e,t,n)=>{const i=t[n].options,a=R(t,n),o=ne(i.mediaType,i.size);if(a){const t=J(a);t.viewabilityStandards=o,e.sendMessageToAd(n,"updateViewability",t)}},Oe=(e,t,n,i)=>{const a=t[n].options,o=ne(a.mediaType,a.size),s=ie(i);s.viewabilityStandards=o,e.sendMessageToAd(n,"updateViewability",s)},$e=(e,t)=>{const n=R(e,t);return{initialBoundingRect:(i=n).getBoundingClientRect(),adHeight:i.offsetHeight,adWidth:i.offsetWidth,originalScrollX:window.scrollX,originalScrollY:window.scrollY};var i},We=e=>{try{Ue(e,document.body),ge(re,1),_e(oe)}catch(t){ge("localstorage:error",1),_e("localstorage_error")}},Be=()=>{if(e(le)("localStorage"))for(const e of new E){const t=e[1];We(t)}},Ue=async(e,t)=>{const n=b(e,"pj",{measurementMethod:"cod_client"});try{await fetch(n,{keepalive:!0,mode:"no-cors",priority:"low"}),t.appendChild(se("ape_impression",n)),ge(re+"loaded"),_e(oe+"loaded")}catch(i){throw ge(re+"error"),_e(oe+"error"),i}ge("impressionFired")},qe=e=>!e||je(e)||Ve(e)?e:e+"px",je=e=>e.length>1&&"%"===e.charAt(e.length-1),Ve=e=>e.length>2&&"px"===e.substring(e.length-2),Je=e=>je(e)?e:`${parseInt(e)}px`;const Ye=(e,t)=>{for(const n of Object.keys(t))e.style[n]=t[n];return e},Xe=(e,t,n,i,a,o)=>{try{var s;const r=Ze(e,o),d=Qe(e,o)||r,l=et(e,o);if(null===d||null===r||null===l)return void h("Unable to find wrapper, placement, or safe frame iframe",new Error("resizeSafeFrameAd error"));const c=je(n),m=je(t),p=!m&&!c,u=parseInt(t,10);let w=m?l.offsetWidth:u,v=c?l.offsetHeight:parseInt(n,10);const f=parseInt(i,10),g=e=>{p&&(v=tt({height:v,width:w,targetWidth:e})),w=Math.round(e)},y=0===d.offsetWidth?W():d.offsetWidth;f&&$()<W()?g(f):g(y);const b=null==a||null===(s=a.adMap[e])||void 0===s?void 0:s.noInventorySlotSnapshot;b&&(b.adHeight=v,b.adWidth=w);const I=qe(w),S=qe(p?v:n);if(l.style.height=S,l.style.width=I,d!==r){r.style.height=S;const t={width:I,height:S};a.sendMessageToAd(e,"resizeCreativeWrapper",t)}"Detail_hero-quick-promo_Desktop"===o[e].slotId&&(fe("OffsetLeft",{id:a.adMap[e].options.placementId,name:o[e].slotId},l.offsetLeft),fe("OffsetTop",{id:a.adMap[e].options.placementId,name:o[e].slotId},l.offsetTop),fe("OffsetWidth",{id:a.adMap[e].options.placementId,name:o[e].slotId},l.offsetWidth),fe("OffsetHeight",{id:a.adMap[e].options.placementId,name:o[e].slotId},l.offsetHeight))}catch(r){h("Error resizing ad: "+o[e].slotId,r)}},Ge=(e,t,n)=>{const i=Qe(e,t)||Ze(e,t),a=et(e,t),o=n.resizePlacementStyleAboveThreshold,s=n.resizePlacementStyleBelowThreshold,r=parseInt(n.resizePlacementWidthThreshold,10);i&&a&&r&&o&&s?i.offsetWidth<r?Ye(a,s):Ye(a,o):h("Missing arguments in setResizePlacementStyle",new Error("setResizePlacementStyle error"))},Ke=(e,t,n)=>{const i=et(e,t);i.style.height=qe(n),i.style.zIndex="2",i.style.position="relative"},Ze=(e,t)=>document.getElementById(t[e].placementDivId),Qe=(e,t)=>{var n;return(null===(n=t[e])||void 0===n?void 0:n.wrapperDivId)?document.getElementById(t[e].wrapperDivId):null},et=(e,t)=>document.getElementById(t[e].iframeId),tt=({height:e,width:t,targetWidth:n})=>0===t||isNaN(e)||isNaN(t)||isNaN(n)?0:Math.round(n*e/t),nt=(e,t)=>{e&&(e.style.height=qe(t))},it="expanded-feedback-label",at="expanded-safeframe",ot="expandable-ads-styles",st=(e,t)=>{const n=et(e,t),i=rt(n);if(null===i||null===n)throw new Error(`feedbackWrapper: ${i?"present":"missing"}, safeFrame: ${n?"present":"missing"}`);i.classList.add(it),n.classList.add(at)},rt=e=>(null==e?void 0:e.parentElement).querySelector("div[id$=placement_Feedback]"),dt=(e,t)=>{const n=et(e,t),i=rt(n);null!==i&&null!==n&&(i.classList.remove(it),n.classList.remove(at))},lt=(e,t)=>{((e,t)=>{if(null!==document.querySelector(`#${ot}`))return;const n=document.createElement("style");n.id=ot,n.innerHTML=`\n        div.${it} {\n            background-color: white;\n            z-index: 2;\n            height: 30px !important;\n            top: 0px !important;\n        }\n        iframe.${at} {\n            display: block;\n            padding: 0px !important;\n            max-height: none !important;\n        }`;const i=Ze(e,t);if(null===i)throw new Error(`Failed to append styles for expandable ads for ${t[e].placementDivId}`);i.appendChild(n)})(e,t)},ct=(e,t)=>(e.staticHeight?parseInt(e.staticHeight,10):0)+(je(e.width)?parseInt(e.height,10):tt({height:parseInt(e.height,10),width:parseInt(e.width,10),targetWidth:t})),mt=(e,t,n)=>{const i=i=>{pt(i,e,t),n(e)};window.addEventListener("scroll",i,{once:!0}),window.addEventListener("click",i,{once:!0}),window.addEventListener("swipe",i,{once:!0}),window.addEventListener("tap",i,{once:!0})},pt=(e,t,n)=>{n.sendMessageToAd(t.options.arid,"triggerEventInIframe",{eventType:e.type})},ht=(e,t)=>{pt(new Event("click"),e,t)},ut=e=>e+"_Feedback",wt=e=>ut(e)+"_Hidden";class vt{constructor(e,t){this.weblabsWindow=e,this.prefix=t,this.isT1=()=>"t1"===this.weblabTreatment(),this.isT2=()=>"t2"===this.weblabTreatment(),this.isT3=()=>"t3"===this.weblabTreatment(),this.isT4=()=>"t4"===this.weblabTreatment(),this.isT5=()=>"t5"===this.weblabTreatment(),this.weblabTreatment=()=>{var e,t,n;return null===(n=this.weblabsWindow)||void 0===n||null===(t=n.renderingWeblabs)||void 0===t||null===(e=t[this.prefix])||void 0===e?void 0:e.toLowerCase()}}}const ft=()=>new vt(window,"ADPT_SF_TRANSPARENCY_INFO_MANDATORY_FOR_EU_712921"),gt=()=>new vt(window,"ADPT_SF_RESIZE_ASPECT_RATIO_909226"),yt=()=>new vt(window,"ADPT_SF_DEFAULT_SPONSORED_LABEL_863363").isT1();class bt{async addSponsoredLabelWithFeedbackLink(e,t){yt()||e.appendChildTo(this.parentHtmlId,this);const n=await t.getSponsoredLabelAndFeedbackLink(this.urlPathAndParameter);if(!(null==n?void 0:n.isOk()))throw new Error(`Result from the feedback service was not ok ${this.urlPathAndParameter}`);yt()?e.appendSponsoredLabel(this,n):e.updateElement(this.getHtmlId(),n)}getHtmlId(){return ut(this.parentHtmlId)}getHiddenHtmlId(){return wt(this.parentHtmlId)}isHidden(){return this.hidden}exists(e){return yt()?e.exists(this.getHiddenHtmlId()):e.exists(this.getHtmlId())}constructor(e,t,n,i,a,o,s){this.parentHtmlId=e,this.feedbackStyle=t,this.labelText=n,this.labelStyle=i,this.position=a,this.urlPathAndParameter=o,this.hidden=s}}class It{open(e){e.clickChildLink(this)}getHtmlId(){return ut(this.parentHtmlId)}getHiddenHtmlId(){return wt(this.parentHtmlId)}constructor(e){this.parentHtmlId=e}}class St{async createSponsoredLabelWithFeedbackLink(e,t){if(!e.exists(this.feedbackHtmlPort)){t.request();try{await e.addSponsoredLabelWithFeedbackLink(this.feedbackHtmlPort,this.feedbackApiPort),t.success(),e.isHidden()||t.labelRenderedHost()}catch(n){throw t.error(),n}}}openModal(e){e.open(this.feedbackHtmlPort)}labelRendered(e){e.labelRenderedCreative()}removeSponsoredLabelAndFeedbackLink(e){try{var t;null===(t=document.getElementById(ut(e)))||void 0===t||t.remove()}catch(n){h("Unable to remove AdFeedback Div",n)}}logTransparencyInfoMissing(e){e.transparencyInfoMissing()}getSponsoredLabelElement(e){return document.getElementById(`${ut(e)}_Label`)}constructor(e,t){this.feedbackHtmlPort=e,this.feedbackApiPort=t}}const At=e=>new Rt(e),Et="adfeedback_request",Tt="adfeedback_success",Dt="adfeedback_error",Mt="adfeedback_sponsoredlabelrendered_creative",kt="adfeedback_sponsoredlabelrendered_host",Lt="adfeedback:request",Pt="adfeedback:success",xt="adfeedback:error",_t="adfeedback:sponsoredlabelrendered:creative",zt="adfeedback:sponsoredlabelrendered:host",Nt="adfeedback:sponsoredlabelrendered",Ht="adfeedback:transparencyinfo:missing";class Rt{request(){fe(Lt,this.placement),ge(Lt),xe(Et,this.placement)}success(){fe(Pt,this.placement),ge(Pt),xe(Tt,this.placement)}error(){fe(xt,this.placement),xe(Dt,this.placement)}labelRenderedCreative(){fe(_t,this.placement),ge(Nt),xe(Mt,this.placement)}labelRenderedHost(){fe(zt,this.placement),ge(Nt),xe(kt,this.placement)}transparencyInfoMissing(){fe(Ht,this.placement),ge(Ht)}constructor(e){this.placement=e}}class Ct{isOk(){return"ok"===this.status}constructor(e,t,n){this.status=e,this.html=t,this.script=n}}class Ft{async getSponsoredLabelAndFeedbackLink(e){const t=await fetch(this.windowRepo.origin()+e);if(t.ok){const e=await t.json();return new Ct(e.status,e.html,e.script)}throw Error("Could not fetch the feedback html/link/script/label")}constructor(e){this.windowRepo=e}}class Ot{appendChildTo(e,t){var n,i;function a(e){const t=document.createElement("div");return t.setAttribute("id",e.getHtmlId()),gt().isT1()?(t.style.position="relative",t.style.height="20px",t.style.textAlign=t.id.includes("hero-quick-promo_Desktop_placement_Feedback")?"left":"right",t.style.padding="0 5px",t.style.marginTop="2px",t.style.display=e.feedbackStyle.display):$t(t,e.feedbackStyle),t.append(function(e){const t=document.createElement("div");return t.innerHTML=e.labelText,$t(t,e.labelStyle),t}(e)),t}1===t.position?null===(n=document.getElementById(e))||void 0===n||n.prepend(a(t)):0===t.position&&(null===(i=document.getElementById(e))||void 0===i||i.append(a(t)))}updateElement(e,t){const n=document.getElementById(e);if(n&&(n.innerHTML=t.html,Wt(n,t),gt().isT1()))for(const i of n.children)"DIV"===i.tagName?i.removeAttribute("style"):"A"===i.tagName&&(i.style.removeProperty("position"),i.style.removeProperty("top"),i.style.removeProperty("right"),i.style.removeProperty("display"))}clickChildLink(e){const t=yt()?document.getElementById(e.getHiddenHtmlId()):document.getElementById(e.getHtmlId());for(const i of(null==t?void 0:t.children)||[])if("A"===(n=i).tagName||"DIV"===n.tagName)return void i.click();var n}exists(e){return!!document.getElementById(e)}appendSponsoredLabel(e,t){const n=document.getElementById(e.getHtmlId());if(!n)return void h(`Error in looking for html element ${e.getHtmlId()} to append`);n.append(((e,t)=>{const n=document.createElement("div");return n.setAttribute("id",e.getHiddenHtmlId()),$t(n,e.feedbackStyle),n.innerHTML=t.html,Wt(n,t),n})(e,t))}}const $t=(e,t)=>{for(const n in t)e.style.setProperty(n,t[n])},Wt=(e,t)=>{Bt(e).innerHTML=t.script},Bt=e=>{const t=document.createElement("script");return e.prepend(t),t},Ut={code:"BE",hostname:"www.amazon.com.be",name:"Belgium"},qt={code:"FR",hostname:"www.amazon.fr",name:"France"},jt={code:"DE",hostname:"www.amazon.de",name:"Germany"},Vt={code:"IT",hostname:"www.amazon.it",name:"Italy"},Jt={code:"NL",hostname:"www.amazon.nl",name:"Netherlands"},Yt={code:"PL",hostname:"www.amazon.pl",name:"Poland"},Xt={code:"ES",hostname:"www.amazon.es",name:"Spain"},Gt={code:"SE",hostname:"www.amazon.se",name:"Sweden"},Kt=e=>location.hostname===e.hostname,Zt=e=>!(Kt(Ut)||Kt(qt)||Kt(jt)||Kt(Vt)||Kt(Jt)||Kt(Yt)||Kt(Xt)||Kt(Gt))||Qt(e),Qt=e=>{var t,n,i,a,o,s;const r=[];tn(null==e||null===(i=e.url)||void 0===i||null===(n=i.parameters)||void 0===n||null===(t=n.adPlacementMetaData)||void 0===t?void 0:t.slotName)&&r.push("DSA Error: slotName missing");const d=null==e||null===(s=e.url)||void 0===s||null===(o=s.parameters)||void 0===o||null===(a=o.adCreativeMetaData)||void 0===a?void 0:a.adCreativeDetails;(!d||d.length<=0)&&r.push("DSA Error: transparency info missing"),null==d||d.every((e=>en(e,r)));for(const l of r)for(let e=0;e<nn();e++)h(l);return r.length<=0},en=(e,t)=>{var n,i,a,o,s;e.version||t.push("DSA Error: version missing"),tn(e.advertiserIdNS)&&t.push("DSA Error: advertiserIdNS missing"),void 0!==(null===(n=e.selectionSignals)||void 0===n?void 0:n.context)&&null!==(null===(i=e.selectionSignals)||void 0===i?void 0:i.context)||t.push("DSA Error: selectionSignals.context missing"),void 0!==(null===(a=e.selectionSignals)||void 0===a?void 0:a.location)&&null!==(null===(o=e.selectionSignals)||void 0===o?void 0:o.location)||t.push("DSA Error: selectionSignals.location missing"),tn(null===(s=e.selectionSignals)||void 0===s?void 0:s.pastActivity)&&t.push("DSA Error: selectionSignals.pastActivity missing")},tn=e=>!e||e.length<=0,nn=()=>ft().isT1()?2:ft().isT2()?4:ft().isT3()?8:ft().isT4()?16:ft().isT5()?32:1,an=()=>new on(new St(new Ot,new Ft({origin:()=>window.location.origin})));class on{async addSponsoredLabel({parentHtmlId:e,placement:t,feedback:n}){return Zt(n)?(n.hidden&&(Object.assign(n.style,{display:"none"}),Object.assign(n.label.style,{display:"none"})),await this.feedbackService.createSponsoredLabelWithFeedbackLink(sn(e,n),At(t)),!0):(this.feedbackService.logTransparencyInfoMissing(At(t)),h("Transparency Information missing"),!1)}openModal(e){this.feedbackService.openModal(new It(e))}labelRendered({placement:e}){this.feedbackService.labelRendered(At(e))}removeSponsoredLabelAndFeedbackLink(e){this.feedbackService.removeSponsoredLabelAndFeedbackLink(e)}addSponsoredLabelClickHandler({parentHtmlId:e,placement:t,feedback:n}){try{return this.feedbackService.getSponsoredLabelElement(e).addEventListener("click",(async()=>{await this.addSponsoredLabel({parentHtmlId:e,placement:t,feedback:n}),P.when("A").execute((()=>this.openModal(e)))})),!0}catch(i){return h("Error adding click handler on GPAT Generated Sponsored Label",i),!1}}constructor(e){this.feedbackService=e}}const sn=(e,t)=>{const n=JSON.parse(JSON.stringify(t.url.parameters));return n.adPlacementMetaData.pageUrl=x(n.adPlacementMetaData.pageUrl),new bt(e,t.style,t.label.text,t.label.style,"TOP"===t.position?1:0,(i=t.url.path,a=encodeURIComponent(JSON.stringify(n)),i+"?pl="+a),t.hidden);var i,a},rn=e=>{an().labelRendered({placement:{id:e.options.placementId,name:e.options.placementName}})},dn=e=>{an().openModal(e.options.adPlacementMetaData.adElementId)},ln=e=>{an().removeSponsoredLabelAndFeedbackLink(e.options.adPlacementMetaData.adElementId)},cn=async e=>yt()?Promise.resolve(!0):an().addSponsoredLabel(pn(e)),mn=e=>an().addSponsoredLabelClickHandler(pn(e)),pn=e=>{const t=e.adPlacementMetaData,n=e.adFeedbackInfo;var i;return{parentHtmlId:gt().isT1()?null!==(i=e.adUnitWrapperId)&&void 0!==i?i:e.adUnitPlacementId:t.adElementId,placement:{id:e.placementId,name:e.placementName},feedback:{position:n.adFeedbackOnTop?"TOP":"BOTTOM",hidden:yt()||!n.boolFeedback,style:e.feedbackDivStyle,url:{path:n.endPoint,parameters:{adPlacementMetaData:{adElementId:t.adElementId,pageType:t.pageType,pageUrl:x(t.pageUrl),slotName:t.slotName},adCreativeMetaData:e.adCreativeMetaData}},label:{text:L(n.sponsoredText),style:e.advertisementStyle}}}},hn={};function un(e,t,n){var i;e&&e.id&&!hn[e.id]&&(null===(i=window.P)||void 0===i||i.when("gw-video-orchestrator").execute((i=>{i.subscribe(e,t,n),hn[e.id]=!0})))}let wn=null;function vn(e,t,n){const i=t=>{n.sendCustomMessageToAd(e.options.arid,"videoAutoplayResponse",t)};var a;e.options.expParams&&e.options.expParams.noVideoAutoplay?i(!1):(a=e.options.pageType)&&"gateway"===a.toLowerCase()?un(e.iframe,i,t):wn===e.options.arid?i(!0):null===wn&&function(e){const t=document.getElementsByTagName("video");for(let n=0;n<t.length;++n)if(!t[n].paused&&te(e,t[n]))return!1;return!0}(e.iframe)?(wn=e.options.arid,i(!0)):i(!1)}function fn(){var e;null===(e=window.P)||void 0===e||e.when("gw-video-orchestrator").execute((e=>{e.elect()})),wn=null}function gn(e){var t,n;(t=e.iframe)&&(null===(n=window.P)||void 0===n||n.when("gw-video-orchestrator").execute((e=>{e.elect(t)}))),wn=e.options.arid}var yn=function(e,n,i){bn()&&(In(Sn(e,n.id,i)),In(Sn(e,t(n.name),i)))},bn=function(){var e;return"function"==typeof(null===(e=null===window||void 0===window?void 0:window.ue)||void 0===e?void 0:e.tag)},In=function(e){var t;return null===(t=null===window||void 0===window?void 0:window.ue)||void 0===t?void 0:t.tag(e)},Sn=function(e,t,n){return"".concat(e,":").concat(t).concat(An(n))},An=function(e){return e?":".concat(e):""};const En=(e,t)=>{const n=new Set(["bf4ab3db-618a-4853-ae89-3ad3bd17df16","dd4c5e61-fe9a-4d91-9deb-25fa60557719","da326e4a-90bd-4da3-a526-53301eb2c6a0","ca609359-3cb9-4984-8830-231c22e978d3","15554fd8-4c3e-45c6-ae61-84c65966f5d1","1396c5b8-45a1-4618-9a09-0b84209807f9","d9fb239d-fcde-414f-98a8-409c81052388","b60ea84b-3e24-44dc-9fdb-35bb2fb1fe5c","75b4c7aa-4c22-49d3-8371-15ca116eaf1f","ef368293-2611-4cef-8050-4fcd9b97f12e","db5cbac6-5194-4b52-9929-9ec0bbfed990","6479c6f3-a9c2-4d7c-9d1a-45008113fe0c"]);new vt(window,"ADPT_SF_HOMEPAGE_CARD_THEMING_959278").isT1()&&n.has(e)&&(t&&(t.style.backgroundColor="#fefedd"),t&&(t.style.margin="0px"))};class Tn{resize(e){var t;if(!this.isAllowedSize(e))return void h(`Size w:'${e.width}', h:'${e.height}' is not allow-listed for '${this.name}'`);const n=this.wrapperDiv,i=this.div,a=this.safeframe;null==n||n.removeAttribute("style"),n&&(n.style.overflow="hidden"),n&&(n.style.backgroundColor="white"),i.removeAttribute("style"),i.style.lineHeight="0",!n&&(i.style.marginBottom="20px"),i.style.marginLeft="auto",i.style.marginRight="auto",i.style.maxHeight="inherit",i.style.maxWidth="inherit",a.style.height="100%",a.style.width="100%",a.removeAttribute("height"),a.removeAttribute("width"),a.style.removeProperty("min-width"),a.style.removeProperty("max-height"),a.style.removeProperty("padding-bottom"),null===(t=this.card)||void 0===t||t.style.setProperty("padding","0"),je(e.height)||je(e.width)?(i.style.height=Je(e.height),i.style.width=Je(e.width)):i.style.aspectRatio=`${parseInt(e.width)} / ${parseInt(e.height)}`,this.resizeHandleSpecialCases(e),En(this.id,this.wrapperDiv)}collapse(){this.wrapperDiv&&(this.wrapperDiv.style.display="none"),this.div.style.display="none"}resizeHandleSpecialCases(e){const t=this.div;if(kn(this.slotName,e))t.style.maxWidth=Je(e.width);else if(Mn(this.slotName)){var n;const e=this.wrapperDiv;null==e||e.style.setProperty("width","100vw"),null==e||e.style.setProperty("margin-left","calc(-50vw + 50%)"),t.style.removeProperty("aspect-ratio"),t.style.height="50px",null===(n=t.closest(".a-container"))||void 0===n||n.style.setProperty("padding-top","0")}else if(Dn(this.slotName)){t.style.removeProperty("aspect-ratio"),t.style.height="55px",t.style.width="100vw",t.style.marginLeft="calc(-50vw + 50%)";const e=document.createElement("style");e.innerHTML=`#${t.id}_Feedback { margin-right: 10px; }`,t.prepend(e)}}get wrapperDiv(){return this.wrapperDivId?document.getElementById(this.wrapperDivId):null}get div(){return document.getElementById(this.divId)}get safeframe(){return document.getElementById(this.safeframeId)}get card(){return document.getElementById(`ape_${this.name}_aui_card`)}constructor(e,t,n,i,a,o,s){this.id=e,this.name=t,this.wrapperDivId=n,this.divId=i,this.safeframeId=a,this.slotName=o,this.allowedSizes=s,this.isAllowedSize=e=>this.allowedSizes.some((t=>Je(e.height)===t.height&&Je(e.width)===t.width))}}const Dn=e=>"desktop-detail-ilm"===e||"fresh-desktop-detail-ilm"===e||"wfm-desktop-detail-ilm"===e||"vindp-desktop-atf-ilm"===e,Mn=e=>"mobile-detail-ilm"===e||"mobile-app-detail-ilm"===e||"fresh-mobile-detail-ilm"===e||"fresh-mobile-detail-ilm-v1"===e||"wfm-mobile-detail-ilm-v1"===e,kn=(e,t)=>970===parseInt(t.width)||728===parseInt(t.width)||"merchandised-search-7"===e||"gwm-atf-dashboard"===e,Ln=e=>{var t;return new Tn(e.placementId,e.placementName,e.adUnitWrapperId,e.adUnitPlacementId,e.adUnitIframeId,e.slotName,(null!==(t=e.allowedSizes)&&void 0!==t?t:[]).concat({height:Je(e.size.height),width:Je(e.size.width)}))};class Pn{constructor(t,n){this.hms=t,this.hc=n,this.changeSize=(e,t)=>{var n;if(gt().isT1()){return void Ln(e.options).resize(t)}if(!e.options.allowChangeSize||Nn(e,t))return;const i=null===(n=e.options.allowedSizes)||void 0===n?void 0:n.concat(Rn(e.options.size));if(_n(t,i)){e.iframe.style.height=t.height,e.iframe.style.width=t.width;const n=Qe(e.options.arid,this.hc.AD_IDS);e.placement.style.height=n?t.height:"auto",e.placement.style.width=t.width,zn(e)}else h(`Size is not allow-listed: '${t.width}' x '${t.height}' for '${e.options.placementName}'`)},this.sendAdBarTrace=(e,t)=>{e.options.arid in this.hc.AD_TRACERS&&this.hc.AD_TRACERS[e.options.arid].logTrace(t.field,t.traceInfo)},this.startPixelTracking=async(e,t)=>{await ze(this.hms,this.hc,e,t)},this.logAPIInvocation=(e,t)=>{const n=`messenger:${t.apiName}`;ge(n),fe(n,{id:e.options.placementId,name:e.options.placementName}),e.options.arid in this.hc.AD_TRACERS&&this.hc.AD_TRACERS[e.options.arid].logTrace("apiCalls",t)},this.resizeSafeFrameAd=async e=>{gt().isT1()||(window.addEventListener("resize",this.hc.ADS_HANDLERS[e.options.arid].defaultResizeSafeFrameHandler),Xe(e.options.arid,e.options.size.width,e.options.size.height,e.options.maxAdWidth,this.hms,this.hc.AD_IDS))},this.setResizePlacementStyle=async e=>{gt().isT1()||(window.addEventListener("resize",this.hc.ADS_HANDLERS[e.options.arid].defaultSetResizePlacementStyle),e.options.resizePlacementStyle&&Ge(e.options.arid,this.hc.AD_IDS,e.options.resizePlacementStyle))},this.logError=(e,t)=>{h(t.message+": "+e.options.placementName,t.error)},this.logCsaEvent=(e,t)=>{xe(t.metricName,{name:e.options.placementName,id:e.options.placementId})},this.addCsaEntity=(e,t)=>{Pe(t)},this.sendLatencyMetric=(e,t)=>xn(e,t),this.customMessage=(e,t)=>{this.hms.customMessage(t.key,t.body,["openPsAdPopover","openATCModal","setPartner","sendMetrics","wrap"],e.options.placementName,e.options.placementId)},this.fireViewableLatencyMetrics=async(e,t)=>{ke(this.hc.viewableLatencyTrackers,e.options.arid,e.options.placementName,e.options.placementId,e.options.adUnitPlacementId,t.adLoadedTimestamp)},this.countMetric=(e,t)=>{t.isGlobal?ge(t.metricMsg,t.value):fe(t.metricMsg,{id:e.options.placementId,name:e.options.placementName},t.value)},this.addCsmTag=(e,t)=>{var n,i;t.isGlobal?(n=t.tag,i=t.msg,bn()&&In(n+An(i))):yn(t.tag,{id:e.options.placementId,name:e.options.placementName},t.msg)},this.requestVideoAutoplay=async(e,t)=>{vn(e,t,this.hms)},this.releaseVideoAutoplay=async()=>{fn()},this.haveVideoAutoplayPermission=async e=>{gn(e)},this.feedbackLabelRendered=e=>{rn(e)},this.feedbackOpenModal=e=>{dn(e)},this.handleFallbackExperience=async e=>{ln(e)},this.expandAdSlot=(e,t)=>{const n=e.iframe;try{const i=ct(t,n.offsetWidth),a=je(t.width)?t.width:n.offsetWidth;lt(e.options.arid,this.hc.AD_IDS),Xe(e.options.arid,qe(a),qe(i),e.options.maxAdWidth,this.hms,this.hc.AD_IDS);const o=Qe(e.options.arid,this.hc.AD_IDS);nt(o,qe(i+20)),mt(e,this.hms,this.resetSlotSize)}catch(i){u("Error attempting to expand ad slot: ",i),ht(e,this.hms),this.resetSlotSize(e)}},this.expandAdSlotWithOverlap=(e,t)=>{const n=e.iframe;try{const i=ct(t,n.offsetWidth);lt(e.options.arid,this.hc.AD_IDS),Ke(e.options.arid,this.hc.AD_IDS,qe(i)),st(e.options.arid,this.hc.AD_IDS),mt(e,this.hms,this.resetSlotSize)}catch(i){u("Error attempting to expand ad slot with overlap: ",i),ht(e,this.hms),this.resetSlotSize(e)}},this.resetSlotSize=e=>{const t=this.hc.ADS_HANDLERS[e.options.arid].defaultResizeSafeFrameHandler;t(),window.addEventListener("resize",I(20,t)),nt(Qe(e.options.arid,this.hc.AD_IDS),qe(parseInt(e.options.size.height,10)+20)),dt(e.options.arid,this.hc.AD_IDS)},this.triggerEventInIframe=(e,t)=>{this.hms.sendMessageToAd(e.options.arid,"triggerEventInIframe",{eventType:t.event.type})},this.registerCODFallback=(t,n)=>{e(le)("localStorage")&&T("SF",t.options.arid,n)},this.clearCODFallback=t=>{var n,i;e(le)("localStorage")&&(n="SF",i=t.options.arid,localStorage.removeItem(A(n,i)))},this.safeFrameReady=e=>{var t,n;null===(n=performance)||void 0===n||null===(t=n.mark)||void 0===t||t.call(n,`SafeFrame:  safeFrameReady ${e.options.slotName}`),this.hms.sendMessageToAd(e.options.arid,"setupComputedAdDetails",{computed:{aPageStart:window.aPageStart,adStartTime:(new Date).getTime()}})},this.saveAdDetailsForAdReporter=(e,t)=>{var n;window.adReporterDetails=null!==(n=window.adReporterDetails)&&void 0!==n?n:{},window.adReporterDetails[e.options.adUnitPlacementId]=Object.assign(e.options,t)}}}const xn=(e,{latencyMetricType:t,timestamp:n})=>{y().sendLatencyMetric({latencyMetricType:t,placementName:e.options.placementName,placementId:e.options.placementId,placementDivId:e.options.adUnitPlacementId,timestamp:n})},_n=(e,t)=>0!==t.length&&t.some((t=>{return i=t,(n=e).height===i.height&&n.width===i.width;var n,i})),zn=e=>{e.placement.style.overflow=""},Nn=(e,t)=>e.placement.style.height===t.height&&e.placement.style.width===t.width,Hn=e=>(null==e?void 0:e.endsWith("px"))||(null==e?void 0:e.endsWith("%"))?e:`${e}px`,Rn=e=>({height:Hn(e.height),width:Hn(e.width)}),Cn=e=>{const t=document.getElementById(e);void 0!==t&&t&&(t.style.display="none")};class Fn extends Pn{constructor(e,t){super(e,t),this.collapseSlot=async e=>{var t,n;(Cn(this.hc.AD_IDS[e.options.arid].placementDivId),Cn(this.hc.AD_IDS[e.options.arid].auiCardDeckId),"nav-sitewide-msg"===e.options.slotName)&&(await Te("amznJQ.available:navbarJSLoaded",e.placement),"function"==typeof(null===(n=parent)||void 0===n||null===(t=n.navbar)||void 0===t?void 0:t.unHideSWM)&&parent.navbar.unHideSWM())}}}const On="adload:start",$n="adload:delayloadcallback",Wn="adload_delayload";var Bn={HTML_REACHED:"adload:htmlreached"};const Un=e=>{const t=`@media screen and (orientation: landscape){[id=${e.parentElement.id}] { width: 100vw !important; margin-left: calc(-50vw + 50%) !important; height: 50px !important;}}@media screen and (orientation: portrait){[id=${e.parentElement.id}] {width: 100vw !important; margin-left: calc(-50vw + 50%) !important; height: 50px !important;}}`;jn(e,t)},qn=e=>{const t=`@media screen and (min-width: 1500px) {div[id$=${e.id}] {width: 100vw !important;height: 55px !important;margin: 0 calc(-50vw + 50%) 20px !important;}}@media screen and (max-width: 1500px) {div[id$=${e.id}_Feedback] {right: 5px !important}}`;jn(e,t)},jn=(e,t)=>{if(gt().isT1())return;const n=document.createElement("style");n.innerHTML=t,e.prepend(n)},Vn="nav-ewc-persistent-hover",Jn=e=>{switch(e.slotName){case"desktop-detail-ilm":case"fresh-desktop-detail-ilm":case"wfm-desktop-detail-ilm":case"vindp-desktop-atf-ilm":Xn(document.getElementById(e.adUnitPlacementId)),qn(document.getElementById(e.adUnitPlacementId));break;case"mobile-detail-ilm":case"mobile-app-detail-ilm":case"fresh-mobile-detail-ilm":case"fresh-mobile-detail-ilm-v1":case"wfm-mobile-detail-ilm-v1":Un(document.getElementById(e.adUnitPlacementId))}},Yn=e=>"attributes"===e.type&&"class"===e.attributeName&&e.target.classList.contains(Vn),Xn=e=>{if(null!==document.querySelector(`.${Vn}`))return void Gn(e);new MutationObserver(((t,n)=>{if(t.some(Yn))try{Gn(e),n.disconnect()}catch(i){h("Failed to resize ILM for EWC.",i)}})).observe(window.document.documentElement,{attributes:!0,attributeFilter:["class"]})},Gn=e=>{const t=document.querySelector("div#nav-flyout-ewc");if(null===e||null===t)return void h(`could not find placementDiv (value was: ${e}) or ewc (value was: ${t})`);const n=t.offsetWidth;Kn(e,n)},Kn=(e,t)=>{var n,i;const a=document.createElement("style");a.innerHTML=`@media screen and (min-width: 1500px) { div[id$=${e.id}] {\n        width: calc(100vw - ${t}px) !important; \n        margin-left: calc(-50vw + 50% + ${t/2}px) !important;\n        margin-right: calc(-50vw + 50% + ${t/2}px) !important;\n    `,null===(i=document)||void 0===i||null===(n=i.body)||void 0===n||n.appendChild(a)};class Zn{start(){const e=()=>{this.sendTrace(),window.setInterval(this.sendTrace,3e3)};"loading"!==document.readyState?e():window.addEventListener("load",e)}logTrace(e,t){if(this.traceId){let n;const i=(new Date).getTime();Object.prototype.hasOwnProperty.call(this.storedTrace,e)||(this.storedTrace[e]=[]);n=t===Object(t)?Object.assign({},t):JSON.parse('{ "'+e+'":"'+t+'"}'),n.timeStamp=i,n.timeSinceAdStart=i-this.adStartTime,this.storedTrace[e].push(n)}}async sendTrace(){if(!(e=>{for(const t in e)if(Object.prototype.hasOwnProperty.call(this.storedTrace,t))return!1;return!0})(this.storedTrace)){const e="/gp/adbarplus?traceId="+this.traceId+"&systemName=browser",t=await fetch(e,{method:"POST",body:JSON.stringify(this.storedTrace),headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(t.ok)for(const n in this.storedTrace)Object.prototype.hasOwnProperty.call(this.storedTrace,n)&&delete this.storedTrace[n];else console.error("failed to send request to /gp/adbarplus",t)}}constructor(e,t=0,n={}){this.traceId=e,this.adStartTime=t,this.storedTrace=n}}const Qn=(e,t)=>{const{slotName:n,traceId:i,arid:a,allowedSizes:o,computed:s,abpStatus:r,loadAfter:d}=t,l=window[n],c=new Zn(i,l&&l.adStartTime||0);e.AD_TRACERS[a]=c,e.AD_TRACERS[a].logTrace("safeFrameInput",t);const m={caches:window.caches,plugins:document.plugins,cookies:document.cookie,userAgents:navigator.userAgent};e.AD_TRACERS[a].logTrace("browserData",m);const p={allowedSizes:o,computed:s,adStartTime:l,abpStatus:r,loadAfter:d};e.AD_TRACERS[a].logTrace("additionalInitilizationParams",p),c.start()},ei=(e,t,n)=>e>0?n>e:t>0,ti=(e,t,n,i,a,o)=>{var s,r,d;const l=null===(d=document)||void 0===d||null===(r=d.getElementById)||void 0===r||null===(s=r.call(d,n))||void 0===s?void 0:s.getBoundingClientRect();if(l&&ei(l.top,l.bottom,$())&&ei(l.left,l.right,W())){if(y().sendLatencyMetric({latencyMetricType:we,placementId:a,placementName:i,placementDivId:n,timestamp:new Date}),e[o].loaded){y().sendLatencyMetric({latencyMetricType:ve,placementId:a,placementName:i,placementDivId:n,timestamp:new Date});const e={id:a,name:i};fe("adplacements:htmlviewed:loaded:",e),fe("adplacements:htmlviewed",e)}t.viewed=!0,c=t.tracker,window.removeEventListener("scroll",c),window.removeEventListener("resize",c),document.removeEventListener("visibilitychange",c)}var c},ni=(e,t,n,i,a)=>{if(!e[a]){e[a]={valid:!1};try{const o=e[a];ti(e,o,t,n,i,a);const s=D(I(20,(()=>{ti(e,o,t,n,i,a)})),h);Le(s),o.tracker=s,o.valid=!0}catch(o){throw h("Error initializing viewable latency instrumentation",o),o}}};class ii{constructor(e,t,n,i){this.hc=e,this.hms=t,this.hmr=n,this.supportedCommands=i,this.initializeAdIds=e=>{var t,n,i;this.hc.AD_IDS[e.arid]=(n=(t=e).placementName,i=H(t),{slotId:n,wrapperDivId:`ape_${i}_wrapper`,placementDivId:`ape_${i}_placement`,iframeId:`ape_${i}_iframe`,textDivWrapperId:`ape_${i}_text-wrapper`,textDivId:`ape_${i}_text`,auiCardDeckId:`ape_${i}_aui_cardDeck`})},this.initAllSafeFrames=async()=>{var e,t;null===(t=performance)||void 0===t||null===(e=t.mark)||void 0===e||e.call(t,"SafeFrame: Start initAllSafeFrames"),this.getWindowSafeFrame()||(this.initWindowSafeFrame({registerCustomMessageListener:this.hms.registerCustomMessageListener,sendCustomMessage:this.hms.sendCustomMessage,secondPhaseLoadAd:this.secondPhaseLoadAd}),Be(),di(this.getWindowSafeFrame()))},this.secondPhaseLoadAd=async(e,t,n,i,a,o)=>{var s,r;null===(r=performance)||void 0===r||null===(s=r.mark)||void 0===s||s.call(r,`SafeFrame: Start secondPhaseLoadAd ${t.adUnitPlacementId}`),this.initializeAdIds(t),li(t,this.hc,n);const d=this.hc,l=this.hms,c=this.hc.adMap[e].options;Qn(d,c),oi(d,l,c);const m=Ln(c);gt().isT1()&&m.resize(t.size),ge("resize:size:request"),t.creative.size?t.creative.size.heightPx===parseInt(t.size.height)&&t.creative.size.widthPx===parseInt(t.size.width)||ge("resize:size:differ"):ge("resize:size:missing"),mi(m);const p=this.hc.AD_IDS[e];if(ni(d.viewableLatencyTrackers,p.placementDivId,p.slotId,m.id,e),c.forcePunt)return yn("forcePunt",m),Pe({forcePunt:"true"}),void m.collapse();ai(c),ci(m,p.placementDivId,i,a,o),fe($n,m),xe(Wn,m),yt()&&mn(c);try{await cn(c)?(si(m,d,c,this.hmr,this.hms),ri(d,c,l)):m.collapse()}catch(h){throw m.collapse(),h}}}}const ai=e=>{y().sendLatencyMetric({latencyMetricType:ue,placementId:e.placementId,placementName:e.placementName,placementDivId:e.adUnitPlacementId}),fe(On,{id:e.placementId,name:e.placementName}),ge(On),xe("adload_start",{id:e.placementId,name:e.placementName})},oi=(e,t,n)=>{e.ADS_HANDLERS[n.arid]=e.ADS_HANDLERS[n.arid]||{},e.ADS_HANDLERS[n.arid].defaultResizeSafeFrameHandler=()=>{Xe(n.arid,n.size.width,n.size.height,n.maxAdWidth,t,e.AD_IDS)},e.ADS_HANDLERS[n.arid].defaultSetResizePlacementStyle=()=>{n.resizePlacementStyle&&Ge(n.arid,e.AD_IDS,n.resizePlacementStyle)}},si=(e,t,n,i,a)=>{if(fe($n,{id:n.placementId,name:n.placementName}),xe(Wn,{id:n.placementId,name:n.placementName}),n.forcePunt)return yn("forcePunt",{id:n.placementId,name:n.placementName}),Pe({forcePunt:"true"}),void e.collapse();t.adMap[n.arid].messagePort.onmessage=i.receiveMessage,cn(n)?ri(t,n,a):e.collapse()},ri=(e,t,n)=>{Jn(t)},di=e=>{window.addEventListener("resize",(()=>{null==e||e.sendCustomMessage("resize",{height:window.innerHeight,width:window.innerWidth})}))},li=(e,t,n)=>{try{const i=document.getElementById(t.AD_IDS[e.arid].placementDivId),a=t.AD_IDS[e.arid].iframeId,o=document.getElementById(a);t.adMap[e.arid]={placement:i,iframe:o,options:e,messagePort:n,hasTransferredMessagePort:!1}}catch(i){h(`Error creating safeFrame ${e.slotName}`,i)}},ci=(e,t,n,i,a)=>{var o,s;n&&(fe(Bn.HTML_REACHED,e),xe(Bn.HTML_REACHED,e)),i&&(d({latencyEvent:"wb",placement:e,timestamp:i}),d({latencyEvent:"bb",placement:e,timestamp:i}));const r=null===(s=document)||void 0===s||null===(o=s.getElementById)||void 0===o?void 0:o.call(s,t);a&&null!==r&&f(r,"bodyBegin",a)},mi=e=>{try{fe("coordinate:x",e,e.div.getBoundingClientRect().x),fe("coordinate:y",e,e.div.getBoundingClientRect().y),fe("coordinate:request",e)}catch(t){return}},pi="custommessage:notallowlisted";class hi{constructor(e,t={}){this.adMap=e,this.msgListeners=t,this.sendMessageToAd=(e,t,n)=>{const i={command:t,data:n};this.adMap[e].messagePort.postMessage(i)},this.customMessage=(e,t,n,i,a)=>{const o=this.msgListeners;try{"undefined"!==n&&Array.isArray(n)&&(n.indexOf(e)>-1&&o[e]?(ge(`custommessage:allowlisted:${e}`),o[e](t)):-1===n.indexOf(e)?(ge(pi),fe(pi,{id:a,name:i})):h("Unrecognized custom message key: "+e))}catch(s){h("Custom Message Error",s)}},this.registerCustomMessageListener=(e,t,n)=>{let i=!1;const a=this.msgListeners;try{if(!a[e]||"function"!=typeof a[e]||n)a[e]=t,i=!0;else{const t=new Error("Custom message listener already exists for key: "+e);h("Duplicate Key",t)}}catch(o){h("Error registering custom message listener",o)}return i},this.sendCustomMessage=(e,t)=>{const n=this.adMap,i={key:e,data:t};for(const a in n)this.sendMessageToAd(a,"customMessage",i)},this.sendCustomMessageToAd=(e,t,n)=>{const i={key:t,data:n};this.sendMessageToAd(e,"customMessage",i)}}}class ui{constructor(e={},t={},n={},i={},a={}){this.adMap=e,this.ADS_HANDLERS=t,this.AD_IDS=n,this.AD_TRACERS=i,this.viewableLatencyTrackers=a}}class wi{constructor(e={},t){this.adMap=e,this.supportedCommands=t,this.receiveMessage=async e=>{const t=this.adMap,n=e.data,i=t[n.arid];try{const e=this.supportedCommands[n.command];e&&await e(i,n.data)}catch(a){const t="Problem with message: "+JSON.stringify(e.data);h(t,a)}}}}var vi,fi;null===(fi=performance)||void 0===fi||null===(vi=fi.mark)||void 0===vi||vi.call(fi,"SafeFrame: SafeFrame: Starting DAsf");const gi=new ui,yi=new hi(null==gi?void 0:gi.adMap),bi=new class extends ii{constructor(e=new ui,t=new hi(e.adMap)){const n=new Fn(t,e);super(e,t,new wi(e.adMap,n),n),this.initWindowSafeFrame=e=>{window.DAsf=e},this.getWindowSafeFrame=()=>window.DAsf}}(gi,yi);D((()=>bi.initAllSafeFrames()),h,"Error initializing safeFrame")()})();
//# sourceMappingURL=DAsf-1.50.2a93da03.js.map
